{"version":3,"file":"index.js","sources":["../../plugin-bundle/dist/index.mjs","../../plugin-buttons/dist/index.mjs","../../legend/dist/index.mjs","../src/Draft/Svg/index.js","../src/Draft/Defs/index.js","../src/Draft/TextOnPath/index.js","../src/Draft/DesignPath/index.js","../src/Draft/utils.js","../src/Draft/Path/index.js","../src/Draft/DesignPoint/index.js","../src/Draft/Text/index.js","../src/Draft/Circle/index.js","../src/Draft/Point/index.js","../src/Draft/Snippet/index.js","../src/Draft/Part/index.js","../src/Draft/index.js","../src/Legend/index.js"],"sourcesContent":["/**\n * @freesewing/plugin-bundle | v2.17.0\n * An umbrella package of 8 essential FreeSewing build-time plugins\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\n/**\n * @freesewing/plugin-buttons | v2.17.0\n * A FreeSewing plugin that provides button, buttonhole, and snap snippets\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar button = '<g id=\"button\"><circle cx=\"0\" cy=\"0\" r=\"3.4\" style=\"stroke:#000000;fill:none;stroke-width:1;\"/><circle cx=\"-1\" cy=\"-1\" r=\"0.5\" style=\"stroke:none;fill:#000000;\"/><circle cx=\"1\" cy=\"-1\" r=\"0.5\" style=\"stroke:none;fill:#000000;\" /><circle cx=\"1\" cy=\"1\" r=\"0.5\" style=\"stroke:none;fill:#000000;\" /><circle cx=\"-1\" cy=\"1\" r=\"0.5\" style=\"stroke:none;fill:#000000;\" /></g>';\n\nvar buttonhole = '<g id=\"buttonhole\"><path style=\"fill:none;stroke:#000000;\" d=\"M -1,-5 L 1,-5 L 1,5 L -1,5 z\" /></g><g id=\"buttonhole-start\"><path style=\"fill:none;stroke:#000000;\" d=\"M -1,-10 L 1,-10 L 1,0 L -1,0 z\" /></g><g id=\"buttonhole-end\"><path style=\"fill:none;stroke:#000000;\" d=\"M -1,0 L 1,0 L 1,10 L -1,10 z\" /></g>';\n\nvar snaps = '<radialGradient id=\"snap-stud-grad\" cx=\"50%\" cy=\"50%\" r=\"50%\" fx=\"50%\" fy=\"50%\"><stop offset=\"30%\" style=\"stop-color:rgb(235,235,235); stop-opacity:1\"/><stop offset=\"80%\" style=\"stop-color:rgb(100,100,100);stop-opacity:1\" /></radialGradient><g id=\"snap-stud\" ><circle id=\"snap-stud-circle-edge\" cx=\"0\" cy=\"0\" r=\"3.4\" style=\"stroke:#666;fill:#dddddd;stroke-width:0.3;\" /><circle id=\"snap-stud-circle-middle\" cx=\"0\" cy=\"0\" r=\"1.8\" style=\"stroke:none;fill:url(#snap-stud-grad);\"/><path style=\"fill:none;stroke:#666; stroke-width:0.2;\" d=\"M -2,0 L -3,0 M 2,0 L 3,0 M 0,2 L 0,3 M 0,-2 L 0,-3 M 1.5,1.5 L 2.1,2.1 M -1.5,1.5 L -2.1,2.1 M -1.5,-1.5 L -2.1,-2.1 M 1.5,-1.5 L 2.1,-2.1\" id=\"snap-stud-lines\"/></g><g id=\"snap-socket\"><circle id=\"snap-socket-circle-edge\" cx=\"0\" cy=\"0\" r=\"3.4\" style=\"stroke:#666;fill:#bbbbbb;stroke-width:0.3;\"/><circle id=\"snap-socket-circle-middle\" cx=\"0\" cy=\"0\" r=\"2\" style=\"stroke:#666;fill:#dddddd; stroke-width:0.4;\"/><path style=\"fill:none;stroke:#666; stroke-width:0.5;\" d=\"M -1.7,-1 L -1.7,1 M 1.7,-1 L 1.7,1\" id=\"snap-socket-lines\" /></g>';\n\nvar name$c = \"@freesewing/plugin-buttons\";\nvar version$c = \"2.17.0\";\n\nvar index$c = {\n  name: name$c,\n  version: version$c,\n  hooks: {\n    preRender: function (svg) {\n      if (svg.attributes.get('freesewing:plugin-buttons') === false)\n        svg.attributes.set('freesewing:plugin-buttons', version$c);\n      svg.defs += button + buttonhole + snaps;\n    },\n  },\n};\n\n/**\n * @freesewing/plugin-cutonfold | v2.17.0\n * A FreeSewing plugin to add cut-on-fold indicators on your patterns\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar markers$2 = `\n<marker orient=\"auto\" refY=\"0.0\" refX=\"0.0\" id=\"cutonfoldFrom\" style=\"overflow:visible;\" >\n\t<path class=\"note fill-note\" d=\"M 0,0 L 12,-4 C 10,-2 10,2  12, 4 z\" />\n</marker>\n<marker orient=\"auto\" refY=\"0.0\" refX=\"0.0\" id=\"cutonfoldTo\" style=\"overflow:visible;\" >\n\t<path class=\"note fill-note\" d=\"M 0,0 L -12,-4 C -10,-2 -10,2  -12, 4 z\" />\n</marker>\n`;\n\nvar name$b = \"@freesewing/plugin-cutonfold\";\nvar version$b = \"2.17.0\";\n\nvar index$b = {\n  name: name$b,\n  version: version$b,\n  hooks: {\n    preRender: function (svg) {\n      if (svg.attributes.get('freesewing:plugin-cutonfold') === false) {\n        svg.attributes.set('freesewing:plugin-cutonfold', version$b);\n        svg.defs += markers$2;\n      }\n    },\n  },\n  macros: {\n    cutonfold: function (so) {\n      if (so === false) {\n        delete this.points.cutonfoldFrom;\n        delete this.points.cutonfoldTo;\n        delete this.points.cutonfoldVia1;\n        delete this.points.cutonfoldVia2;\n        delete this.paths.cutonfold;\n        return true\n      }\n      let points = this.points;\n      so = {\n        offset: 15,\n        margin: 5,\n        prefix: '',\n        ...so,\n      };\n      points['cutonfoldFrom' + so.prefix] = so.from.shiftFractionTowards(so.to, so.margin / 100);\n      points['cutonfoldTo' + so.prefix] = so.to.shiftFractionTowards(so.from, so.margin / 100);\n      points['cutonfoldVia1' + so.prefix] = points['cutonfoldFrom' + so.prefix]\n        .shiftTowards(so.from, so.offset)\n        .rotate(-90, points['cutonfoldFrom' + so.prefix]);\n      points['cutonfoldVia2' + so.prefix] = points['cutonfoldTo' + so.prefix]\n        .shiftTowards(so.to, so.offset)\n        .rotate(90, points['cutonfoldTo' + so.prefix]);\n      let text = so.grainline ? 'cutOnFoldAndGrainline' : 'cutOnFold';\n      this.paths['cutonfold' + so.prefix] = new this.Path()\n        .move(points['cutonfoldFrom' + so.prefix])\n        .line(points['cutonfoldVia1' + so.prefix])\n        .line(points['cutonfoldVia2' + so.prefix])\n        .line(points['cutonfoldTo' + so.prefix])\n        .attr('class', 'note')\n        .attr('marker-start', 'url(#cutonfoldFrom)')\n        .attr('marker-end', 'url(#cutonfoldTo)')\n        .attr('data-text', text)\n        .attr('data-text-class', 'center fill-note');\n    },\n  },\n};\n\n/**\n * @freesewing/plugin-dimension | v2.17.0\n * A FreeSewing plugin to add dimensions to your (paperless) pattern\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar markers$1 = `\n<marker orient=\"auto\" refY=\"0.0\" refX=\"0.0\" id=\"dimensionFrom\" style=\"overflow:visible;\"><path class=\"mark fill-mark\" d=\"M 0,0 L 12,-4 C 10,-2 10,2  12, 4 z\" /></marker>\n<marker orient=\"auto\" refY=\"0.0\" refX=\"0.0\" id=\"dimensionTo\" style=\"overflow:visible;\" ><path class=\"mark fill-mark\" d=\"M 0,0 L -12,-4 C -10,-2 -10,2  -12, 4 z\" /></marker>\n`;\n\nvar name$a = \"@freesewing/plugin-dimension\";\nvar version$a = \"2.17.0\";\n\nconst prefix = '__paperless';\n\nfunction drawDimension(from, to, so, self) {\n  let dimension = new self.Path()\n    .move(from)\n    .line(to)\n    .attr('class', 'mark')\n    .attr('data-text', so.text || self.units(from.dist(to)))\n    .attr('data-text-class', 'fill-mark center');\n  if (!so.noStartMarker) dimension.attributes.set('marker-start', 'url(#dimensionFrom)');\n  if (!so.noEndMarker) dimension.attributes.set('marker-end', 'url(#dimensionTo)');\n\n  return dimension\n}\n\nfunction drawLeader(self, from, to, id) {\n  self.paths[id] = new self.Path().move(from).line(to).attr('class', 'mark dotted');\n}\n\nfunction hleader(so, type, self, id) {\n  let point;\n  if (typeof so.y === 'undefined' || so[type].y === so.y) {\n    point = so[type];\n  } else {\n    point = new self.Point(so[type].x, so.y);\n    drawLeader(self, so[type], point, id);\n  }\n\n  return point\n}\n\nfunction vleader(so, type, self, id) {\n  let point;\n  if (typeof so.x === 'undefined' || so[type].x === so.x) {\n    point = so[type];\n  } else {\n    point = new self.Point(so.x, so[type].y);\n    drawLeader(self, so[type], point, id);\n  }\n\n  return point\n}\n\nfunction lleader(so, type, self, id) {\n  let point, rot, other;\n  if (type === 'from') {\n    rot = 1;\n    other = 'to';\n  } else {\n    rot = -1;\n    other = 'from';\n  }\n  if (typeof so.d === 'undefined') {\n    point = so[type];\n  } else {\n    point = so[type].shiftTowards(so[other], so.d).rotate(90 * rot, so[type]);\n    drawLeader(self, so[type], point, id);\n  }\n\n  return point\n}\n\nvar index$a = {\n  name: name$a,\n  version: version$a,\n  hooks: {\n    preRender: function (svg) {\n      if (svg.attributes.get('freesewing:plugin-dimension') === false) {\n        svg.attributes.set('freesewing:plugin-dimension', version$a);\n        svg.defs += markers$1;\n      }\n    },\n  },\n  macros: {\n    // horizontal\n    hd: function (so) {\n      let id = so.id || this.getId(prefix);\n      let from = hleader(so, 'from', this, id + '_ls');\n      let to = hleader(so, 'to', this, id + '_le');\n      this.paths[id] = drawDimension(from, to, so, this);\n    },\n    // vertical\n    vd: function (so) {\n      let id = so.id || this.getId(prefix);\n      let from = vleader(so, 'from', this, id + '_ls');\n      let to = vleader(so, 'to', this, id + '_le');\n      this.paths[id] = drawDimension(from, to, so, this);\n    },\n    // linear\n    ld: function (so) {\n      let id = so.id || this.getId(prefix);\n      let from = lleader(so, 'from', this, id + '_ls');\n      let to = lleader(so, 'to', this, id + '_le');\n      this.paths[id] = drawDimension(from, to, so, this);\n    },\n    // path\n    pd: function (so) {\n      let dimension = so.path\n        .offset(so.d)\n        .attr('class', 'mark')\n        .attr('marker-start', 'url(#dimensionFrom)')\n        .attr('marker-end', 'url(#dimensionTo)')\n        .attr('data-text', so.text || this.units(so.path.length()))\n        .attr('data-text-class', 'fill-mark center');\n      let id = so.id || this.getId(prefix);\n      drawLeader(this, so.path.start(), dimension.start(), id + '_ls');\n      drawLeader(this, so.path.end(), dimension.end(), id + '_le');\n      this.paths[id] = dimension;\n    },\n    // Remove dimension\n    rmd: function (so) {\n      if (this.paths[so.id]) delete this.paths[so.id];\n      if (this.paths[`${so.id}_ls`]) delete this.paths[`${so.id}_ls`];\n      if (this.paths[`${so.id}_le`]) delete this.paths[`${so.id}_le`];\n      if (Array.isArray(so.ids)) {\n        for (const id of so.ids) {\n          if (this.paths[id]) delete this.paths[id];\n          if (this.paths[`${id}_ls`]) delete this.paths[`${id}_ls`];\n          if (this.paths[`${id}_le`]) delete this.paths[`${id}_le`];\n        }\n      }\n    },\n    // Remove all dimensions (with standard prefix)\n    rmad: function (so) {\n      for (let type of ['paths', 'points']) {\n        for (let id in this[type]) {\n          if (id.slice(0, prefix.length) === prefix) delete this[type][id];\n        }\n      }\n    },\n  },\n};\n\n/**\n * @freesewing/plugin-grainline | v2.17.0\n * A FreeSewing plugin to add grainline indicators on your patterns\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar markers = `\n<marker orient=\"auto\" refY=\"0.0\" refX=\"0.0\" id=\"grainlineFrom\" style=\"overflow:visible;\" >\n\t<path class=\"note fill-note\" d=\"M 0,0 L 12,-4 C 10,-2 10,2  12, 4 z\" />\n</marker>\n<marker orient=\"auto\" refY=\"0.0\" refX=\"0.0\" id=\"grainlineTo\" style=\"overflow:visible;\" >\n\t<path class=\"note fill-note\" d=\"M 0,0 L -12,-4 C -10,-2 -10,2  -12, 4 z\" />\n</marker>\n`;\n\nvar name$9 = \"@freesewing/plugin-grainline\";\nvar version$9 = \"2.17.0\";\n\nvar index$9 = {\n  name: name$9,\n  version: version$9,\n  hooks: {\n    preRender: function (svg) {\n      if (svg.attributes.get('freesewing:plugin-grainline') === false) {\n        svg.attributes.set('freesewing:plugin-grainline', version$9);\n        svg.defs += markers;\n      }\n    },\n  },\n  macros: {\n    grainline: function (so) {\n      if (so === false) {\n        delete this.points.grainlineFrom;\n        delete this.points.grainlineTo;\n        delete this.paths.grainline;\n        return true\n      }\n      let points = this.points;\n      points.grainlineFrom = so.from.shiftFractionTowards(so.to, 0.05);\n      points.grainlineTo = so.to.shiftFractionTowards(so.from, 0.05);\n      this.paths.grainline = new this.Path()\n        .move(points.grainlineFrom)\n        .line(points.grainlineTo)\n        .attr('class', 'note')\n        .attr('marker-start', 'url(#grainlineFrom)')\n        .attr('marker-end', 'url(#grainlineTo)')\n        .attr('data-text', 'grainline')\n        .attr('data-text-class', 'center fill-note');\n    },\n  },\n};\n\n/**\n * @freesewing/plugin-logo | v2.17.0\n * A FreeSewing plugin to add our logo to your patterns\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar logo = '<g id=\"logo\" transform=\"translate(-23 -36)\"><path class=\"logo\" stroke=\"none\" fill=\"currentColor\" d=\"M 35.222,0 C 34.233,0.703 34.284,0.613 33.485,0.874 31.653,1.473 29.896,1.144 27.811,0.97 27.184,0.9 26.562,0.859 25.955,0.855 22.89,0.834 20.287,1.733 19.794,4.243 18.885,4.794 18.049,5.461 17.221,6.129 15.453,7.524 14.122,9.229 13.214,11.284 11.974,14.319 13.094,17.576 13.649,20.652 13.781,21.372 13.919,22.058 13.993,22.323 14.098,22.696 14.283,23.052 14.484,23.372 14.531,23.38 14.779,22.998 14.838,22.829 14.924,22.583 14.915,22.188 14.821,21.848 14.613,21.083 14.415,20.462 14.398,20.15 14.368,19.564 14.482,19.023 14.696,18.755 14.772,18.66 14.946,19.15 14.901,19.332 14.848,19.551 14.808,19.926 14.825,20.099 14.872,20.685 14.958,21.312 15.065,21.86 15.202,22.567 15.261,23.021 15.236,23.197 15.218,23.325 15.158,23.454 14.928,23.85 14.728,24.197 14.624,24.478 14.608,24.726 14.591,24.968 14.664,25.573 14.732,25.721 14.831,25.952 15.129,26.195 15.389,26.255 15.638,26.35 15.763,26.547 15.891,26.768 16.202,27.361 16.442,28.083 16.68,29.171 16.796,29.692 16.893,30.157 16.924,30.401 15.004,30.403 12.545,30.404 10.305,30.404 9.551,30.416 8.189,30.062 6.94,29.98 6.759,28.026 5.901,25.756 4.433,25.624 3.431,25.533 2.6,25.914 1.897,27.497 L 1.917,27.582 C 2.332,27.235 2.77,26.174 4.348,26.247 5.56,26.302 5.964,28.596 6.084,29.976 5.346,30.03 4.718,30.257 4.39,30.824 L 4.383,30.824 C 4.383,30.825 4.383,30.827 4.386,30.829 4.383,30.831 4.383,30.833 4.383,30.835 L 4.39,30.835 C 4.728,31.416 5.379,31.641 6.144,31.686 6.655,46.136 20.238,48 23.95,48 37.798,48 42.646,38.59 43.375,34.863 43.716,36.451 42.642,38.474 42.385,39.967 45.306,36.59 44.778,33.343 44.244,30.077 44.688,30.605 45.289,30.932 46.104,30.751 45.523,30.363 44.735,30.635 44.263,28.998 44.057,28.291 43.879,27.761 43.702,27.316 43.32,25.883 42.778,24.514 42.112,23.18 41.55,21.733 41.921,20.795 41.865,19.553 42.876,22.887 43.508,23.774 44.688,24.123 41.72,20.547 42.736,15.01 41.059,10.068 41.818,10.514 42.684,10.648 43.606,10.103 42.714,9.849 41.824,10.52 40.544,8.639 39.463,6.536 37.897,4.983 35.997,3.613 34.979,2.949 33.849,2.503 32.713,2.089 33.87,1.799 35.162,0.769 35.222,0 z M 33.281,11.107 C 34.805,11.663 36.485,13.775 36.466,15.847 L 36.466,15.933 36.466,15.963 C 36.425,18.777 35.146,20.29 35.2,22.164 35.269,24.371 36.219,25.141 36.408,25.509 36.084,24.148 35.894,22.436 36.322,21.08 36.872,19.336 37.427,17.892 37.387,16.526 37.367,16.206 37.231,15.009 37.14,14.479 38.774,16.837 36.786,20.266 37.358,22.51 38.352,26.419 42.807,26.913 41.481,34.789 40.314,41.713 32.318,46.968 24.122,46.968 18.046,46.968 7.517,43.605 6.997,31.676 8.232,31.588 9.56,31.244 10.305,31.256 12.557,31.256 15.129,31.257 17.067,31.258 17.431,32.9 17.704,33.296 19.085,34.39 20.621,35.598 20.979,35.745 23.251,35.767 25.524,35.79 26.198,35.303 28.403,33.217 28.879,32.659 29.085,31.928 29.316,31.241 31.584,31.22 33.238,31.18 34.865,31.104 36.522,31.029 36.756,31.104 39.426,30.829 36.756,30.554 36.522,30.629 34.865,30.553 33.281,30.481 31.677,30.44 29.508,30.42 29.69,29.603 29.95,28.805 30.227,28.016 30.398,27.551 30.599,27.098 30.805,26.647 L 31.03,26.577 C 31.464,26.423 31.848,26.093 32.001,25.647 32.198,25.056 32.058,24.392 31.677,23.909 31.546,23.728 31.383,23.497 31.316,23.395 31.115,23.077 31.11,22.9 31.28,21.718 31.423,20.728 31.439,20.21 31.34,19.708 31.32,19.421 31.318,18.831 31.309,18.672 31.385,18.714 31.55,19.09 31.717,19.599 31.883,20.11 31.91,20.216 31.948,20.651 31.99,21.145 31.805,21.511 31.653,22.248 31.577,22.628 31.51,22.981 31.51,23.029 31.51,23.08 31.546,23.188 31.584,23.272 31.673,23.46 31.84,23.724 31.871,23.724 32.416,23.123 32.736,22.381 33.021,21.628 33.321,20.776 33.409,19.872 33.619,18.995 33.789,18.231 33.985,17.466 34.046,16.682 34.169,15.152 34.097,14.072 33.759,12.478 33.678,12.118 33.444,11.431 33.281,11.107 z M 27.921,18.644 C 28.506,18.637 29.085,18.708 29.636,18.867 30.385,19.154 30.49,19.823 30.628,20.574 30.705,21.054 30.702,21.399 30.615,21.963 30.554,22.781 30.229,23.414 29.519,23.859 28.448,24.057 27.303,24.248 26.395,23.539 25.633,22.489 25.174,21.162 25.349,19.868 25.46,19.337 25.707,19.061 26.215,18.896 26.762,18.739 27.341,18.653 27.921,18.644 z M 19.038,18.739 C 19.585,18.734 20.138,18.792 20.442,18.986 21.747,19.869 21.328,21.306 20.812,22.567 20.061,24.218 18.437,24.157 16.863,24.144 15.992,23.889 15.912,23.175 15.786,22.412 15.678,21.675 15.448,20.885 15.64,20.144 16.133,18.952 17.935,18.815 19.038,18.739 z M 38.941,18.945 C 38.948,22.118 39.49,23.677 40.578,25.924 39.937,24.701 39.021,24.005 38.68,22.543 38.028,19.72 38.731,19.878 38.941,18.945 z M 23.128,21.243 C 23.3,21.417 23.383,21.657 23.532,21.848 23.647,21.651 23.765,21.455 23.913,21.28 23.99,21.282 24.084,21.434 24.169,21.706 24.533,22.712 24.604,23.819 25.076,24.786 25.517,25.486 24.915,25.894 24.254,25.926 23.772,25.925 23.568,25.596 23.285,25.27 23.212,25.483 23.073,25.62 22.907,25.764 22.485,26.118 21.658,25.987 21.53,25.429 21.7,24.363 22.243,23.384 22.599,22.362 22.776,21.989 22.778,21.703 23.128,21.243 z M 16.936,26.628 C 17.149,26.628 17.734,27.025 17.853,27.249 17.935,27.398 18.122,27.978 18.135,28.119 18.156,28.287 18.105,28.685 18.053,28.793 18.015,28.87 17.986,28.881 17.942,28.831 17.905,28.789 17.415,27.849 17.102,27.227 16.856,26.729 16.83,26.628 16.936,26.628 z M 29.158,26.939 C 29.166,26.94 29.178,26.943 29.189,26.946 29.255,26.973 29.209,27.207 28.961,28.057 28.914,28.313 28.8,28.515 28.633,28.683 28.578,28.683 28.553,28.619 28.467,28.264 28.394,27.961 28.386,27.691 28.437,27.449 28.525,27.146 28.881,27.053 29.158,26.939 z M 27.675,28.792 C 27.696,28.788 27.716,28.799 27.742,28.82 27.832,28.883 27.845,29.049 27.785,29.374 27.712,29.792 27.696,29.838 27.588,29.881 27.541,29.902 27.457,29.917 27.401,29.917 27.3,29.899 27.274,29.817 27.298,29.693 27.298,29.433 27.374,29.207 27.546,28.94 27.611,28.84 27.644,28.797 27.675,28.792 z M 19.042,28.811 C 19.111,28.811 19.319,28.961 19.396,29.065 19.482,29.175 19.58,29.83 19.525,29.943 19.462,30.085 19.154,30.014 19.069,29.837 19.017,29.731 18.894,29.159 18.894,29.023 18.894,28.897 18.955,28.811 19.042,28.811 z M 26.933,28.984 C 27.017,29.104 27.039,29.258 27.021,29.596 L 27.004,29.904 26.916,29.992 C 26.863,30.041 26.773,30.101 26.719,30.126 26.6,30.182 26.509,30.187 26.492,30.142 26.472,30.082 26.506,29.7 26.543,29.571 26.586,29.438 26.779,29.041 26.843,28.957 26.872,28.88 26.906,28.976 26.933,28.984 z M 21.912,28.966 C 22.093,29.012 22.173,29.175 22.272,29.323 L 22.339,29.455 22.245,29.782 C 22.195,29.962 22.142,30.124 22.126,30.142 22.108,30.162 22.041,30.172 21.942,30.171 21.678,30.164 21.648,30.153 21.577,30.045 L 21.511,29.947 21.567,29.672 C 21.648,29.276 21.687,29.157 21.777,29.055 21.824,29 21.871,28.97 21.912,28.966 z M 20.241,29.249 20.39,29.398 20.415,29.735 C 20.428,29.919 20.434,30.09 20.424,30.111 20.415,30.14 20.361,30.148 20.194,30.148 L 19.977,30.148 C 19.861,30.021 19.825,29.866 19.776,29.706 19.662,29.225 19.662,29.006 19.78,28.977 19.973,28.989 20.1,29.129 20.241,29.249 z M 26.041,29.018 C 26.277,29.081 26.23,29.456 26.229,29.724 26.211,30.158 26.194,30.248 26.138,30.304 26.041,30.401 25.771,30.347 25.64,30.203 25.597,30.151 25.593,30.135 25.627,29.924 25.666,29.667 25.716,29.507 25.827,29.287 25.908,29.129 25.984,29.03 26.041,29.018 z M 20.715,29.038 C 20.728,29.037 20.749,29.038 20.769,29.04 20.919,29.052 21.059,29.15 21.183,29.33 L 21.283,29.477 C 21.292,29.718 21.283,29.972 21.24,30.196 21.214,30.209 21.106,30.229 21,30.239 20.816,30.256 20.799,30.252 20.735,30.196 20.646,30.12 20.621,29.979 20.599,29.511 20.586,29.129 20.595,29.044 20.715,29.038 z M 22.984,29.118 C 23.145,29.152 23.247,29.238 23.292,29.379 23.328,29.5 23.35,30.177 23.315,30.224 23.303,30.244 23.227,30.269 23.14,30.28 22.816,30.321 22.53,30.29 22.502,30.213 22.466,30.125 22.707,29.253 22.796,29.145 22.834,29.061 22.926,29.126 22.984,29.118 z M 25.082,29.124 C 25.153,29.117 25.229,29.185 25.303,29.33 25.363,29.451 25.372,29.493 25.372,29.764 25.372,29.98 25.359,30.073 25.336,30.093 25.316,30.109 25.235,30.138 25.149,30.16 24.999,30.199 24.966,30.203 24.919,30.187 L 24.694,30.146 24.711,30.012 C 24.727,29.837 24.842,29.449 24.923,29.281 24.971,29.181 25.026,29.131 25.082,29.124 z M 24.104,29.127 C 24.151,29.125 24.173,29.136 24.203,29.169 24.274,29.253 24.364,29.501 24.421,29.766 24.497,30.139 24.497,30.138 24.334,30.187 24.263,30.209 24.113,30.232 24.006,30.238 23.653,30.256 23.626,30.235 23.669,29.923 23.703,29.645 23.84,29.207 23.899,29.175 23.963,29.141 24.037,29.142 24.104,29.127 z M 6.111,30.536 C 6.114,30.535 6.118,30.536 6.118,30.536 6.127,30.731 6.127,30.928 6.131,31.124 5.636,31.086 5.272,30.968 5.272,30.829 5.272,30.692 5.623,30.575 6.111,30.536 z M 6.976,30.553 C 7.377,30.603 7.654,30.708 7.649,30.829 7.649,30.951 7.381,31.055 6.983,31.104 6.979,30.921 6.979,30.737 6.976,30.553 z M 25.702,31.086 C 25.736,31.083 25.751,31.08 25.803,31.085 26.011,31.106 26.041,31.119 26.041,31.189 26.041,31.281 25.883,31.558 25.776,31.654 25.726,31.702 25.657,31.742 25.633,31.742 25.513,31.742 25.443,31.489 25.499,31.256 25.533,31.13 25.595,31.091 25.702,31.086 z M 24.947,31.169 C 25.04,31.161 25.13,31.186 25.22,31.198 25.194,31.461 25.076,31.676 24.857,31.819 24.803,31.819 24.776,31.716 24.776,31.491 24.776,31.223 24.79,31.172 24.947,31.169 z M 24.119,31.266 C 24.312,31.266 24.482,31.275 24.49,31.286 24.526,31.32 24.422,31.578 24.269,31.84 24.138,32.073 24.119,32.09 24.038,32.096 23.72,32.06 23.729,31.687 23.68,31.431 23.68,31.279 23.714,31.266 24.119,31.266 z M 21.11,31.295 C 21.331,31.299 21.417,31.332 21.417,31.417 21.417,31.525 21.335,31.74 21.288,31.767 21.217,31.806 21.211,31.804 21.071,31.658 20.85,31.41 20.825,31.364 21.11,31.295 z M 22.174,31.306 C 22.178,31.312 22.221,31.39 22.264,31.478 22.358,31.661 22.365,31.741 22.298,31.802 22.14,31.892 22.107,31.841 21.964,31.75 21.798,31.593 21.667,31.382 21.71,31.338 21.858,31.285 22.021,31.305 22.174,31.306 z M 22.596,31.311 22.991,31.318 C 23.145,31.318 23.278,31.326 23.285,31.338 23.312,31.362 23.225,31.876 23.178,31.992 23.124,32.122 22.935,32.123 22.837,31.969 22.697,31.748 22.605,31.562 22.602,31.434 L 22.596,31.311 z\" /></g>';\n\nvar name$8 = \"@freesewing/plugin-logo\";\nvar version$8 = \"2.17.0\";\n\nvar index$8 = {\n  name: name$8,\n  version: version$8,\n  hooks: {\n    preRender: function (svg) {\n      if (svg.attributes.get('freesewing:plugin-logo') === false) {\n        svg.attributes.set('freesewing:plugin-logo', version$8);\n        svg.defs += logo;\n      }\n    },\n  },\n};\n\n/**\n * @freesewing/plugin-mirror | v2.17.0\n * A FreeSewing plugin to mirror points or paths\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar name$7 = \"@freesewing/plugin-mirror\";\nvar version$7 = \"2.17.0\";\n\nconst lineValues = (start, end) => {\n  const { x: x1, y: y1 } = start;\n  const { x: x2, y: y2 } = end;\n  const [A, B] = [-(y2 - y1), x2 - x1];\n  const C = -(A * x1 + B * y1);\n  return [A, B, C]\n};\n\nconst mirrorGen = (start, end) => {\n  const [A, B, C] = lineValues(start, end);\n  return (point) => {\n    const { x, y } = point;\n    const uNom = (B ** 2 - A ** 2) * x - 2 * A * B * y - 2 * A * C;\n    const vNom = (A ** 2 - B ** 2) * y - 2 * A * B * x - 2 * B * C;\n    const denom = A ** 2 + B ** 2;\n    return [uNom / denom, vNom / denom]\n  }\n};\n\nconst capFirst = (string) => string.charAt(0).toUpperCase() + string.slice(1);\n\nvar index$7 = {\n  name: name$7,\n  version: version$7,\n  hooks: {\n    preRender: function (svg) {\n      if (svg.attributes.get('freesewing:plugin-mirror') === false)\n        svg.attributes.set('freesewing:plugin-mirror', version$7);\n    },\n  },\n  macros: {\n    mirror: function ({\n      mirror,\n      clone = true,\n      points = null,\n      paths = null,\n      prefix = 'mirrored',\n      nameFormat = undefined,\n    }) {\n      const [start, end] = mirror;\n      const mirrorPoint = mirrorGen(start, end);\n      const ops = ['from', 'to', 'cp1', 'cp2'];\n\n      if (paths !== null) {\n        paths.forEach((path, i) => {\n          // Try to find point name from path by looking in list of all points\n          let foundId = null;\n          for (let id of Object.keys(this.paths)) {\n            if (this.paths[id] === path) {\n              foundId = id;\n              break\n            }\n          }\n          path = clone ? path.clone() : path;\n          if (clone) {\n            if (foundId === null && typeof nameFormat == 'function') {\n              this.paths[nameFormat(path)] = path;\n            } else {\n              this.paths[`${prefix}${capFirst(foundId)}`] = path;\n            }\n          }\n          for (let op in path.ops) {\n            for (let type of ops) {\n              // Iterate over all possible path op points and clone/move point\n              const pathOp = path.ops[op][type];\n              if (typeof pathOp !== 'undefined') {\n[pathOp.x, pathOp.y] = mirrorPoint(pathOp);\n                pathOp.attributes.set('mirrored', true);\n              }\n            }\n          }\n        });\n      }\n\n      if (points !== null) {\n        points.forEach((point) => {\n          let foundId = null;\n          for (let id of Object.keys(this.points)) {\n            if (this.points[id] === point) {\n              foundId = id;\n              break\n            }\n          }\n          if (clone) {\n            point = point.clone();\n            if (foundId === null && typeof nameFormat == 'function') {\n              this.points[nameFormat(point)] = point;\n            } else {\n              this.points[`${prefix}${capFirst(foundId)}`] = point;\n            }\n          }\n[point.x, point.y] = mirrorPoint(point);\n          point.attributes.set('mirrored', true);\n        });\n      }\n    },\n  },\n};\n\n/**\n * @freesewing/plugin-notches | v2.17.0\n * A FreeSewing plugin that provides front and back notch snippets\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar name$6 = \"@freesewing/plugin-notches\";\nvar version$6 = \"2.17.0\";\n\nconst notches =\n  '<g id=\"notch\"><circle cy=\"0\" cx=\"0\" r=\"1.4\" class=\"fill-note\" /><circle cy=\"0\" cx=\"0\" r=\"2.8\" class=\"note\" /></g><g id=\"bnotch\"><path d=\"M -1.1 -1.1 L 1.1 1.1 M 1.1 -1.1 L -1.1 1.1\" class=\"note stroke-xl\" /><circle cy=\"0\" cx=\"0\" r=\"2.8\" class=\"note\" /></g>';\n\nvar index$6 = {\n  name: name$6,\n  version: version$6,\n  hooks: {\n    preRender: function (svg) {\n      if (svg.attributes.get('freesewing:plugin-notches') === false) {\n        svg.defs += notches;\n        svg.attributes.add('freesewing:plugin-notches', version$6);\n      }\n    },\n  },\n};\n\n/**\n * @freesewing/plugin-title | v2.17.0\n * A FreeSewing plugin to add a title to your pattern parts\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar style = `text.title-nr{font-size:24pt;font-weight:700;text-anchor:middle;dominant-baseline:reset-size}text.title-name{font-size:7pt;font-weight:500;text-anchor:middle;dominant-baseline:reset-size}text.title-pattern{font-size:4pt;font-weight:500;dominant-baseline:reset-size;text-anchor:middle;font-style:italic}`;\n\nvar name$5 = \"@freesewing/plugin-title\";\nvar version$5 = \"2.17.0\";\n\nvar index$5 = {\n  name: name$5,\n  version: version$5,\n  hooks: {\n    preRender: function (svg) {\n      if (svg.attributes.get('freesewing:plugin-title') === false) {\n        svg.attributes.set('freesewing:plugin-title', version$5);\n        svg.style += style;\n      }\n    },\n  },\n  macros: {\n    title: function (so) {\n      const transform = function (anchor) {\n        let cx = anchor.x - so.scale * anchor.x;\n        let cy = anchor.y - so.scale * anchor.y;\n\n        return `matrix(${so.scale}, 0, 0, ${so.scale}, ${cx}, ${cy}) rotate(${so.rotation} ${anchor.x} ${anchor.y})`\n      };\n      let defaults = {\n        scale: 1,\n        rotation: 0,\n      };\n      so = { ...defaults, ...so };\n      let overwrite = true;\n      if (so.append) overwrite = false;\n      let prefix = '';\n      if (so.prefix) prefix = so.prefix;\n      this.points[`_${prefix}_titleNr`] = so.at\n        .clone()\n        .attr('data-text', so.nr, overwrite)\n        .attr('data-text-class', 'title-nr note fill-note')\n        .attr('data-text-transform', transform(so.at));\n      let shift = 10;\n      if (so.title) {\n        this.points[`_${prefix}_titleName`] = so.at\n          .shift(-90 - so.rotation, 13 * so.scale)\n          .attr('data-text', so.title)\n          .attr('data-text-class', 'title-name')\n          .attr('data-text-transform', transform(so.at.shift(-90 - so.rotation, 13 * so.scale)));\n        shift += 10;\n      }\n      this.points[`_${prefix}_titlePattern`] = so.at\n        .shift(-90 - so.rotation, shift * so.scale)\n        .attr('data-text', this.context.config.name)\n        .attr('data-text', 'v' + this.context.config.version)\n        .attr('data-text-class', 'title-pattern fill-note')\n        .attr('data-text-transform', transform(so.at.shift(-90 - so.rotation, shift * so.scale)));\n      if (this.context.settings.metadata && this.context.settings.metadata.for) {\n        shift += 8;\n        this.points[`_${prefix}_titleFor`] = so.at\n          .shift(-90 - so.rotation, shift * so.scale)\n          .attr('data-text', '( ' + this.context.settings.metadata.for + ' )')\n          .attr('data-text-class', 'title-pattern')\n          .attr('data-text-transform', transform(so.at.shift(-90 - so.rotation, shift * so.scale)));\n      }\n      if (this.context.config.cut && this.context.config.cut[this.name]) {\n        shift += 8;\n        let cid = `_${prefix}_titleCut`;\n        let cut = this.context.config.cut[this.name];\n        this.points[cid] = so.at\n          .shift(-90 - so.rotation, shift * so.scale)\n          .attr('data-text', 'cut')\n          .attr('data-text-class', 'title-pattern')\n          .attr('data-text-transform', transform(so.at.shift(-90 - so.rotation, shift * so.scale)));\n        if (typeof cut === 'number') this.points[cid].attr('data-text', ` ${cut}x`);\n        else if (Array.isArray(cut)) {\n          cut = Array.from(cut); // Don't change the original array\n          this.points[cid].attr('data-text', ` ${cut.shift()}x`);\n          for (const txt of cut) this.points[cid].attr('data-text', txt);\n        }\n      }\n    },\n  },\n};\n\n/**\n * @freesewing/plugin-scalebox | v2.17.0\n * A FreeSewing plugin to add a scalebox to your pattern\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar name$4 = \"@freesewing/plugin-scalebox\";\nvar version$4 = \"2.17.0\";\n\nfunction scalebox (so) {\n  // Passing `false` will remove the scalebox\n  if (so === false) {\n    for (let id of [\n      '__scaleboxMetricTopLeft',\n      '__scaleboxMetricTopRight',\n      '__scaleboxMetricBottomRight',\n      '__scaleboxMetricBottomLeft',\n      '__scaleboxImperialTopLeft',\n      '__scaleboxImperialTopRight',\n      '__scaleboxImperialBottomRight',\n      '__scaleboxImperialBottomLeft',\n      '__scaleboxLead',\n      '__scaleboxTitle',\n      '__scaleboxText',\n      '__scaleboxLink',\n      '__scaleboxMetric',\n      '__scaleboxImperial',\n    ])\n      delete this.points[id];\n    for (let id of ['__scaleboxMetric', '__scaleboxImperial']) delete this.paths[id];\n    return true\n  }\n  // Box points\n  this.points.__scaleboxMetricTopLeft = new this.Point(so.at.x - 50, so.at.y - 25);\n  this.points.__scaleboxMetricTopRight = new this.Point(so.at.x + 50, so.at.y - 25);\n  this.points.__scaleboxMetricBottomLeft = new this.Point(so.at.x - 50, so.at.y + 25);\n  this.points.__scaleboxMetricBottomRight = new this.Point(so.at.x + 50, so.at.y + 25);\n  this.points.__scaleboxImperialTopLeft = new this.Point(so.at.x - 50.8, so.at.y - 25.4);\n  this.points.__scaleboxImperialTopRight = new this.Point(so.at.x + 50.8, so.at.y - 25.4);\n  this.points.__scaleboxImperialBottomLeft = new this.Point(so.at.x - 50.8, so.at.y + 25.4);\n  this.points.__scaleboxImperialBottomRight = new this.Point(so.at.x + 50.8, so.at.y + 25.4);\n  // Text anchor points\n  this.points.__scaleboxLead = new this.Point(so.at.x - 45, so.at.y - 15);\n  this.points.__scaleboxTitle = this.points.__scaleboxLead.shift(-90, 10);\n  this.points.__scaleboxText = this.points.__scaleboxTitle.shift(-90, 12);\n  this.points.__scaleboxLink = this.points.__scaleboxText.shift(-90, 5);\n  this.points.__scaleboxMetric = new this.Point(so.at.x, so.at.y + 20);\n  this.points.__scaleboxImperial = new this.Point(so.at.x, so.at.y + 24);\n  // Rotation\n  if (so.rotate) {\n    let points = [\n      '__scaleboxMetricTopLeft',\n      '__scaleboxMetricTopRight',\n      '__scaleboxMetricBottomLeft',\n      '__scaleboxMetricBottomRight',\n      '__scaleboxImperialTopLeft',\n      '__scaleboxImperialTopRight',\n      '__scaleboxImperialBottomLeft',\n      '__scaleboxImperialBottomRight',\n      '__scaleboxLead',\n      '__scaleboxTitle',\n      '__scaleboxText',\n      '__scaleboxLink',\n      '__scaleboxMetric',\n      '__scaleboxImperial',\n    ];\n    for (let pid of points) this.points[pid] = this.points[pid].rotate(so.rotate, so.at);\n    for (let pid of points.slice(8)) {\n      this.points[pid].attributes.set(\n        'data-text-transform',\n        `rotate(${so.rotate * -1}, ${this.points[pid].x}, ${this.points[pid].y})`\n      );\n    }\n  }\n  // Paths\n  this.paths.__scaleboxImperial = new this.Path()\n    .attr('class', 'scalebox imperial')\n    .move(this.points.__scaleboxImperialTopLeft)\n    .line(this.points.__scaleboxImperialBottomLeft)\n    .line(this.points.__scaleboxImperialBottomRight)\n    .line(this.points.__scaleboxImperialTopRight)\n    .close();\n  this.paths.__scaleboxMetric = new this.Path()\n    .attr('class', 'scalebox metric')\n    .move(this.points.__scaleboxMetricTopLeft)\n    .line(this.points.__scaleboxMetricBottomLeft)\n    .line(this.points.__scaleboxMetricBottomRight)\n    .line(this.points.__scaleboxMetricTopRight)\n    .close();\n  // Lead\n  this.points.__scaleboxLead = this.points.__scaleboxLead\n    .attr('data-text', so.lead || 'FreeSewing')\n    .attr('data-text-class', 'text-sm');\n  // Title\n  if (so.title) this.points.__scaleboxTitle.attributes.set('data-text', so.title);\n  else {\n    this.points.__scaleboxTitle = this.points.__scaleboxTitle\n      .attr('data-text', this.context.config.name)\n      .attr('data-text', 'v' + this.context.config.version);\n  }\n  this.points.__scaleboxTitle.attributes.add('data-text-class', 'text-lg');\n  // Text\n  if (typeof so.text === 'string') {\n    this.points.__scaleboxText.attr('data-text', so.text);\n  } else {\n    this.points.__scaleboxText.attr('data-text', 'supportFreesewingBecomeAPatron');\n    this.points.__scaleboxLink = this.points.__scaleboxLink\n      .attr('data-text', 'freesewing.org/patrons/join')\n      .attr('data-text-class', 'text-xs fill-note');\n  }\n  this.points.__scaleboxText.attr('data-text-class', 'text-xs').attr('data-text-lineheight', 4);\n  // Instructions\n  this.points.__scaleboxMetric = this.points.__scaleboxMetric\n    .attr('data-text', 'theWhiteInsideOfThisBoxShouldMeasure')\n    .attr('data-text', '10cm')\n    .attr('data-text', 'x')\n    .attr('data-text', '5cm')\n    .attr('data-text-class', 'text-xs center');\n  this.points.__scaleboxImperial = this.points.__scaleboxImperial\n    .attr('data-text', 'theBlackOutsideOfThisBoxShouldMeasure')\n    .attr('data-text', '4\"')\n    .attr('data-text', 'x')\n    .attr('data-text', '2\"')\n    .attr('data-text-class', 'text-xs center ');\n}\n\nfunction miniscale (so) {\n  // Passing `false` will remove the miniscale\n  if (so === false) {\n    for (let id of [\n      '__miniscaleMetricTopLeft',\n      '__miniscaleMetricTopRight',\n      '__miniscaleMetricBottomRight',\n      '__miniscaleMetricBottomLeft',\n      '__miniscaleImperialTopLeft',\n      '__miniscaleImperialTopRight',\n      '__miniscaleImperialBottomRight',\n      '__miniscaleImperialBottomLeft',\n      '__miniscaleMetric',\n      '__miniscaleImperial',\n    ])\n      delete this.points[id];\n    for (let id of ['__miniscaleMetric', '__miniscaleImperial']) delete this.paths[id];\n    return true\n  }\n  const m = 12.5;\n  const i = 12.7;\n  // Box points\n  this.points.__miniscaleMetricTopLeft = new this.Point(so.at.x - m, so.at.y - m);\n  this.points.__miniscaleMetricTopRight = new this.Point(so.at.x + m, so.at.y - m);\n  this.points.__miniscaleMetricBottomLeft = new this.Point(so.at.x - m, so.at.y + m);\n  this.points.__miniscaleMetricBottomRight = new this.Point(so.at.x + m, so.at.y + m);\n  this.points.__miniscaleImperialTopLeft = new this.Point(so.at.x - i, so.at.y - i);\n  this.points.__miniscaleImperialTopRight = new this.Point(so.at.x + i, so.at.y - i);\n  this.points.__miniscaleImperialBottomLeft = new this.Point(so.at.x - i, so.at.y + i);\n  this.points.__miniscaleImperialBottomRight = new this.Point(so.at.x + i, so.at.y + i);\n  // Text anchor points\n  this.points.__miniscaleMetric = new this.Point(so.at.x, so.at.y - 2);\n  this.points.__miniscaleImperial = new this.Point(so.at.x, so.at.y + 8);\n  // Rotation\n  if (so.rotate) {\n    let points = [\n      '__miniscaleMetricTopLeft',\n      '__miniscaleMetricTopRight',\n      '__miniscaleMetricBottomLeft',\n      '__miniscaleMetricBottomRight',\n      '__miniscaleImperialTopLeft',\n      '__miniscaleImperialTopRight',\n      '__miniscaleImperialBottomLeft',\n      '__miniscaleImperialBottomRight',\n      '__miniscaleMetric',\n      '__miniscaleImperial',\n    ];\n    for (let pid of points) this.points[pid] = this.points[pid].rotate(so.rotate, so.at);\n    for (let pid of points.slice(8)) {\n      this.points[pid].attributes.set(\n        'data-text-transform',\n        `rotate(${so.rotate * -1}, ${this.points[pid].x}, ${this.points[pid].y})`\n      );\n    }\n  }\n  // Paths\n  this.paths.__miniscaleImperial = new this.Path()\n    .attr('class', 'scalebox imperial')\n    .move(this.points.__miniscaleImperialTopLeft)\n    .line(this.points.__miniscaleImperialBottomLeft)\n    .line(this.points.__miniscaleImperialBottomRight)\n    .line(this.points.__miniscaleImperialTopRight)\n    .close();\n  this.paths.__miniscaleMetric = new this.Path()\n    .attr('class', 'scalebox metric')\n    .move(this.points.__miniscaleMetricTopLeft)\n    .line(this.points.__miniscaleMetricBottomLeft)\n    .line(this.points.__miniscaleMetricBottomRight)\n    .line(this.points.__miniscaleMetricTopRight)\n    .close();\n  // Text\n  this.points.__miniscaleMetric = this.points.__miniscaleMetric\n    .attr('data-text', '2.5cm x 2.5cm')\n    .attr('data-text-class', 'text-xs center');\n  this.points.__miniscaleImperial = this.points.__miniscaleImperial\n    .attr('data-text', '1\" x 1\"')\n    .attr('data-text-class', 'text-xs center ');\n}\n\nvar index$4 = {\n  name: name$4,\n  version: version$4,\n  hooks: {\n    preRender: function (svg) {\n      svg.attributes.set('freesewing:plugin-scalebox', version$4);\n    },\n  },\n  macros: { scalebox, miniscale },\n};\n\n/**\n * @freesewing/plugin-round | v2.17.0\n * A FreeSewing plugin to round corners\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar name$3 = \"@freesewing/plugin-round\";\nvar version$3 = \"2.17.0\";\n\nvar index$3 = {\n  name: name$3,\n  version: version$3,\n  hooks: {\n    preRender: function (svg) {\n      if (svg.attributes.get('freesewing:plugin-round') === false)\n        svg.attributes.set('freesewing:plugin-round', version$3);\n    },\n  },\n  macros: {\n    round: function (so) {\n      const C = 0.55191502449;\n      // Find angle between points\n      let from = so.from;\n      let to = so.to;\n      let via = so.via;\n      let radius = so.radius;\n      let prefix = so.prefix;\n      let angle1 = from.angle(via);\n      let angle2 = via.angle(to);\n      if ((Math.round(angle1) - Math.round(angle2)) % 90 !== 0)\n        console.log('Warning: The round macro only handles 90 degree angles correctly.');\n      let fd = from.dist(via);\n      let td = to.dist(via);\n      if (radius > fd || radius > td || typeof radius === 'undefined') radius = fd > td ? td : fd;\n      this.points[prefix + 'Start'] = via.shiftTowards(from, radius);\n      this.points[prefix + 'Cp1'] = via.shiftTowards(from, radius * (1 - C));\n      this.points[prefix + 'Cp2'] = via.shiftTowards(to, radius * (1 - C));\n      this.points[prefix + 'End'] = via.shiftTowards(to, radius);\n      this.paths[prefix + 'Rounded'] = new this.Path()\n        .move(this.points[prefix + 'Start'])\n        .curve(\n          this.points[prefix + 'Cp1'],\n          this.points[prefix + 'Cp2'],\n          this.points[prefix + 'End']\n        )\n        .attr('class', so.class ? so.class : '');\n      if (typeof so.render !== 'undefined' && so.render)\n        this.paths[prefix + 'Rounded'].render = true;\n      else this.paths[prefix + 'Rounded'].render = false;\n    },\n  },\n};\n\n/**\n * @freesewing/plugin-sprinkle | v2.17.0\n * A FreeSewing plugin to bulk-add snippets to your pattern\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar name$2 = \"@freesewing/plugin-sprinkle\";\nvar version$2 = \"2.17.0\";\n\nvar index$2 = {\n  name: name$2,\n  version: version$2,\n  hooks: {\n    preRender: function (svg) {\n      if (svg.attributes.get('freesewing:plugin-sprinkle') === false)\n        svg.attributes.set('freesewing:plugin-sprinkle', version$2);\n    },\n  },\n  macros: {\n    sprinkle: function (so) {\n      for (let pid of so.on)\n        this.snippets[pid + '-' + so.snippet] = new this.Snippet(so.snippet, this.points[pid]);\n    },\n  },\n};\n\n/**\n * @freesewing/plugin-measurements | v2.17.0\n * A FreeSewing plugin that adds additional measurements that can be calculated from existing ones\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar name$1 = \"@freesewing/plugin-measurements\";\nvar version$1 = \"2.17.0\";\n\nvar index$1 = {\n  name: name$1,\n  version: version$1,\n  hooks: {\n    preDraft: function ({ settings }) {\n      if (\n        typeof settings.measurements.seatBack !== 'undefined' &&\n        typeof settings.measurements.seat !== 'undefined'\n      ) {\n        settings.measurements.seatFront =\n          settings.measurements.seat - settings.measurements.seatBack;\n        settings.measurements.seatBackArc = settings.measurements.seatBack / 2;\n        settings.measurements.seatFrontArc = settings.measurements.seatFront / 2;\n      }\n      if (\n        typeof settings.measurements.waist !== 'undefined' &&\n        typeof settings.measurements.waistBack !== 'undefined'\n      ) {\n        settings.measurements.waistBackArc = settings.measurements.waistBack / 2;\n        settings.measurements.waistFrontArc =\n          (settings.measurements.waist - settings.measurements.waistBack) / 2;\n      }\n      if (\n        typeof settings.measurements.crossSeam !== 'undefined' &&\n        typeof settings.measurements.crossSeamFront !== 'undefined'\n      ) {\n        settings.measurements.crossSeamBack =\n          settings.measurements.crossSeam - settings.measurements.crossSeamFront;\n      }\n    },\n  },\n};\n\nvar name = \"@freesewing/plugin-bundle\";\nvar version = \"2.17.0\";\n\n/* eslint no-unused-expressions: \"warn\" */\n\nlet bundle = [\n  index$c,\n  index$b,\n  index$a,\n  index$9,\n  index$8,\n  index$7,\n  index$6,\n  index$5,\n  index$4,\n  index$3,\n  index$2,\n  index$1,\n];\n\nfunction bundleHooks() {\n  let hooks = {};\n  for (let plugin of bundle) {\n    for (let i in plugin.hooks) {\n      if (typeof hooks[i] === 'undefined') hooks[i] = [];\n      let hook = plugin.hooks[i];\n      if (typeof hook === 'function') hooks[i].push(hook);\n      else if (typeof hook === 'object') {\n        for (let method of hook) hooks[i].push(method);\n      }\n    }\n  }\n\n  return hooks\n}\n\nfunction bundleMacros() {\n  let macros = {};\n  for (let plugin of bundle) {\n    for (let i in plugin.macros) macros[i] = plugin.macros[i];\n  }\n\n  return macros\n}\n\nvar index = {\n  name: name,\n  version: version,\n  hooks: bundleHooks(),\n  macros: bundleMacros(),\n};\n\nexport default index;\n//# sourceMappingURL=index.mjs.map\n","/**\n * @freesewing/plugin-buttons | v2.17.0\n * A FreeSewing plugin that provides button, buttonhole, and snap snippets\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar button = '<g id=\"button\"><circle cx=\"0\" cy=\"0\" r=\"3.4\" style=\"stroke:#000000;fill:none;stroke-width:1;\"/><circle cx=\"-1\" cy=\"-1\" r=\"0.5\" style=\"stroke:none;fill:#000000;\"/><circle cx=\"1\" cy=\"-1\" r=\"0.5\" style=\"stroke:none;fill:#000000;\" /><circle cx=\"1\" cy=\"1\" r=\"0.5\" style=\"stroke:none;fill:#000000;\" /><circle cx=\"-1\" cy=\"1\" r=\"0.5\" style=\"stroke:none;fill:#000000;\" /></g>';\n\nvar buttonhole = '<g id=\"buttonhole\"><path style=\"fill:none;stroke:#000000;\" d=\"M -1,-5 L 1,-5 L 1,5 L -1,5 z\" /></g><g id=\"buttonhole-start\"><path style=\"fill:none;stroke:#000000;\" d=\"M -1,-10 L 1,-10 L 1,0 L -1,0 z\" /></g><g id=\"buttonhole-end\"><path style=\"fill:none;stroke:#000000;\" d=\"M -1,0 L 1,0 L 1,10 L -1,10 z\" /></g>';\n\nvar snaps = '<radialGradient id=\"snap-stud-grad\" cx=\"50%\" cy=\"50%\" r=\"50%\" fx=\"50%\" fy=\"50%\"><stop offset=\"30%\" style=\"stop-color:rgb(235,235,235); stop-opacity:1\"/><stop offset=\"80%\" style=\"stop-color:rgb(100,100,100);stop-opacity:1\" /></radialGradient><g id=\"snap-stud\" ><circle id=\"snap-stud-circle-edge\" cx=\"0\" cy=\"0\" r=\"3.4\" style=\"stroke:#666;fill:#dddddd;stroke-width:0.3;\" /><circle id=\"snap-stud-circle-middle\" cx=\"0\" cy=\"0\" r=\"1.8\" style=\"stroke:none;fill:url(#snap-stud-grad);\"/><path style=\"fill:none;stroke:#666; stroke-width:0.2;\" d=\"M -2,0 L -3,0 M 2,0 L 3,0 M 0,2 L 0,3 M 0,-2 L 0,-3 M 1.5,1.5 L 2.1,2.1 M -1.5,1.5 L -2.1,2.1 M -1.5,-1.5 L -2.1,-2.1 M 1.5,-1.5 L 2.1,-2.1\" id=\"snap-stud-lines\"/></g><g id=\"snap-socket\"><circle id=\"snap-socket-circle-edge\" cx=\"0\" cy=\"0\" r=\"3.4\" style=\"stroke:#666;fill:#bbbbbb;stroke-width:0.3;\"/><circle id=\"snap-socket-circle-middle\" cx=\"0\" cy=\"0\" r=\"2\" style=\"stroke:#666;fill:#dddddd; stroke-width:0.4;\"/><path style=\"fill:none;stroke:#666; stroke-width:0.5;\" d=\"M -1.7,-1 L -1.7,1 M 1.7,-1 L 1.7,1\" id=\"snap-socket-lines\" /></g>';\n\nvar name = \"@freesewing/plugin-buttons\";\nvar version = \"2.17.0\";\n\nvar index = {\n  name: name,\n  version: version,\n  hooks: {\n    preRender: function (svg) {\n      if (svg.attributes.get('freesewing:plugin-buttons') === false)\n        svg.attributes.set('freesewing:plugin-buttons', version);\n      svg.defs += button + buttonhole + snaps;\n    },\n  },\n};\n\nexport default index;\n//# sourceMappingURL=index.mjs.map\n","/**\n * @freesewing/legend | v2.17.0\n * A FreeSewing pattern to document pattern notation\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nimport freesewing from '@freesewing/core';\nimport plugins from '@freesewing/plugin-bundle';\nimport buttonsPlugin from '@freesewing/plugin-buttons';\n\nvar version = \"2.17.0\";\n\nvar config = {\n  name: 'legend',\n  version,\n  design: 'Joost De Cock',\n  code: 'Joost De Cock',\n  department: 'accessories',\n  type: 'pattern',\n  difficulty: 1,\n  tags: ['documentation'],\n  optionGroups: {\n    fit: ['fixme'],\n  },\n  measurements: [],\n  parts: [\n    'fabricLines',\n    'saLines',\n    'otherLines',\n    'sa',\n    'logo',\n    'notches',\n    'buttons',\n    'snaps',\n    'cutonfold',\n    'grainline',\n    'dimension',\n    'title',\n    'scalebox',\n    'lineWidths',\n    'lineStrokes',\n    'sizes',\n  ],\n  options: {\n    focus: '',\n    // Optiongroups are needed for now, because workbench\n    fixme: {\n      pct: 50,\n      min: 0,\n      max: 100,\n    },\n  },\n};\n\n/**\n * This draws a (diagonal in a) box\n * with with w and height h with a non-visible line.\n * This is to force our examples parts to a certain size\n */\nfunction box(part, w = 100, h = 50) {\n  part.paths.box = new part.Path()\n    .move(new part.Point(0, 0))\n    .line(new part.Point(w, h))\n    .attr('class', 'hidden');\n\n  return part\n}\n\nfunction drawLine(part, y, t) {\n  let { points, Point, paths, Path } = part.shorthand();\n  points[`${t}From`] = new Point(10, y);\n  points[`${t}To`] = new Point(110, y);\n  paths[t] = new Path()\n    .move(points[`${t}From`])\n    .line(points[`${t}To`])\n    .attr('class', t)\n    .attr('data-text', t)\n    .attr('data-text-class', 'center');\n\n  return part\n}\n\nconst fabricTypes = ['fabric', 'lining', 'canvas', 'interfacing', 'various'];\n\nconst lineTypes = ['note', 'mark', 'contrast', 'help'];\n\nconst lineWidths = [\n  'stroke-xs',\n  'stroke-sm',\n  'default',\n  'stroke-lg',\n  'stroke-xl',\n  'stroke-xxl',\n];\n\nconst lineStrokes = ['dotted', 'dashed', 'lashed'];\n\nvar draftFabricLines = (part) => {\n  let y = 10;\n  for (const t of fabricTypes) {\n    drawLine(part, y, t);\n    y += 15;\n  }\n\n  return box(part, 120, 65)\n};\n\nvar draftSaLines = (part) => {\n  let y = 10;\n  for (const t of fabricTypes) {\n    drawLine(part, y, t + ' sa');\n    y += 15;\n  }\n\n  return box(part, 120, 65)\n};\n\nvar draftOtherLines = (part) => {\n  let { points, Point, paths, Path } = part.shorthand();\n\n  const drawLine = (y, t) => {\n    points[`${t}From`] = new Point(10, y);\n    points[`${t}To`] = new Point(w, y);\n    paths[t] = new Path()\n      .move(points[`${t}From`])\n      .line(points[`${t}To`])\n      .attr('class', t)\n      .attr('data-text', t)\n      .attr('data-text-class', 'center');\n  };\n\n  let y = 10;\n  let w = 110;\n  for (const t of lineTypes) {\n    drawLine(y, t);\n    y += 15;\n  }\n\n  return box(part, 120, 65)\n};\n\nvar draftSa = (part) => {\n  const { points, Point, paths, Path } = part.shorthand();\n\n  points.a = new Point(10, 40);\n  points.aCp = new Point(40, 40);\n  points.b = new Point(69.5, 10);\n  points.c = new Point(110, 50);\n\n  paths.a = new Path()\n    .move(points.a)\n    .curve_(points.aCp, points.b)\n    .line(points.c)\n    .attr('class', 'fabric')\n    .attr('data-text', 'seam');\n\n  paths.sa = paths.a.offset(-10).attr('class', 'fabric sa').attr('data-text', 'seamAllowance');\n\n  return box(part, 120, 60)\n};\n\nvar draftNotches = (part) => {\n  const { points, Point, snippets, Snippet } = part.shorthand();\n\n  points.a = new Point(30, 10);\n  points.atxt = new Point(30, 20).attr('data-text', 'notch').attr('data-text-class', 'center');\n  snippets.a = new Snippet('notch', points.a);\n\n  points.b = new Point(80, 10);\n  points.btxt = new Point(80, 20).attr('data-text', 'bnotch').attr('data-text-class', 'center');\n  snippets.b = new Snippet('bnotch', points.b);\n\n  return box(part, 120, 30)\n};\n\nvar draftButtons = (part) => {\n  const { points, Point, snippets, Snippet } = part.shorthand();\n\n  points.a = new Point(30, 10);\n  points.atxt = new Point(30, 20).attr('data-text', 'button').attr('data-text-class', 'center');\n  snippets.a = new Snippet('button', points.a);\n\n  points.b = new Point(80, 10);\n  points.btxt = new Point(80, 20).attr('data-text', 'buttonhole').attr('data-text-class', 'center');\n  snippets.b = new Snippet('buttonhole', points.b).attr('data-rotate', 90);\n\n  return box(part, 120, 30)\n};\n\nvar draftSnaps = (part) => {\n  const { points, Point, snippets, Snippet } = part.shorthand();\n\n  points.a = new Point(30, 10);\n  points.atxt = new Point(30, 20).attr('data-text', 'snap-stud').attr('data-text-class', 'center');\n  snippets.a = new Snippet('snap-stud', points.a);\n\n  points.b = new Point(80, 10);\n  points.btxt = new Point(80, 20).attr('data-text', 'snap-socket').attr('data-text-class', 'center');\n  snippets.b = new Snippet('snap-socket', points.b).attr('data-rotate', 90);\n\n  return box(part, 120, 30)\n};\n\nvar draftLogo = (part) => {\n  const { points, Point, snippets, Snippet } = part.shorthand();\n\n  points.a = new Point(50, 40);\n  points.atxt = new Point(30, 20).attr('data-text', 'logo').attr('data-text-class', 'center');\n  snippets.a = new Snippet('logo', points.a);\n\n  return box(part, 100, 60)\n};\n\nvar draftCutonfold = (part) => {\n  const { points, Point, macro } = part.shorthand();\n\n  points.a = new Point(10, 20);\n  points.b = new Point(90, 20);\n\n  macro('cutonfold', {\n    from: points.a,\n    to: points.b,\n  });\n\n  return box(part, 100, 25)\n};\n\nvar draftGrainline = (part) => {\n  const { points, Point, macro } = part.shorthand();\n\n  points.a = new Point(10, 20);\n  points.b = new Point(90, 20);\n\n  macro('grainline', {\n    from: points.a,\n    to: points.b,\n  });\n\n  return box(part, 100, 25)\n};\n\nvar draftDimension = (part) => {\n  const { points, Point, macro } = part.shorthand();\n\n  points.a = new Point(10, 20);\n  points.b = new Point(90, 20);\n\n  macro('ld', {\n    from: points.a,\n    to: points.b,\n  });\n\n  return box(part, 100, 25)\n};\n\nvar draftTitle = (part) => {\n  const { points, Point, macro } = part.shorthand();\n\n  points.a = new Point(30, 30);\n\n  macro('title', {\n    at: points.a,\n    nr: 1,\n    title: 'Part name',\n  });\n\n  return box(part, 100, 65)\n};\n\nvar draftScalebox = (part) => {\n  const { points, Point, macro } = part.shorthand();\n\n  points.a = new Point(55, 25);\n  macro('scalebox', { at: points.a });\n\n  return box(part, 110, 55)\n};\n\nvar draftLineWidths = (part) => {\n  let y = 10;\n  for (const t of lineWidths) {\n    drawLine(part, y, t);\n    y += 15;\n  }\n\n  return box(part, 120, 95)\n};\n\nvar draftLineStrokes = (part) => {\n  let y = 10;\n  for (const t of lineStrokes) {\n    drawLine(part, y, t);\n    y += 15;\n  }\n\n  return box(part, 120, 50)\n};\n\nvar draftSizes = (part) => {\n  const { points, Point, paths, Path } = part.shorthand();\n\n  points.xxxs1 = new Point(0, 10);\n  points.xxxs2 = new Point(10, 10);\n  paths.xxxs = new Path()\n    .move(points.xxxs1)\n    .line(points.xxxs2)\n    .attr('class', 'size-3XS')\n    .attr('data-text', '3XS')\n    .attr('data-text-class', 'center text-xs');\n\n  points.xxs1 = new Point(12, 10);\n  points.xxs2 = new Point(22, 10);\n  paths.xxs = new Path()\n    .move(points.xxs1)\n    .line(points.xxs2)\n    .attr('class', 'size-2XS')\n    .attr('data-text', '2XS')\n    .attr('data-text-class', 'center text-xs');\n\n  points.xs1 = new Point(24, 10);\n  points.xs2 = new Point(34, 10);\n  paths.xs = new Path()\n    .move(points.xs1)\n    .line(points.xs2)\n    .attr('class', 'size-XS')\n    .attr('data-text', 'XS')\n    .attr('data-text-class', 'center text-xs');\n\n  points.s1 = new Point(36, 10);\n  points.s2 = new Point(46, 10);\n  paths.s = new Path()\n    .move(points.s1)\n    .line(points.s2)\n    .attr('class', 'size-S')\n    .attr('data-text', 'S')\n    .attr('data-text-class', 'center text-xs');\n\n  points.m1 = new Point(48, 10);\n  points.m2 = new Point(58, 10);\n  paths.m = new Path()\n    .move(points.m1)\n    .line(points.m2)\n    .attr('class', 'size-M')\n    .attr('data-text', 'M')\n    .attr('data-text-class', 'center text-xs');\n\n  points.l1 = new Point(60, 10);\n  points.l2 = new Point(70, 10);\n  paths.l = new Path()\n    .move(points.l1)\n    .line(points.l2)\n    .attr('class', 'size-L')\n    .attr('data-text', 'L')\n    .attr('data-text-class', 'center text-xs');\n\n  points.xl1 = new Point(72, 10);\n  points.xl2 = new Point(82, 10);\n  paths.xl = new Path()\n    .move(points.xl1)\n    .line(points.xl2)\n    .attr('class', 'size-XL')\n    .attr('data-text', 'XL')\n    .attr('data-text-class', 'center text-xs');\n\n  points.xxl1 = new Point(84, 10);\n  points.xxl2 = new Point(96, 10);\n  paths.xxl = new Path()\n    .move(points.xxl1)\n    .line(points.xxl2)\n    .attr('class', 'size-2XL')\n    .attr('data-text', '2XL')\n    .attr('data-text-class', 'center text-xs');\n\n  points.xxxl1 = new Point(98, 10);\n  points.xxxl2 = new Point(108, 10);\n  paths.xxxl = new Path()\n    .move(points.xxxl1)\n    .line(points.xxxl2)\n    .attr('class', 'size-3XL')\n    .attr('data-text', '3XL')\n    .attr('data-text-class', 'center text-xs');\n\n  points.xxxxl1 = new Point(110, 10);\n  points.xxxxl2 = new Point(120, 10);\n  paths.xxxxl = new Path()\n    .move(points.xxxxl1)\n    .line(points.xxxxl2)\n    .attr('class', 'size-4XL')\n    .attr('data-text', '4XL')\n    .attr('data-text-class', 'center text-xs');\n\n  points.m2m1 = new Point(0, 17);\n  points.m2m2 = new Point(120, 17);\n  paths.m2m = new Path()\n    .move(points.m2m1)\n    .line(points.m2m2)\n    .attr('class', 'made-to-measure')\n    .attr('data-text', 'madeToMeasure')\n    .attr('data-text-class', 'center text-xs');\n\n  return box(part, 120, 20)\n};\n\n// Create design\nconst Pattern = new freesewing.Design(config, [plugins, buttonsPlugin]);\n\n// Attach draft methods to prototype\nlet methods = {\n  draftFabricLines,\n  draftSaLines,\n  draftOtherLines,\n  draftSa,\n  draftLogo,\n  draftButtons,\n  draftSnaps,\n  draftNotches,\n  draftCutonfold,\n  draftGrainline,\n  draftDimension,\n  draftTitle,\n  draftScalebox,\n  draftLineWidths,\n  draftLineStrokes,\n  draftSizes,\n};\n\nfor (let m of Object.keys(methods)) Pattern.prototype[m] = methods[m];\n\nexport default Pattern;\n//# sourceMappingURL=index.mjs.map\n","import React from 'react'\n\nconst Svg = ({\n  embed = true,\n  design = false,\n  language = 'en',\n  className = 'freesewing draft',\n  style = {},\n  viewBox = false,\n  width,\n  height,\n  children\n}) => {\n  let attributes = {\n    xmlns: 'http://www.w3.org/2000/svg',\n    'xmlns:svg': 'http://www.w3.org/2000/svg',\n    xmlnsXlink: 'http://www.w3.org/1999/xlink',\n    xmlLang: language,\n    viewBox: viewBox || `0 0 ${width} ${height}`,\n    className,\n    style\n  }\n\n  if (!embed) {\n    attributes.width = width + 'mm'\n    attributes.height = height + 'mm'\n  }\n  if (design) attributes.className += ' design'\n\n  return <svg {...attributes}>{children}</svg>\n}\n\nexport default Svg\n","import React from 'react'\n\nconst style = ` style=\"fill: none; stroke: currentColor;\" `\nconst grids = {\n  imperial: `\n      <pattern id=\"grid\" height=\"25.4\" width=\"25.4\" patternUnits=\"userSpaceOnUse\" key=\"grid\">\n        <path class=\"gridline lg imperial\" d=\"M 0 0 L 0 25.4 L 25.4 25.4\" ${style} />\n        <path\n          class=\"gridline lg imperial\"\n          d=\"M 12.7 0 L 12.7 25.4 M 0 12.7 L 25.4 12.7\"\n          ${style}\n        />\n        <path\n          class=\"gridline sm imperial\"\n          d=\"M 3.175 0 L 3.175 25.4 M 6.32 0 L 6.35 25.4 M 9.525 0 L 9.525 25.4 M 15.875 0 L 15.875 25.4 M 19.05 0 L 19.05 25.4 M 22.225 0 L 22.225 25.4\"\n          ${style}\n        />\n        <path\n          class=\"gridline sm imperial\"\n          d=\"M 0 3.175 L 25.4 3.175 M 0 6.32 L 25.4 6.35 M 0 9.525 L 25.4 9.525 M 0 15.875 L 25.4 15.875 M 0 19.05 L 25.4 19.05 M 0 22.225 L 25.4 22.225\"\n          ${style}\n        />\n      </pattern>\n      `,\n  metric: `\n      <pattern id=\"grid\" height=\"100\" width=\"100\" patternUnits=\"userSpaceOnUse\" key=\"grid\">\n        <path class=\"gridline lg metric\" d=\"M 0 0 L 0 100 L 100 100\" ${style} />\n        <path class=\"gridline metric\" d=\"M 50 0 L 50 100 M 0 50 L 100 50\" ${style} />\n        <path\n          class=\"gridline sm metric\"\n          d=\"M 10 0 L 10 100 M 20 0 L 20 100 M 30 0 L 30 100 M 40 0 L 40 100 M 60 0 L 60 100 M 70 0 L 70 100 M 80 0 L 80 100 M 90 0 L 90 100\"\n          ${style}\n        />\n        <path\n          class=\"gridline sm metric\"\n          d=\"M 0 10 L 100 10 M 0 20 L 100 20 M 0 30 L 100 30 M 0 40 L 100 40 M 0 60 L 100 60 M 0 70 L 100 70 M 0 80 L 100 80 M 0 90 L 100 90\"\n          ${style}\n        />\n        <path\n          class=\"gridline xs metric\"\n          d=\"M 5 0 L 5 100 M 15 0 L 15 100 M 25 0 L 25 100 M 35 0 L 35 100 M 45 0 L 45 100 M 55 0 L 55 100 M 65 0 L 65 100 M 75 0 L 75 100 M 85 0 L 85 100 M 95 0 L 95 100\"\n          ${style}\n        />\n        <path\n          class=\"gridline xs metric\"\n          d=\"M 0 5 L 100 5 M 0 15 L 100 15 M 0 25 L 100 25 M 0 35 L 100 35 M 0 45 L 100 45 M 0 55 L 100 55 M 0 65 L 100 65 M 0 75 L 100 75 M 0 85 L 100 85 M 0 95 L 100 95\"\n          ${style}\n        />\n      </pattern>\n  `\n}\n\nconst Defs = (props) => {\n  let defs = props.svg.defs\n  if (props.settings.paperless) {\n    defs += grids[props.settings.units || 'metric']\n    for (let p in props.parts) {\n      let anchor = { x: 0, y: 0 }\n      if (typeof props.parts[p].points.gridAnchor !== 'undefined')\n        anchor = props.parts[p].points.gridAnchor\n      else if (typeof props.parts[p].points.anchor !== 'undefined')\n        anchor = props.parts[p].points.anchor\n\n      defs += `<pattern id=\"grid-${p}\" key=\"grid-${p}\" xlink:href=\"#grid\" x=\"${anchor.x}\" y=\"${anchor.y}\" />`\n    }\n  }\n\n  return <defs dangerouslySetInnerHTML={{ __html: defs }} />\n}\n\nexport default Defs\n","import React from 'react'\nimport { strings } from '@freesewing/i18n'\n\nconst TextOnPath = (props) => {\n  let text = []\n  // Handle translation\n  let translated = ''\n  for (let string of props.path.attributes.getAsArray('data-text')) {\n    if (strings[props.language]['plugin.' + string])\n      translated += strings[props.language]['plugin.' + string]\n    else translated += string.toString().replace(/&quot;/g, '\"')\n    translated += ' '\n  }\n  let textPathProps = {\n    xlinkHref: '#' + props.pathId,\n    startOffset: '0%'\n  }\n  let align = props.path.attributes.get('data-text-class')\n  if (align && align.indexOf('center') > -1) textPathProps.startOffset = '50%'\n  else if (align && align.indexOf('right') > -1) textPathProps.startOffset = '100%'\n\n  return (\n    <text>\n      <textPath {...textPathProps}>\n        <tspan {...props.path.attributes.asPropsIfPrefixIs('data-text-')}>{translated}</tspan>\n      </textPath>\n    </text>\n  )\n}\n\nexport default TextOnPath\n","import React from 'react'\n\nconst DesignPath = (props) => {\n  let output = []\n  let i = 0\n  let from = null\n  for (let op of props.path.ops) {\n    let key = props.part + props.name + i\n    if (op.type === 'curve') {\n      output.push(\n        <path\n          key={key + 'cp1'}\n          d={`M ${from.x},${from.y} L ${op.cp1.x},${op.cp1.y}`}\n          className=\"design path cp\"\n        />\n      )\n      i++\n      output.push(\n        <path\n          key={key + 'cp2'}\n          d={`M ${op.to.x},${op.to.y} L ${op.cp2.x},${op.cp2.y}`}\n          className=\"design path cp\"\n        />\n      )\n      i++\n      output.push(\n        <circle\n          key={key + 'cpcirc1'}\n          cx={op.cp1.x}\n          cy={op.cp1.y}\n          r={3.5}\n          className=\"design path cp\"\n        />\n      )\n      i++\n      output.push(\n        <circle\n          key={key + 'cpcirc2'}\n          cx={op.cp2.x}\n          cy={op.cp2.y}\n          r={3.5}\n          className=\"design path cp\"\n        />\n      )\n      from = op.to\n    } else if (op.type !== 'close') from = op.to\n  }\n  output.push(\n    <path\n      key={props.part + props.name + 'dpath'}\n      d={props.path.asPathstring()}\n      onClick={() =>\n        props.raiseEvent('path', {\n          path: props.path,\n          name: props.name,\n          part: props.part\n        })\n      }\n      className=\"design hovertrap\"\n    />\n  )\n  return output\n}\n\nexport default DesignPath\n","export const getProps = (obj) => {\n  /** I can't believe it but there seems to be no method on NPM todo this */\n  const cssKey = (key) => {\n    let chunks = key.split('-')\n    if (chunks.length > 1) {\n      key = chunks.shift()\n      for (let s of chunks) key += s.charAt(0).toUpperCase() + s.slice(1)\n    }\n\n    return key\n  }\n\n  const convert = (css) => {\n    let style = {}\n    let rules = css.split(';')\n    for (let rule of rules) {\n      let chunks = rule.split(':')\n      if (chunks.length === 2) style[cssKey(chunks[0].trim())] = chunks[1].trim()\n    }\n    return style\n  }\n\n  let rename = {\n    class: 'className',\n    'marker-start': 'markerStart',\n    'marker-end': 'markerEnd'\n  }\n  let props = {}\n  for (let key in obj.attributes.list) {\n    if (key === 'style') props[key] = convert(obj.attributes.get(key))\n    if (Object.keys(rename).indexOf(key) !== -1) props[rename[key]] = obj.attributes.get(key)\n    else if (key !== 'style') props[key] = obj.attributes.get(key)\n  }\n\n  return props\n}\n","import React from 'react'\nimport TextOnPath from '../TextOnPath'\nimport DesignPath from '../DesignPath'\nimport { getProps } from '../utils'\n\nconst Path = (props) => {\n  if (!props.path.render) return null\n  const output = []\n  const pathId = 'path-' + props.part + '-' + props.name\n  if (props.design) output.push(<DesignPath {...props} key={'dpa-' + props.name} />)\n  output.push(\n    <path id={pathId} key={pathId} d={props.path.asPathstring()} {...getProps(props.path)} />\n  )\n  if (props.path.attributes.get('data-text'))\n    output.push(<TextOnPath key={'text-on-path-' + props.name} pathId={pathId} {...props} />)\n\n  return output\n}\n\nexport default Path\n","import React from 'react'\n\nconst DesignPoint = (props) => (\n  <g className={props.className}>\n    <circle cx={props.point.x} cy={props.point.y} r=\"2\" className=\"center\" />\n    <circle\n      cx={props.point.x}\n      cy={props.point.y}\n      r=\"7.5\"\n      className=\"hovertrap\"\n      onClick={() =>\n        props.raiseEvent('point', {\n          point: props.point,\n          name: props.name,\n          part: props.part\n        })\n      }\n    />\n  </g>\n)\n\nexport default DesignPoint\n","import React from 'react'\nimport { strings } from '@freesewing/i18n'\n\nconst Text = (props) => {\n  let text = []\n  // Handle translation\n  let translated = ''\n  for (let string of props.point.attributes.getAsArray('data-text')) {\n    if (strings[props.language]['plugin.' + string])\n      translated += strings[props.language]['plugin.' + string]\n    else translated += string.toString().replace(/&quot;/g, '\"')\n    translated += ' '\n  }\n  // Handle muti-line text\n  if (translated.indexOf('\\n') !== -1) {\n    let key = 0\n    let lines = translated.split('\\n')\n    text.push(<tspan key={'tspan-' + key}>{lines.shift()}</tspan>)\n    for (let line of lines) {\n      key++\n      text.push(\n        <tspan\n          key={'tspan-' + key}\n          x={props.point.x}\n          dy={props.point.attributes.get('data-text-lineheight') || 12}\n        >\n          {line.toString().replace(/&quot;/g, '\"')}\n        </tspan>\n      )\n    }\n  } else text.push(<tspan key=\"tspan-1\">{translated}</tspan>)\n\n  return (\n    <text\n      x={props.point.x}\n      y={props.point.y}\n      {...props.point.attributes.asPropsIfPrefixIs('data-text-')}\n    >\n      {text}\n    </text>\n  )\n}\n\nexport default Text\n","import React from 'react'\n\nconst Circle = (props) => (\n  <circle\n    cx={props.point.x}\n    cy={props.point.y}\n    r={props.point.attributes.get('data-circle')}\n    {...props.point.attributes.asPropsIfPrefixIs('data-circle-')}\n  />\n)\n\nexport default Circle\n","import React from 'react'\nimport DesignPoint from '../DesignPoint'\nimport Text from '../Text'\nimport Circle from '../Circle'\n\nconst Point = (props) => {\n  const output = []\n  if (props.design)\n    output.push(<DesignPoint {...props} key={'dp-' + props.name} className=\"design point\" />)\n  if (props.point.attributes && props.point.attributes.get('data-text'))\n    output.push(<Text {...props} key={'point-' + props.name} />)\n  if (props.point.attributes && props.point.attributes.get('data-circle'))\n    output.push(<Circle point={props.point} key={'circle-' + props.name} />)\n\n  return output.length < 1 ? null : output\n}\n\nexport default Point\n","import React from 'react'\nimport { getProps } from '../utils'\n\nconst Snippet = (props) => {\n  const snippetProps = {\n    xlinkHref: '#' + props.snippet.def,\n    x: props.snippet.anchor.x,\n    y: props.snippet.anchor.y\n  }\n  let scale = props.snippet.attributes.get('data-scale')\n  let rotate = props.snippet.attributes.get('data-rotate')\n  if (scale || rotate) {\n    snippetProps.transform = ''\n    if (scale) {\n      snippetProps.transform += `translate(${snippetProps.x}, ${snippetProps.y}) `\n      snippetProps.transform += `scale(${scale}) `\n      snippetProps.transform += `translate(${snippetProps.x * -1}, ${snippetProps.y * -1}) `\n    }\n    if (rotate) {\n      snippetProps.transform += `rotate(${rotate}, ${snippetProps.x}, ${snippetProps.y}) `\n    }\n  }\n\n  return <use {...snippetProps} {...getProps(props.snippet)} />\n}\n\nexport default Snippet\n","import React from 'react'\nimport Path from '../Path'\nimport Point from '../Point'\nimport Snippet from '../Snippet'\nimport { getProps } from '../utils'\n\nconst Part = (props) => {\n  const focusPoint = (point, i) => {\n    let p = props.part.points[point]\n    let pathString = `M ${p.x} ${props.part.topLeft.y} `\n    pathString += `L ${p.x} ${props.part.bottomRight.y} `\n    pathString += `M ${props.part.topLeft.x} ${p.y} `\n    pathString += `L ${props.part.bottomRight.x} ${p.y} `\n    let classes = 'focus point c' + (i % 4) // Cycle through 4 CSS classes\n    return (\n      <React.Fragment key={'fp' + point}>\n        <path d={pathString} className={classes} />\n        <circle\n          cx={p.x}\n          cy={p.y}\n          r=\"5\"\n          className={classes}\n          onClick={() =>\n            props.raiseEvent('clearFocus', {\n              part: props.name,\n              type: 'points',\n              name: point\n            })\n          }\n        />\n      </React.Fragment>\n    )\n  }\n\n  const focusCoords = (p, i) => {\n    let pathString = `M ${p.x} ${props.part.topLeft.y} `\n    pathString += `L ${p.x} ${props.part.bottomRight.y} `\n    pathString += `M ${props.part.topLeft.x} ${p.y} `\n    pathString += `L ${props.part.bottomRight.x} ${p.y} `\n    let classes = 'focus coords c' + (i % 4) // Cycle through 4 CSS classes\n    return (\n      <React.Fragment key={'cp' + i}>\n        <path d={pathString} className={classes} />\n        <circle\n          cx={p.x}\n          cy={p.y}\n          r=\"5\"\n          className={classes}\n          onClick={() =>\n            props.raiseEvent('clearFocus', {\n              part: props.name,\n              type: 'coords',\n              data: p\n            })\n          }\n        />\n      </React.Fragment>\n    )\n  }\n\n  let grid = props.paperless ? (\n    <rect\n      x={props.part.topLeft.x}\n      y={props.part.topLeft.y}\n      width={props.part.width}\n      height={props.part.height}\n      className=\"grid\"\n      fill={'url(#grid-' + props.name + ')'}\n    />\n  ) : null\n\n  let focus = []\n  if (props.design) {\n    if (props.focus && typeof props.focus[props.name] !== 'undefined') {\n      for (let i in props.focus[props.name].points)\n        focus.push(focusPoint(props.focus[props.name].points[i], i))\n      for (let i in props.focus[props.name].paths) {\n        let name = props.focus[props.name].paths[i]\n        focus.push(\n          <path\n            key={'fpa-' + name}\n            d={props.part.paths[name].asPathstring()}\n            className={'focus path c' + (i % 4)}\n            onClick={() =>\n              props.raiseEvent('clearFocus', {\n                part: props.name,\n                type: 'paths',\n                name\n              })\n            }\n          />\n        )\n      }\n      for (let i in props.focus[props.name].coords)\n        focus.push(focusCoords(props.focus[props.name].coords[i], i))\n    }\n  }\n\n  return (\n    <g {...getProps(props.part)} id={`part-${props.name}`}>\n      {grid}\n      {Object.keys(props.part.paths).map((name) => (\n        <Path\n          key={name}\n          name={name}\n          part={props.name}\n          language={props.language}\n          path={props.part.paths[name]}\n          focus={props.focus}\n          topLeft={props.part.topLeft}\n          bottomRight={props.part.bottomRight}\n          design={props.design}\n          raiseEvent={props.raiseEvent}\n        />\n      ))}\n      {Object.keys(props.part.points).map((name) => (\n        <Point\n          key={name}\n          name={name}\n          part={props.name}\n          language={props.language}\n          point={props.part.points[name]}\n          focus={props.focus}\n          topLeft={props.part.topLeft}\n          bottomRight={props.part.bottomRight}\n          design={props.design}\n          raiseEvent={props.raiseEvent}\n        />\n      ))}\n      {Object.keys(props.part.snippets).map((name) => (\n        <Snippet key={name} name={name} snippet={props.part.snippets[name]} />\n      ))}\n      {focus}\n    </g>\n  )\n}\n\nexport default Part\n","import React from 'react'\nimport Svg from './Svg'\nimport Defs from './Defs'\nimport Part from './Part'\n\nconst Draft = (props) => (\n  <Svg\n    embed={props.settings.embed}\n    width={props.width}\n    height={props.height}\n    language={props.settings.locale}\n    id={props.settings.idPrefix + 'svg'}\n    design={props.design || false}\n    style={props.style || {}}\n    viewBox={props.viewBox}\n    className={props.className || 'freesewing draft'}\n  >\n    <Defs {...props} />\n    <g>\n      {Object.keys(props.parts).map((name) => (\n        <Part\n          part={props.parts[name]}\n          language={props.settings.locale}\n          paperless={props.settings.paperless}\n          units={props.settings.units}\n          key={name}\n          name={name}\n          focus={props.focus || false}\n          design={props.design || false}\n          raiseEvent={props.raiseEvent}\n        />\n      ))}\n    </g>\n  </Svg>\n)\n\nexport default Draft\n","import React from 'react'\nimport LegendPattern from '@freesewing/legend'\nimport Draft from '../Draft'\n\nconst Legend = ({ caption = false, part = '', children=null }) => {\n  const patternProps = new LegendPattern({\n    only: part,\n    measurements: {\n      head: 370\n    }\n  })\n    .draft()\n    .getRenderProps()\n\n  if (caption) console.log('Passing the caption prop to @freesewing/components/Legend is deprecated. See: https://github.com/freesewing/freesewing/issues/1043')\n\n  return (\n    <figure>\n      <div className=\"shadow\">\n        <Draft {...patternProps} />\n      </div>\n      <figcaption>{caption || children}</figcaption>\n    </figure>\n  )\n}\n\nexport default Legend\n"],"names":["button","buttonhole","snaps","name","version","index","Svg","embed","design","language","className","style","viewBox","width","height","children","attributes","xmlns","xmlnsXlink","xmlLang","React","grids","imperial","metric","Defs","props","defs","svg","settings","paperless","units","p","parts","anchor","x","y","points","gridAnchor","__html","TextOnPath","translated","path","getAsArray","string","strings","toString","replace","textPathProps","xlinkHref","pathId","startOffset","align","get","indexOf","asPropsIfPrefixIs","DesignPath","output","i","from","ops","op","key","part","type","push","cp1","to","cp2","asPathstring","raiseEvent","getProps","obj","cssKey","chunks","split","length","shift","s","charAt","toUpperCase","slice","convert","css","rules","rule","trim","rename","list","Object","keys","Path","render","DesignPoint","point","Text","text","lines","line","Circle","Point","Snippet","snippetProps","snippet","def","scale","rotate","transform","Part","focusPoint","pathString","topLeft","bottomRight","classes","focusCoords","data","grid","focus","paths","coords","map","snippets","Draft","locale","idPrefix","Legend","caption","patternProps","LegendPattern","only","measurements","head","draft","getRenderProps","console","log"],"mappings":"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"}