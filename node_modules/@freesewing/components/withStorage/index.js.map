{"version":3,"file":"index.js","sources":["../src/withStorage/index.js"],"sourcesContent":["import React from \"react\";\nimport storage from \"@freesewing/utils/storage\";\n\nconst withStorage = (WrappedComponent, name) => {\n  return class extends React.Component {\n    constructor(props) {\n      super(props);\n      this.setStorageData = this.setStorageData.bind(this);\n      this.updateStorageData = this.updateStorageData.bind(this);\n      this.state = { data: storage.get(name) || {} };\n    }\n\n    setStorageData(data) {\n      storage.set(name, data);\n    }\n\n    updateStorageData(value, l1 = false, l2 = false, l3 = false) {\n      if (!l1) return;\n      let data = this.state.data;\n\n      if (l2 && typeof data[l1] === \"undefined\") data[l1] = {};\n      if (l3 && typeof data[l1][l2] === \"undefined\") data[l1][l2] = {};\n\n      if (l3) data[l1][l2][l3] = value;\n      else if (l2) data[l1][l2] = value;\n      else data[l1] = value;\n      this.setState({ data });\n      storage.set(name, data);\n    }\n\n    render() {\n      return (\n        <WrappedComponent\n          storageData={this.state.data}\n          updateStorageData={this.updateStorageData}\n          {...this.props}\n        />\n      );\n    }\n  };\n};\n\nexport default withStorage;\n"],"names":["withStorage","WrappedComponent","name","props","setStorageData","bind","updateStorageData","state","data","storage","get","set","value","l1","l2","l3","setState","React","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAGMA,WAAW,GAAG,SAAdA,WAAc,CAACC,gBAAD,EAAmBC,IAAnB,EAA4B;AAC9C;AAAA;;AAAA;;AACE,oBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,gCAAMA,KAAN;AACA,YAAKC,cAAL,GAAsB,MAAKA,cAAL,CAAoBC,IAApB,+BAAtB;AACA,YAAKC,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBD,IAAvB,+BAAzB;AACA,YAAKE,KAAL,GAAa;AAAEC,QAAAA,IAAI,EAAEC,2BAAO,CAACC,GAAR,CAAYR,IAAZ,KAAqB;AAA7B,OAAb;AAJiB;AAKlB;;AANH;AAAA;AAAA,aAQE,wBAAeM,IAAf,EAAqB;AACnBC,QAAAA,2BAAO,CAACE,GAAR,CAAYT,IAAZ,EAAkBM,IAAlB;AACD;AAVH;AAAA;AAAA,aAYE,2BAAkBI,KAAlB,EAA6D;AAAA,YAApCC,EAAoC,uEAA/B,KAA+B;AAAA,YAAxBC,EAAwB,uEAAnB,KAAmB;AAAA,YAAZC,EAAY,uEAAP,KAAO;AAC3D,YAAI,CAACF,EAAL,EAAS;AACT,YAAIL,IAAI,GAAG,KAAKD,KAAL,CAAWC,IAAtB;AAEA,YAAIM,EAAE,IAAI,OAAON,IAAI,CAACK,EAAD,CAAX,KAAoB,WAA9B,EAA2CL,IAAI,CAACK,EAAD,CAAJ,GAAW,EAAX;AAC3C,YAAIE,EAAE,IAAI,OAAOP,IAAI,CAACK,EAAD,CAAJ,CAASC,EAAT,CAAP,KAAwB,WAAlC,EAA+CN,IAAI,CAACK,EAAD,CAAJ,CAASC,EAAT,IAAe,EAAf;AAE/C,YAAIC,EAAJ,EAAQP,IAAI,CAACK,EAAD,CAAJ,CAASC,EAAT,EAAaC,EAAb,IAAmBH,KAAnB,CAAR,KACK,IAAIE,EAAJ,EAAQN,IAAI,CAACK,EAAD,CAAJ,CAASC,EAAT,IAAeF,KAAf,CAAR,KACAJ,IAAI,CAACK,EAAD,CAAJ,GAAWD,KAAX;AACL,aAAKI,QAAL,CAAc;AAAER,UAAAA,IAAI,EAAJA;AAAF,SAAd;AACAC,QAAAA,2BAAO,CAACE,GAAR,CAAYT,IAAZ,EAAkBM,IAAlB;AACD;AAxBH;AAAA;AAAA,aA0BE,kBAAS;AACP,4BACES,wCAAC,gBAAD;AACE,UAAA,WAAW,EAAE,KAAKV,KAAL,CAAWC,IAD1B;AAEE,UAAA,iBAAiB,EAAE,KAAKF;AAF1B,WAGM,KAAKH,KAHX,EADF;AAOD;AAlCH;;AAAA;AAAA,IAAqBc,yBAAK,CAACC,SAA3B;AAoCD;;;;"}