/**
 * @freesewing/components | v2.17.0
 * A collection of React components for FreeSewing web UIs
 * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)
 * @license MIT
 */
'use strict';

var React = require('react');
var storage = require('@freesewing/utils/storage');
var styles = require('@material-ui/core/styles');
var AppBar = require('@material-ui/core/AppBar');
var Toolbar = require('@material-ui/core/Toolbar');
var reactIntl = require('react-intl');
var LanguageIcon = require('@material-ui/icons/Translate');
var LightModeIcon = require('@material-ui/icons/WbSunny');
var DarkModeIcon = require('@material-ui/icons/Brightness3');
var DraftIcon = require('@material-ui/icons/Gesture');
var TestIcon = require('@material-ui/icons/DoneAll');
var MeasurementsIcon = require('@material-ui/icons/Height');
var ExportIcon = require('@material-ui/icons/ScreenShare');
var defaultGist = require('@freesewing/utils/defaultGist');
var muiTheme = require('@freesewing/mui-theme');
var i18n = require('@freesewing/i18n');
var fileSaver = require('file-saver');
var theme = require('@freesewing/plugin-theme');
var DebugIcon = require('@material-ui/icons/PlayCircleOutline');
var InfoIcon = require('@material-ui/icons/Info');
var WarningIcon = require('@material-ui/icons/ErrorOutline');
var ErrorIcon = require('@material-ui/icons/HighlightOff');
var Markdown = require('react-markdown');
var IconButton = require('@material-ui/core/IconButton');
var ZoomIcon = require('@material-ui/icons/Cancel');
var IsolateIcon = require('@material-ui/icons/Search');
var CameraIcon = require('@material-ui/icons/CameraAlt');
var Slider = require('@material-ui/core/Slider');
var RightIcon = require('@material-ui/icons/KeyboardArrowRight');
var ResetIcon = require('@material-ui/icons/SettingsBackupRestore');
var sliderStep = require('@freesewing/utils/sliderStep');
var roundMm = require('@freesewing/utils/roundMm');
var roundMmUp = require('@freesewing/utils/roundMmUp');
var roundMmDown = require('@freesewing/utils/roundMmDown');
var formatMm = require('@freesewing/utils/formatMm');
var Radio = require('@material-ui/core/Radio');
var RadioGroup = require('@material-ui/core/RadioGroup');
var FormControlLabel = require('@material-ui/core/FormControlLabel');
var optionType = require('@freesewing/utils/optionType');
var optionDefault = require('@freesewing/utils/optionDefault');
var defaultSa = require('@freesewing/utils/defaultSa');
var FormGroup = require('@material-ui/core/FormGroup');
var Checkbox = require('@material-ui/core/Checkbox');
var TuneIcon = require('@material-ui/icons/Tune');
var WrenchIcon = require('@material-ui/icons/Build');
var DesignIcon = require('@material-ui/icons/Fingerprint');
var DumpIcon = require('@material-ui/icons/LocalSee');
var AdvancedIcon = require('@material-ui/icons/Policy');
var PaperlessIcon = require('@material-ui/icons/Nature');
var CompleteIcon = require('@material-ui/icons/Style');
var Switch = require('@material-ui/core/Switch');
var Prism = require('prismjs');
var Button = require('@material-ui/core/Button');
var TextField = require('@material-ui/core/TextField');
var InvalidIcon = require('@material-ui/icons/Warning');
var InputAdornment = require('@material-ui/core/InputAdornment');
var isDegMeasurement = require('@freesewing/utils/isDegMeasurement');
var models = require('@freesewing/models');
var UnhideIcon = require('@material-ui/icons/ChevronRight');
var neckstimate = require('@freesewing/utils/neckstimate');
var YAML = require('yaml');
var Tiler = require('@freesewing/utils/tiler');
var Backend = require('@freesewing/utils/backend');
var axios = require('axios');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var React__default = /*#__PURE__*/_interopDefaultLegacy(React);
var storage__default = /*#__PURE__*/_interopDefaultLegacy(storage);
var AppBar__default = /*#__PURE__*/_interopDefaultLegacy(AppBar);
var Toolbar__default = /*#__PURE__*/_interopDefaultLegacy(Toolbar);
var LanguageIcon__default = /*#__PURE__*/_interopDefaultLegacy(LanguageIcon);
var LightModeIcon__default = /*#__PURE__*/_interopDefaultLegacy(LightModeIcon);
var DarkModeIcon__default = /*#__PURE__*/_interopDefaultLegacy(DarkModeIcon);
var DraftIcon__default = /*#__PURE__*/_interopDefaultLegacy(DraftIcon);
var TestIcon__default = /*#__PURE__*/_interopDefaultLegacy(TestIcon);
var MeasurementsIcon__default = /*#__PURE__*/_interopDefaultLegacy(MeasurementsIcon);
var ExportIcon__default = /*#__PURE__*/_interopDefaultLegacy(ExportIcon);
var defaultGist__default = /*#__PURE__*/_interopDefaultLegacy(defaultGist);
var fileSaver__default = /*#__PURE__*/_interopDefaultLegacy(fileSaver);
var theme__default = /*#__PURE__*/_interopDefaultLegacy(theme);
var DebugIcon__default = /*#__PURE__*/_interopDefaultLegacy(DebugIcon);
var InfoIcon__default = /*#__PURE__*/_interopDefaultLegacy(InfoIcon);
var WarningIcon__default = /*#__PURE__*/_interopDefaultLegacy(WarningIcon);
var ErrorIcon__default = /*#__PURE__*/_interopDefaultLegacy(ErrorIcon);
var Markdown__default = /*#__PURE__*/_interopDefaultLegacy(Markdown);
var IconButton__default = /*#__PURE__*/_interopDefaultLegacy(IconButton);
var ZoomIcon__default = /*#__PURE__*/_interopDefaultLegacy(ZoomIcon);
var IsolateIcon__default = /*#__PURE__*/_interopDefaultLegacy(IsolateIcon);
var CameraIcon__default = /*#__PURE__*/_interopDefaultLegacy(CameraIcon);
var Slider__default = /*#__PURE__*/_interopDefaultLegacy(Slider);
var RightIcon__default = /*#__PURE__*/_interopDefaultLegacy(RightIcon);
var ResetIcon__default = /*#__PURE__*/_interopDefaultLegacy(ResetIcon);
var sliderStep__default = /*#__PURE__*/_interopDefaultLegacy(sliderStep);
var roundMm__default = /*#__PURE__*/_interopDefaultLegacy(roundMm);
var roundMmUp__default = /*#__PURE__*/_interopDefaultLegacy(roundMmUp);
var roundMmDown__default = /*#__PURE__*/_interopDefaultLegacy(roundMmDown);
var formatMm__default = /*#__PURE__*/_interopDefaultLegacy(formatMm);
var Radio__default = /*#__PURE__*/_interopDefaultLegacy(Radio);
var RadioGroup__default = /*#__PURE__*/_interopDefaultLegacy(RadioGroup);
var FormControlLabel__default = /*#__PURE__*/_interopDefaultLegacy(FormControlLabel);
var optionType__default = /*#__PURE__*/_interopDefaultLegacy(optionType);
var optionDefault__default = /*#__PURE__*/_interopDefaultLegacy(optionDefault);
var defaultSa__default = /*#__PURE__*/_interopDefaultLegacy(defaultSa);
var FormGroup__default = /*#__PURE__*/_interopDefaultLegacy(FormGroup);
var Checkbox__default = /*#__PURE__*/_interopDefaultLegacy(Checkbox);
var TuneIcon__default = /*#__PURE__*/_interopDefaultLegacy(TuneIcon);
var WrenchIcon__default = /*#__PURE__*/_interopDefaultLegacy(WrenchIcon);
var DesignIcon__default = /*#__PURE__*/_interopDefaultLegacy(DesignIcon);
var DumpIcon__default = /*#__PURE__*/_interopDefaultLegacy(DumpIcon);
var AdvancedIcon__default = /*#__PURE__*/_interopDefaultLegacy(AdvancedIcon);
var PaperlessIcon__default = /*#__PURE__*/_interopDefaultLegacy(PaperlessIcon);
var CompleteIcon__default = /*#__PURE__*/_interopDefaultLegacy(CompleteIcon);
var Switch__default = /*#__PURE__*/_interopDefaultLegacy(Switch);
var Prism__default = /*#__PURE__*/_interopDefaultLegacy(Prism);
var Button__default = /*#__PURE__*/_interopDefaultLegacy(Button);
var TextField__default = /*#__PURE__*/_interopDefaultLegacy(TextField);
var InvalidIcon__default = /*#__PURE__*/_interopDefaultLegacy(InvalidIcon);
var InputAdornment__default = /*#__PURE__*/_interopDefaultLegacy(InputAdornment);
var isDegMeasurement__default = /*#__PURE__*/_interopDefaultLegacy(isDegMeasurement);
var UnhideIcon__default = /*#__PURE__*/_interopDefaultLegacy(UnhideIcon);
var neckstimate__default = /*#__PURE__*/_interopDefaultLegacy(neckstimate);
var YAML__default = /*#__PURE__*/_interopDefaultLegacy(YAML);
var Tiler__default = /*#__PURE__*/_interopDefaultLegacy(Tiler);
var Backend__default = /*#__PURE__*/_interopDefaultLegacy(Backend);
var axios__default = /*#__PURE__*/_interopDefaultLegacy(axios);

function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);

    if (enumerableOnly) {
      symbols = symbols.filter(function (sym) {
        return Object.getOwnPropertyDescriptor(object, sym).enumerable;
      });
    }

    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread2(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function (obj) {
      return typeof obj;
    };
  } else {
    _typeof = function (obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

function _extends() {
  _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends.apply(this, arguments);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _possibleConstructorReturn(self, call) {
  if (call && (typeof call === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _slicedToArray(arr, i) {
  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();
}

function _arrayWithHoles(arr) {
  if (Array.isArray(arr)) return arr;
}

function _iterableToArrayLimit(arr, i) {
  var _i = arr && (typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"]);

  if (_i == null) return;
  var _arr = [];
  var _n = true;
  var _d = false;

  var _s, _e;

  try {
    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {
      _arr.push(_s.value);

      if (i && _arr.length === i) break;
    }
  } catch (err) {
    _d = true;
    _e = err;
  } finally {
    try {
      if (!_n && _i["return"] != null) _i["return"]();
    } finally {
      if (_d) throw _e;
    }
  }

  return _arr;
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];

  return arr2;
}

function _nonIterableRest() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _createForOfIteratorHelper(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];

  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it) o = it;
      var i = 0;

      var F = function () {};

      return {
        s: F,
        n: function () {
          if (i >= o.length) return {
            done: true
          };
          return {
            done: false,
            value: o[i++]
          };
        },
        e: function (e) {
          throw e;
        },
        f: F
      };
    }

    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }

  var normalCompletion = true,
      didErr = false,
      err;
  return {
    s: function () {
      it = it.call(o);
    },
    n: function () {
      var step = it.next();
      normalCompletion = step.done;
      return step;
    },
    e: function (e) {
      didErr = true;
      err = e;
    },
    f: function () {
      try {
        if (!normalCompletion && it.return != null) it.return();
      } finally {
        if (didErr) throw err;
      }
    }
  };
}

var withGist = function withGist(WrappedComponent) {
  var settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
    gist: {},
    store: false
  };
  return /*#__PURE__*/function (_React$Component) {
    _inherits(_class, _React$Component);

    var _super = _createSuper(_class);

    function _class(props) {
      var _this;

      _classCallCheck(this, _class);

      _this = _super.call(this, props);
      _this.setGist = _this.setGist.bind(_assertThisInitialized(_this));
      _this.importGist = _this.importGist.bind(_assertThisInitialized(_this));
      _this.updateGist = _this.updateGist.bind(_assertThisInitialized(_this));
      _this.state = {
        gist: settings.gist || {}
      };
      return _this;
    }

    _createClass(_class, [{
      key: "setGist",
      value: function setGist(gist) {
        this.setState({
          gist: gist
        });
        if (settings.store) storage__default['default'].set(this.state.gist.name || "gist", gist);
      }
    }, {
      key: "importGist",
      value: function importGist(gist) {
        if (typeof this.state.gist.settings === "undefined") this.updateGist({}, "settings");
        if (typeof this.state.gist.settings.options === "undefined") this.updateGist({}, "settings", "options");

        if (typeof gist.settings !== "undefined") {
          // Load settings
          for (var _i = 0, _Object$keys = Object.keys(gist.settings); _i < _Object$keys.length; _i++) {
            var key = _Object$keys[_i];
            if (key !== "options") this.updateGist(gist.settings[key], "settings", key);
          }

          if (typeof gist.settings.options !== "undefined") {
            // Load options
            for (var _i2 = 0, _Object$keys2 = Object.keys(gist.settings.options); _i2 < _Object$keys2.length; _i2++) {
              var _key = _Object$keys2[_i2];
              this.updateGist(gist.settings.options[_key], "settings", "options", _key);
            }
          }
        } // Load root level keys


        for (var _i3 = 0, _Object$keys3 = Object.keys(gist); _i3 < _Object$keys3.length; _i3++) {
          var _key2 = _Object$keys3[_i3];
          if (_key2 !== "settings") this.updateGist(gist[_key2], _key2);
        }
      }
    }, {
      key: "updateGist",
      value: function updateGist(value) {
        var l1 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
        var l2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
        var l3 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
        if (!l1) return;
        var gist = this.state.gist;
        if (l2 && typeof gist[l1] === "undefined") gist[l1] = {};
        if (l3 && typeof gist[l1][l2] === "undefined") gist[l1][l2] = {};
        if (l3) gist[l1][l2][l3] = value;else if (l2) gist[l1][l2] = value;else gist[l1] = value;
        this.setState({
          gist: gist
        });
        if (settings.store) storage__default['default'].set(this.state.gist.name || "gist", gist);
      }
    }, {
      key: "render",
      value: function render() {
        return /*#__PURE__*/React__default['default'].createElement(WrappedComponent, _extends({
          gist: this.state.gist,
          importGist: this.importGist,
          updateGist: this.updateGist
        }, this.props));
      }
    }]);

    return _class;
  }(React__default['default'].Component);
};

// These are from simpleicons.org - thanks guys!
var discord = 'M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273-1.47-1.338-1.604-1.398.67 2.205H3.71c-1.402 0-2.54-1.065-2.54-2.476V2.48C1.17 1.142 2.31.003 3.715.003h16.5L20.222 0zm-6.118 5.683h-.03l-.202.2c2.073.6 3.076 1.537 3.076 1.537-1.336-.668-2.54-1.002-3.744-1.137-.87-.135-1.74-.064-2.475 0h-.2c-.47 0-1.47.2-2.81.735-.467.203-.735.336-.735.336s1.002-1.002 3.21-1.537l-.135-.135s-1.672-.064-3.477 1.27c0 0-1.805 3.144-1.805 7.02 0 0 1 1.74 3.743 1.806 0 0 .4-.533.805-1.002-1.54-.468-2.14-1.404-2.14-1.404s.134.066.335.2h.06c.03 0 .044.015.06.03v.006c.016.016.03.03.06.03.33.136.66.27.93.4.466.202 1.065.403 1.8.536.93.135 1.996.2 3.21 0 .6-.135 1.2-.267 1.8-.535.39-.2.87-.4 1.397-.737 0 0-.6.936-2.205 1.404.33.466.795 1 .795 1 2.744-.06 3.81-1.8 3.87-1.726 0-3.87-1.815-7.02-1.815-7.02-1.635-1.214-3.165-1.26-3.435-1.26l.056-.02zm.168 4.413c.703 0 1.27.6 1.27 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334.002-.74.573-1.338 1.27-1.338zm-4.543 0c.7 0 1.266.6 1.266 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334 0-.74.57-1.338 1.27-1.338z';
var github = 'M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12';
var twitter = 'M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z';
var instagram = 'M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z';
var google = 'M 12.25009,0 C 7.5567085,0 3.5033589,2.69334 1.530043,6.613315 0.71674427,8.240005 0.25,10.06676 0.25,12.00009 c 0,1.93333 0.46674427,3.759905 1.280043,5.386595 C 3.5033589,21.30666 7.5567085,24 12.25009,24 c 3.239959,0 5.959944,-1.066635 7.94668,-2.906575 2.266629,-2.093365 3.573349,-5.173415 3.573349,-8.826735 0,-0.98666 -0.08023,-1.70661 -0.253496,-2.453265 l -11.266533,0 0,4.45322 6.613137,0 c -0.133283,1.106705 -0.853233,2.77333 -2.453266,3.89327 -1.013315,0.706675 -2.373243,1.199975 -4.159871,1.199975 -3.173318,0 -5.8666835,-2.09327 -6.826777,-4.986605 -0.2533286,-0.746655 -0.399991,-1.54657 -0.399991,-2.373195 0,-0.82672 0.1467055,-1.62672 0.386706,-2.373375 C 6.3834495,6.73338 9.076772,4.63993 12.25009,4.63993 c 2.253301,0 3.773228,0.973465 4.639932,1.786855 L 20.27666,3.12004 C 18.196718,1.186705 15.490049,0 12.25009,0 Z';
var facebook = 'M22.676 0H1.324C.593 0 0 .593 0 1.324v21.352C0 23.408.593 24 1.324 24h11.494v-9.294H9.689v-3.621h3.129V8.41c0-3.099 1.894-4.785 4.659-4.785 1.325 0 2.464.097 2.796.141v3.24h-1.921c-1.5 0-1.792.721-1.792 1.771v2.311h3.584l-.465 3.63H16.56V24h6.115c.733 0 1.325-.592 1.325-1.324V1.324C24 .593 23.408 0 22.676 0';
var reddit = 'M 11.710829,0.00384705 C 5.0683862,0.16990815 -0.16221405,5.6505729 0.00384705,12.293016 0.16990814,18.686369 5.3178021,23.833614 11.628124,24.082706 18.270567,24.248767 23.833939,19.018167 24,12.375723 V 11.710829 C 23.833939,5.0683862 18.353273,-0.16221404 11.710829,0.00384705 Z m 5.187788,5.10021625 c 0.15698,0.00649 0.313636,0.048326 0.458939,0.1313569 0.581214,0.3321223 0.912687,1.0793971 0.580565,1.660611 C 17.605998,7.4772452 16.858724,7.808718 16.27751,7.4765965 15.862357,7.3105352 15.614238,6.8947339 15.614238,6.3965506 L 13.038995,5.8159854 12.208689,9.55236 c 1.826672,0.08303 3.48858,0.664893 4.651007,1.495199 0.664245,-0.664245 1.826673,-0.664245 2.490917,0 0.332122,0.332121 0.49786,0.747274 0.49786,1.245457 0.249091,0.747275 -0.249092,1.327193 -0.830306,1.576284 v 0.49948 c 0,2.740009 -3.155161,4.897506 -7.057597,4.897506 -3.9024357,0 -7.0575963,-2.157497 -7.0575963,-4.897506 V 13.8693 C 3.9896377,13.454147 3.6578398,12.458754 3.989962,11.545418 c 0.2490916,-0.664245 0.9120387,-1.08037 1.5762832,-0.99734 0.4981831,0 0.9133359,0.167358 1.2454581,0.499481 C 8.2232228,10.134222 9.8848065,9.55236 11.545418,9.55236 l 0.913011,-4.1515273 c 0,-0.083031 0.08271,-0.1654124 0.08271,-0.1654125 0.08303,-0.08303 0.166711,-0.084328 0.249741,-0.084328 l 2.906069,0.664893 C 15.946037,5.3800751 16.427678,5.084603 16.898617,5.1040633 Z M 9.3026198,12.293016 c -0.6642443,0 -1.2454583,0.581214 -1.2454583,1.245458 0,0.664245 0.498183,1.245459 1.2454583,1.245459 0.6642442,0 1.2454582,-0.581214 1.2454582,-1.245459 0,-0.664244 -0.581214,-1.245458 -1.2454582,-1.245458 z m 5.4813132,0 c -0.664245,0 -1.245459,0.581214 -1.245459,1.245458 0,0.664245 0.581214,1.245459 1.245459,1.245459 0.664245,0 1.245458,-0.581214 1.245458,-1.245459 0,-0.664244 -0.581213,-1.245458 -1.245458,-1.245458 z m -5.3872557,3.943952 c -0.072653,0 -0.135249,0.04021 -0.1767645,0.123249 -0.1660605,0.16606 -0.1660605,0.332121 0,0.415152 0.8303052,0.830306 2.4905922,0.914633 2.9887762,0.914633 0.498183,0 2.077061,-0.08433 2.990396,-0.914633 -0.08303,-0.08303 -0.084,-0.249092 -0.167034,-0.415152 -0.166061,-0.166062 -0.332121,-0.166062 -0.415152,0 -0.498183,0.581213 -1.660611,0.747598 -2.490917,0.747598 -0.830305,0 -1.992733,-0.166385 -2.4909165,-0.747598 -0.08303,-0.08303 -0.1657365,-0.123249 -0.2383882,-0.123249 z';
var note = 'M 12,3 C 11.54,3 11.07,3.04 10.6,3.14 7.84,3.67 5.64,5.9 5.12,8.66 4.64,11.27 5.6,13.67 7.34,15.22 7.77,15.6 8,16.13 8,16.69 V 19 c 0,1.1 0.9,2 2,2 h 0.28 c 0.35,0.6 0.98,1 1.72,1 0.74,0 1.38,-0.4 1.72,-1 H 14 c 1.1,0 2,-0.9 2,-2 V 16.69 C 16,16.14 16.22,15.6 16.64,15.23 18.09,13.95 19,12.08 19,10 19,6.13 15.87,3 12,3 Z m 2,16 h -4 v -1 h 4 z m 0,-2 h -4 v -1 h 4 z M 12.5,11.41 V 14 h -1 V 11.41 L 9.67,9.59 10.38,8.88 12,10.5 13.62,8.88 14.33,9.59 Z';
var tip = 'M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z';
var warning = 'M7.58 4.08L6.15 2.65C3.75 4.48 2.17 7.3 2.03 10.5h2c.15-2.65 1.51-4.97 3.55-6.42zm12.39 6.42h2c-.15-3.2-1.73-6.02-4.12-7.85l-1.42 1.43c2.02 1.45 3.39 3.77 3.54 6.42zM18 11c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2v-5zm-6 11c.14 0 .27-.01.4-.04.65-.14 1.18-.58 1.44-1.18.1-.24.15-.5.15-.78h-4c.01 1.1.9 2 2.01 2z';
var units = 'M 1.2481485,5.9969994 C 0.57472916,5.9969994 0,6.5763504 0,7.2510315 V 14.751864 C 0,15.427642 0.57290973,16 1.2481485,16 H 22.753805 C 23.427222,16 24,15.426545 24,14.751864 V 7.2510315 C 24,6.5752543 23.429042,5.9969994 22.753805,5.9969994 Z M 2.0001628,7.997229 H 2.5021567 V 9.9974209 H 3.4983316 V 7.997229 H 4.5042727 V 9.9974209 H 5.5004476 V 7.997229 h 1.0039881 v 3.004219 H 7.5006105 V 7.997229 H 8.4967853 V 9.9974209 H 9.500773 V 7.997229 h 0.996175 v 2.0001919 h 1.005941 V 7.997229 h 0.996175 v 2.0001919 h 1.003988 V 7.997229 h 0.996175 v 2.0001919 h 1.003987 V 7.997229 h 0.996176 v 3.004219 h 1.003987 V 7.997229 h 0.996176 v 2.0001919 h 1.00594 V 7.997229 h 0.996176 v 2.0001919 h 1.003987 V 7.997229 h 0.494181 V 13.99977 H 19.202735 V 11.659724 H 17.599088 V 13.99977 H 12.801823 V 10.854937 H 11.200131 V 13.99977 H 6.4009116 V 11.659724 H 4.7992186 V 13.99977 H 2.0001628 Z';
var measurements = 'M 1.7792969,4.1816406 C 1.4635303,4.2034836 1.2472407,4.5095002 1.3320312,4.8144531 2.0126746,7.4312978 2.3589401,9.6399539 2.4804688,11.576172 l -0.2792969,0.179687 c -0.2007566,0.128704 -0.362752,0.219425 -0.5644531,0.480469 -0.1008507,0.130522 -0.2414074,0.337804 -0.2460938,0.683594 -0.00469,0.34579 0.2212218,0.709779 0.4121094,0.861328 0.3438312,0.272974 0.5293755,0.265612 0.7070312,0.279297 -0.102277,2.28979 -0.5523838,4.163493 -1.15625,5.869141 -0.266254,0.647707 0.7399311,1.004673 0.9414063,0.333984 0.6291584,-1.777086 1.0947468,-3.759245 1.2011719,-6.16211 0.8587499,0.0021 1.9817457,-0.02871 3.2402343,0.08203 1.266623,0.111458 2.5881834,0.388821 3.6914059,0.923828 -0.8838667,0.895791 -1.5848887,2.046501 -1.9218746,3.492187 l -0.2265625,0.972657 1.9472651,0.455078 0.226563,-0.97461 c 0.285273,-1.223836 0.850633,-2.097458 1.613281,-2.771484 0.508245,0.558951 0.895359,1.267092 1.117188,2.21875 l 0.226562,0.972656 1.949219,-0.453125 -0.228516,-0.974609 c -0.263451,-1.130219 -0.752009,-2.068727 -1.375,-2.835938 1.029043,-0.475861 2.194264,-0.776127 3.316407,-0.958984 1.232141,-0.200782 2.333045,-0.266545 3.220703,-0.341797 0.08818,2.494183 0.568253,4.529139 1.214843,6.355469 0.201481,0.670677 1.207649,0.313718 0.941407,-0.333984 -0.627794,-1.773234 -1.099219,-3.716671 -1.175781,-6.132811 0.04197,-0.0074 0.08942,-0.01089 0.130859,-0.01953 0.203289,-0.04241 0.397475,-0.06086 0.701172,-0.28711 0.151848,-0.113123 0.350634,-0.325838 0.427734,-0.634765 0.0771,-0.308927 -0.0063,-0.622179 -0.105469,-0.806641 -0.19843,-0.368923 -0.391632,-0.467629 -0.59375,-0.601562 l -0.472656,-0.3125 c 0.145104,-1.8337507 0.478549,-3.8949994 1.109375,-6.3203139 0.09171,-0.3306355 -0.169212,-0.6533027 -0.511719,-0.6328125 -0.218769,0.013497 -0.40325,0.1678902 -0.455078,0.3808594 -0.737,2.8335196 -1.100379,5.2405579 -1.199218,7.341797 -0.815925,0.07419 -2.080274,0.132785 -3.554688,0.373047 -1.478459,0.240919 -3.106344,0.671272 -4.574219,1.509765 -0.13911,-0.09127 -0.278493,-0.182969 -0.421875,-0.263671 -1.545631,-0.869966 -3.2877636,-1.195282 -4.8417966,-1.332032 -1.384279,-0.121812 -2.5095809,-0.08087 -3.296875,-0.08008 L 3.4980469,11.929688 C 3.4010459,9.8222094 3.0389322,7.4079513 2.2988281,4.5625 2.2413801,4.3260531 2.0220721,4.1652822 1.7792969,4.1816406 Z';
var withBreasts = 'm 8.233159,2.5000002 c 0,0 0.03684,1.4367676 0.07562,2.1541457 C 8.413989,6.5901608 7.3671071,6.9496995 7.3372662,8.1692173 7.3029172,9.5719723 8.2152,10.315942 8.255388,12.267223 8.290568,13.973294 7.1739465,15.012709 7.1739465,17.259683 9.46861,17.549817 10.668009,19.205086 11.354231,21.5 h 0.109763 0.93923 0.109803 c 0.686181,-2.294914 1.88558,-3.950183 4.180285,-4.240317 0,-2.246974 -1.116622,-3.286389 -1.081483,-4.99246 0.04015,-1.951281 0.952433,-2.6952507 0.918122,-4.0980057 -0.0298,-1.2195178 -1.076723,-1.5790565 -0.971513,-3.5150714 0.0389,-0.7173781 0.07562,-2.1541457 0.07562,-2.1541457 h -0.722313 c 0,1.5276628 -1.146752,3.7763442 -2.978112,3.7763442 -1.831402,0 -2.978154,-2.2486814 -2.978154,-3.7763442 z';
var withoutBreasts = 'M 6.2021092,6.7988281 C 5.0433189,10.972649 5.2215488,13.211802 5.2215488,16.798828 h 5.8983122 l 0.143133,-1.21128 c 0.331559,-1.834081 0.655671,-2.543616 1.078829,0.07477 l 0.134587,1.136509 h 5.896176 c 0,-3.587026 0.180363,-5.826179 -0.978425,-9.9999999 z';
var designs = 'M 11.974745,2.9104165 c -1.528527,0 -2.784485,1.256277 -2.784485,2.7848068 0,0.7494035 0.300482,1.4388587 0.786371,1.9393863 a 0.79436575,0.79436575 0 0 0 0.0084,0.00839 c 0.38087,0.3808653 0.745407,0.6251708 0.94538,0.8248328 0.19998,0.1996612 0.25013,0.2644989 0.25013,0.519072 V 9.6465486 L 2.0590674,14.913054 c -0.284779,0.164416 -0.836034,0.466125 -1.31649616,0.961104 -0.4804697,0.494981 -0.92450835,1.339947 -0.6668386,2.258534 0.2202611,0.785239 0.7746008,1.348564 1.34156666,1.587845 0.5669735,0.23928 1.0981677,0.23415 1.4684955,0.23415 h 6.2292502 5.582178 6.22925 c 0.370328,0 0.901583,0.0051 1.468557,-0.23415 0.566974,-0.239281 1.121495,-0.802606 1.341756,-1.587845 0.25767,-0.918587 -0.18662,-1.763553 -0.667089,-2.258534 C 22.589235,15.379179 22.03823,15.07747 21.753452,14.913054 L 12.76908,9.7258014 V 8.9869116 c 0,-0.7037243 -0.35623,-1.2837462 -0.716532,-1.6434766 C 11.69477,6.9862306 11.349385,6.7584045 11.114868,6.5255482 10.906224,6.3095381 10.778796,6.0225704 10.778796,5.6952216 c 0,-0.6700011 0.525949,-1.1962032 1.195949,-1.1962032 0.670007,0 1.196206,0.5262021 1.196206,1.1962032 a 0.79428633,0.79428633 0 0 0 0.794335,0.7942692 0.79428633,0.79428633 0 0 0 0.794268,-0.7942692 c 0,-1.5285296 -1.256276,-2.7848051 -2.784809,-2.7848051 z m -0.06859,8.2926595 8.991884,5.191357 c 0.289472,0.167124 0.693472,0.413355 0.943933,0.671385 0.250463,0.258029 0.313011,0.371405 0.247537,0.604827 -0.102886,0.366772 -0.190028,0.402129 -0.359686,0.473732 -0.169667,0.07161 -0.470133,0.09952 -0.803363,0.09952 H 14.697212 9.115034 2.8857834 c -0.3332299,0 -0.6336968,-0.02792 -0.8033621,-0.09952 -0.1696653,-0.07161 -0.2567452,-0.10696 -0.3596267,-0.473732 -0.06548,-0.233422 -0.00303,-0.346798 0.2474764,-0.604827 0.2504623,-0.25803 0.6547126,-0.504259 0.9441829,-0.671385 z';
var icons = {
  designs: designs,
  discord: discord,
  github: github,
  twitter: twitter,
  instagram: instagram,
  google: google,
  facebook: facebook,
  reddit: reddit,
  note: note,
  tip: tip,
  warning: warning,
  units: units,
  measurements: measurements,
  withBreasts: withBreasts,
  withoutBreasts: withoutBreasts
};

var Icon = function Icon(_ref) {
  var _ref$size = _ref.size,
      size = _ref$size === void 0 ? 24 : _ref$size,
      _ref$viewBox = _ref.viewBox,
      viewBox = _ref$viewBox === void 0 ? '0 0 24 24' : _ref$viewBox,
      _ref$className = _ref.className,
      className = _ref$className === void 0 ? '' : _ref$className,
      _ref$icon = _ref.icon,
      icon = _ref$icon === void 0 ? 'github' : _ref$icon,
      _ref$color = _ref.color,
      color = _ref$color === void 0 ? false : _ref$color,
      _ref$style = _ref.style,
      style = _ref$style === void 0 ? {} : _ref$style;
  return /*#__PURE__*/React__default['default'].createElement("svg", {
    style: style,
    className: className,
    xmlns: "http://www.w3.org/2000/svg",
    width: size,
    height: size,
    viewBox: viewBox
  }, /*#__PURE__*/React__default['default'].createElement("path", {
    stroke: "none",
    fill: color ? color : 'currentColor',
    d: icons[icon]
  }));
};

var Logo = function Logo(_ref) {
  var _ref$size = _ref.size,
      size = _ref$size === void 0 ? 24 : _ref$size,
      _ref$embed = _ref.embed,
      embed = _ref$embed === void 0 ? false : _ref$embed,
      _ref$className = _ref.className,
      className = _ref$className === void 0 ? '' : _ref$className,
      _ref$color = _ref.color,
      color = _ref$color === void 0 ? false : _ref$color;
  var svgProps = {
    xmlns: 'http://www.w3.org/2000/svg',
    viewBox: '0 0 48 48',
    className: className
  };

  if (!embed) {
    svgProps.width = size;
    svgProps.height = size;
  }

  return /*#__PURE__*/React__default['default'].createElement("svg", svgProps, /*#__PURE__*/React__default['default'].createElement("path", {
    fill: color ? color : 'currentColor',
    stroke: "none",
    d: "M 35.222,0 C 34.233,0.703 34.284,0.613 33.485,0.874 31.653,1.473 29.896,1.144 27.811,0.97 27.184,0.9 26.562,0.859 25.955,0.855 22.89,0.834 20.287,1.733 19.794,4.243 18.885,4.794 18.049,5.461 17.221,6.129 15.453,7.524 14.122,9.229 13.214,11.284 11.974,14.319 13.094,17.576 13.649,20.652 13.781,21.372 13.919,22.058 13.993,22.323 14.098,22.696 14.283,23.052 14.484,23.372 14.531,23.38 14.779,22.998 14.838,22.829 14.924,22.583 14.915,22.188 14.821,21.848 14.613,21.083 14.415,20.462 14.398,20.15 14.368,19.564 14.482,19.023 14.696,18.755 14.772,18.66 14.946,19.15 14.901,19.332 14.848,19.551 14.808,19.926 14.825,20.099 14.872,20.685 14.958,21.312 15.065,21.86 15.202,22.567 15.261,23.021 15.236,23.197 15.218,23.325 15.158,23.454 14.928,23.85 14.728,24.197 14.624,24.478 14.608,24.726 14.591,24.968 14.664,25.573 14.732,25.721 14.831,25.952 15.129,26.195 15.389,26.255 15.638,26.35 15.763,26.547 15.891,26.768 16.202,27.361 16.442,28.083 16.68,29.171 16.796,29.692 16.893,30.157 16.924,30.401 15.004,30.403 12.545,30.404 10.305,30.404 9.551,30.416 8.189,30.062 6.94,29.98 6.759,28.026 5.901,25.756 4.433,25.624 3.431,25.533 2.6,25.914 1.897,27.497 L 1.917,27.582 C 2.332,27.235 2.77,26.174 4.348,26.247 5.56,26.302 5.964,28.596 6.084,29.976 5.346,30.03 4.718,30.257 4.39,30.824 L 4.383,30.824 C 4.383,30.825 4.383,30.827 4.386,30.829 4.383,30.831 4.383,30.833 4.383,30.835 L 4.39,30.835 C 4.728,31.416 5.379,31.641 6.144,31.686 6.655,46.136 20.238,48 23.95,48 37.798,48 42.646,38.59 43.375,34.863 43.716,36.451 42.642,38.474 42.385,39.967 45.306,36.59 44.778,33.343 44.244,30.077 44.688,30.605 45.289,30.932 46.104,30.751 45.523,30.363 44.735,30.635 44.263,28.998 44.057,28.291 43.879,27.761 43.702,27.316 43.32,25.883 42.778,24.514 42.112,23.18 41.55,21.733 41.921,20.795 41.865,19.553 42.876,22.887 43.508,23.774 44.688,24.123 41.72,20.547 42.736,15.01 41.059,10.068 41.818,10.514 42.684,10.648 43.606,10.103 42.714,9.849 41.824,10.52 40.544,8.639 39.463,6.536 37.897,4.983 35.997,3.613 34.979,2.949 33.849,2.503 32.713,2.089 33.87,1.799 35.162,0.769 35.222,0 z M 33.281,11.107 C 34.805,11.663 36.485,13.775 36.466,15.847 L 36.466,15.933 36.466,15.963 C 36.425,18.777 35.146,20.29 35.2,22.164 35.269,24.371 36.219,25.141 36.408,25.509 36.084,24.148 35.894,22.436 36.322,21.08 36.872,19.336 37.427,17.892 37.387,16.526 37.367,16.206 37.231,15.009 37.14,14.479 38.774,16.837 36.786,20.266 37.358,22.51 38.352,26.419 42.807,26.913 41.481,34.789 40.314,41.713 32.318,46.968 24.122,46.968 18.046,46.968 7.517,43.605 6.997,31.676 8.232,31.588 9.56,31.244 10.305,31.256 12.557,31.256 15.129,31.257 17.067,31.258 17.431,32.9 17.704,33.296 19.085,34.39 20.621,35.598 20.979,35.745 23.251,35.767 25.524,35.79 26.198,35.303 28.403,33.217 28.879,32.659 29.085,31.928 29.316,31.241 31.584,31.22 33.238,31.18 34.865,31.104 36.522,31.029 36.756,31.104 39.426,30.829 36.756,30.554 36.522,30.629 34.865,30.553 33.281,30.481 31.677,30.44 29.508,30.42 29.69,29.603 29.95,28.805 30.227,28.016 30.398,27.551 30.599,27.098 30.805,26.647 L 31.03,26.577 C 31.464,26.423 31.848,26.093 32.001,25.647 32.198,25.056 32.058,24.392 31.677,23.909 31.546,23.728 31.383,23.497 31.316,23.395 31.115,23.077 31.11,22.9 31.28,21.718 31.423,20.728 31.439,20.21 31.34,19.708 31.32,19.421 31.318,18.831 31.309,18.672 31.385,18.714 31.55,19.09 31.717,19.599 31.883,20.11 31.91,20.216 31.948,20.651 31.99,21.145 31.805,21.511 31.653,22.248 31.577,22.628 31.51,22.981 31.51,23.029 31.51,23.08 31.546,23.188 31.584,23.272 31.673,23.46 31.84,23.724 31.871,23.724 32.416,23.123 32.736,22.381 33.021,21.628 33.321,20.776 33.409,19.872 33.619,18.995 33.789,18.231 33.985,17.466 34.046,16.682 34.169,15.152 34.097,14.072 33.759,12.478 33.678,12.118 33.444,11.431 33.281,11.107 z M 27.921,18.644 C 28.506,18.637 29.085,18.708 29.636,18.867 30.385,19.154 30.49,19.823 30.628,20.574 30.705,21.054 30.702,21.399 30.615,21.963 30.554,22.781 30.229,23.414 29.519,23.859 28.448,24.057 27.303,24.248 26.395,23.539 25.633,22.489 25.174,21.162 25.349,19.868 25.46,19.337 25.707,19.061 26.215,18.896 26.762,18.739 27.341,18.653 27.921,18.644 z M 19.038,18.739 C 19.585,18.734 20.138,18.792 20.442,18.986 21.747,19.869 21.328,21.306 20.812,22.567 20.061,24.218 18.437,24.157 16.863,24.144 15.992,23.889 15.912,23.175 15.786,22.412 15.678,21.675 15.448,20.885 15.64,20.144 16.133,18.952 17.935,18.815 19.038,18.739 z M 38.941,18.945 C 38.948,22.118 39.49,23.677 40.578,25.924 39.937,24.701 39.021,24.005 38.68,22.543 38.028,19.72 38.731,19.878 38.941,18.945 z M 23.128,21.243 C 23.3,21.417 23.383,21.657 23.532,21.848 23.647,21.651 23.765,21.455 23.913,21.28 23.99,21.282 24.084,21.434 24.169,21.706 24.533,22.712 24.604,23.819 25.076,24.786 25.517,25.486 24.915,25.894 24.254,25.926 23.772,25.925 23.568,25.596 23.285,25.27 23.212,25.483 23.073,25.62 22.907,25.764 22.485,26.118 21.658,25.987 21.53,25.429 21.7,24.363 22.243,23.384 22.599,22.362 22.776,21.989 22.778,21.703 23.128,21.243 z M 16.936,26.628 C 17.149,26.628 17.734,27.025 17.853,27.249 17.935,27.398 18.122,27.978 18.135,28.119 18.156,28.287 18.105,28.685 18.053,28.793 18.015,28.87 17.986,28.881 17.942,28.831 17.905,28.789 17.415,27.849 17.102,27.227 16.856,26.729 16.83,26.628 16.936,26.628 z M 29.158,26.939 C 29.166,26.94 29.178,26.943 29.189,26.946 29.255,26.973 29.209,27.207 28.961,28.057 28.914,28.313 28.8,28.515 28.633,28.683 28.578,28.683 28.553,28.619 28.467,28.264 28.394,27.961 28.386,27.691 28.437,27.449 28.525,27.146 28.881,27.053 29.158,26.939 z M 27.675,28.792 C 27.696,28.788 27.716,28.799 27.742,28.82 27.832,28.883 27.845,29.049 27.785,29.374 27.712,29.792 27.696,29.838 27.588,29.881 27.541,29.902 27.457,29.917 27.401,29.917 27.3,29.899 27.274,29.817 27.298,29.693 27.298,29.433 27.374,29.207 27.546,28.94 27.611,28.84 27.644,28.797 27.675,28.792 z M 19.042,28.811 C 19.111,28.811 19.319,28.961 19.396,29.065 19.482,29.175 19.58,29.83 19.525,29.943 19.462,30.085 19.154,30.014 19.069,29.837 19.017,29.731 18.894,29.159 18.894,29.023 18.894,28.897 18.955,28.811 19.042,28.811 z M 26.933,28.984 C 27.017,29.104 27.039,29.258 27.021,29.596 L 27.004,29.904 26.916,29.992 C 26.863,30.041 26.773,30.101 26.719,30.126 26.6,30.182 26.509,30.187 26.492,30.142 26.472,30.082 26.506,29.7 26.543,29.571 26.586,29.438 26.779,29.041 26.843,28.957 26.872,28.88 26.906,28.976 26.933,28.984 z M 21.912,28.966 C 22.093,29.012 22.173,29.175 22.272,29.323 L 22.339,29.455 22.245,29.782 C 22.195,29.962 22.142,30.124 22.126,30.142 22.108,30.162 22.041,30.172 21.942,30.171 21.678,30.164 21.648,30.153 21.577,30.045 L 21.511,29.947 21.567,29.672 C 21.648,29.276 21.687,29.157 21.777,29.055 21.824,29 21.871,28.97 21.912,28.966 z M 20.241,29.249 20.39,29.398 20.415,29.735 C 20.428,29.919 20.434,30.09 20.424,30.111 20.415,30.14 20.361,30.148 20.194,30.148 L 19.977,30.148 C 19.861,30.021 19.825,29.866 19.776,29.706 19.662,29.225 19.662,29.006 19.78,28.977 19.973,28.989 20.1,29.129 20.241,29.249 z M 26.041,29.018 C 26.277,29.081 26.23,29.456 26.229,29.724 26.211,30.158 26.194,30.248 26.138,30.304 26.041,30.401 25.771,30.347 25.64,30.203 25.597,30.151 25.593,30.135 25.627,29.924 25.666,29.667 25.716,29.507 25.827,29.287 25.908,29.129 25.984,29.03 26.041,29.018 z M 20.715,29.038 C 20.728,29.037 20.749,29.038 20.769,29.04 20.919,29.052 21.059,29.15 21.183,29.33 L 21.283,29.477 C 21.292,29.718 21.283,29.972 21.24,30.196 21.214,30.209 21.106,30.229 21,30.239 20.816,30.256 20.799,30.252 20.735,30.196 20.646,30.12 20.621,29.979 20.599,29.511 20.586,29.129 20.595,29.044 20.715,29.038 z M 22.984,29.118 C 23.145,29.152 23.247,29.238 23.292,29.379 23.328,29.5 23.35,30.177 23.315,30.224 23.303,30.244 23.227,30.269 23.14,30.28 22.816,30.321 22.53,30.29 22.502,30.213 22.466,30.125 22.707,29.253 22.796,29.145 22.834,29.061 22.926,29.126 22.984,29.118 z M 25.082,29.124 C 25.153,29.117 25.229,29.185 25.303,29.33 25.363,29.451 25.372,29.493 25.372,29.764 25.372,29.98 25.359,30.073 25.336,30.093 25.316,30.109 25.235,30.138 25.149,30.16 24.999,30.199 24.966,30.203 24.919,30.187 L 24.694,30.146 24.711,30.012 C 24.727,29.837 24.842,29.449 24.923,29.281 24.971,29.181 25.026,29.131 25.082,29.124 z M 24.104,29.127 C 24.151,29.125 24.173,29.136 24.203,29.169 24.274,29.253 24.364,29.501 24.421,29.766 24.497,30.139 24.497,30.138 24.334,30.187 24.263,30.209 24.113,30.232 24.006,30.238 23.653,30.256 23.626,30.235 23.669,29.923 23.703,29.645 23.84,29.207 23.899,29.175 23.963,29.141 24.037,29.142 24.104,29.127 z M 6.111,30.536 C 6.114,30.535 6.118,30.536 6.118,30.536 6.127,30.731 6.127,30.928 6.131,31.124 5.636,31.086 5.272,30.968 5.272,30.829 5.272,30.692 5.623,30.575 6.111,30.536 z M 6.976,30.553 C 7.377,30.603 7.654,30.708 7.649,30.829 7.649,30.951 7.381,31.055 6.983,31.104 6.979,30.921 6.979,30.737 6.976,30.553 z M 25.702,31.086 C 25.736,31.083 25.751,31.08 25.803,31.085 26.011,31.106 26.041,31.119 26.041,31.189 26.041,31.281 25.883,31.558 25.776,31.654 25.726,31.702 25.657,31.742 25.633,31.742 25.513,31.742 25.443,31.489 25.499,31.256 25.533,31.13 25.595,31.091 25.702,31.086 z M 24.947,31.169 C 25.04,31.161 25.13,31.186 25.22,31.198 25.194,31.461 25.076,31.676 24.857,31.819 24.803,31.819 24.776,31.716 24.776,31.491 24.776,31.223 24.79,31.172 24.947,31.169 z M 24.119,31.266 C 24.312,31.266 24.482,31.275 24.49,31.286 24.526,31.32 24.422,31.578 24.269,31.84 24.138,32.073 24.119,32.09 24.038,32.096 23.72,32.06 23.729,31.687 23.68,31.431 23.68,31.279 23.714,31.266 24.119,31.266 z M 21.11,31.295 C 21.331,31.299 21.417,31.332 21.417,31.417 21.417,31.525 21.335,31.74 21.288,31.767 21.217,31.806 21.211,31.804 21.071,31.658 20.85,31.41 20.825,31.364 21.11,31.295 z M 22.174,31.306 C 22.178,31.312 22.221,31.39 22.264,31.478 22.358,31.661 22.365,31.741 22.298,31.802 22.14,31.892 22.107,31.841 21.964,31.75 21.798,31.593 21.667,31.382 21.71,31.338 21.858,31.285 22.021,31.305 22.174,31.306 z M 22.596,31.311 22.991,31.318 C 23.145,31.318 23.278,31.326 23.285,31.338 23.312,31.362 23.225,31.876 23.178,31.992 23.124,32.122 22.935,32.123 22.837,31.969 22.697,31.748 22.605,31.562 22.602,31.434 L 22.596,31.311 z"
  }));
};

function ButtonAppBar(props) {
  var style = {
    wrapper: {
      flexGrow: 1,
      width: '100%',
      margin: 0,
      padding: 0,
      background: '#1a1d21',
      zIndex: 15
    },
    button: {
      height: '64px',
      padding: '0 18px'
    },
    iconButton: {},
    icon: {
      maxWidth: '24px',
      maxHeight: '24px',
      marginRight: '0.5rem'
    },
    spacer: {
      flexGrow: 1
    },
    darkModeIcon: {
      transform: 'rotate(26deg)',
      maxWidth: '24px',
      maxHeight: '24px',
      color: '#ffe066'
    }
  };
  var iconStyle = {
    marginRight: '0.5rem'
  };
  var icons = {
    draft: /*#__PURE__*/React__default['default'].createElement(DraftIcon__default['default'], null),
    sample: /*#__PURE__*/React__default['default'].createElement(TestIcon__default['default'], null),
    measurements: /*#__PURE__*/React__default['default'].createElement(MeasurementsIcon__default['default'], null),
    xport: /*#__PURE__*/React__default['default'].createElement(ExportIcon__default['default'], null)
  };
  var links = {
    draft: /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
      id: "cfp.draftThing",
      values: {
        thing: props.config.name
      }
    }),
    sample: /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
      id: "cfp.testThing",
      values: {
        thing: props.config.name
      }
    }),
    measurements: /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
      id: "app.measurements"
    }),
    xport: /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
      id: "app.export"
    })
  };
  return /*#__PURE__*/React__default['default'].createElement("div", {
    style: style.wrapper
  }, /*#__PURE__*/React__default['default'].createElement(AppBar__default['default'], {
    position: "static",
    color: "transparent",
    elevation: 2
  }, /*#__PURE__*/React__default['default'].createElement(Toolbar__default['default'], {
    disableGutters: true
  }, /*#__PURE__*/React__default['default'].createElement("a", {
    role: "button",
    href: "#",
    className: "navlink",
    onClick: function onClick() {
      return props.setDisplay(null);
    }
  }, /*#__PURE__*/React__default['default'].createElement(Logo, null), /*#__PURE__*/React__default['default'].createElement("br", null), /*#__PURE__*/React__default['default'].createElement("span", {
    className: "text"
  }, props.config.name)), /*#__PURE__*/React__default['default'].createElement("span", {
    style: style.spacer
  }), Object.keys(icons).map(function (link) {
    return /*#__PURE__*/React__default['default'].createElement("a", {
      key: link,
      role: "button",
      href: "#".concat(link),
      className: "navlink ".concat(props.display === link ? 'active' : ''),
      onClick: function onClick() {
        return props.setDisplay(link);
      }
    }, icons[link], /*#__PURE__*/React__default['default'].createElement("br", null), /*#__PURE__*/React__default['default'].createElement("span", {
      className: "text"
    }, links[link]));
  }), /*#__PURE__*/React__default['default'].createElement("span", {
    style: style.spacer
  }), /*#__PURE__*/React__default['default'].createElement("a", {
    href: "https://discord.freesewing.org/",
    className: "navlink"
  }, /*#__PURE__*/React__default['default'].createElement(Icon, {
    style: _objectSpread2({}, iconStyle),
    icon: "discord"
  }), /*#__PURE__*/React__default['default'].createElement("br", null), /*#__PURE__*/React__default['default'].createElement("span", {
    className: "text"
  }, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "app.askForHelp"
  }))), /*#__PURE__*/React__default['default'].createElement("a", {
    href: "https://github.com/freesewing/freesewing/tags",
    className: "navlink"
  }, /*#__PURE__*/React__default['default'].createElement(Icon, {
    style: _objectSpread2({}, iconStyle),
    icon: "github"
  }), /*#__PURE__*/React__default['default'].createElement("br", null), /*#__PURE__*/React__default['default'].createElement("span", {
    className: "text"
  }, props.config.version)), /*#__PURE__*/React__default['default'].createElement("a", {
    role: "button",
    href: "#i18n",
    className: "navlink",
    onClick: function onClick() {
      return props.setDisplay('languages');
    }
  }, /*#__PURE__*/React__default['default'].createElement(LanguageIcon__default['default'], null), /*#__PURE__*/React__default['default'].createElement("br", null), /*#__PURE__*/React__default['default'].createElement("span", {
    className: "text"
  }, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "i18n.".concat(props.language)
  }))), /*#__PURE__*/React__default['default'].createElement("a", {
    role: "button",
    href: "#theme",
    className: "navlink theme",
    onClick: props.toggleDarkMode
  }, props.theme === 'dark' ? /*#__PURE__*/React__default['default'].createElement(LightModeIcon__default['default'], {
    tyle: style.icon
  }) : /*#__PURE__*/React__default['default'].createElement(DarkModeIcon__default['default'], {
    tyle: style.darkModeIcon
  }), /*#__PURE__*/React__default['default'].createElement("br", null), /*#__PURE__*/React__default['default'].createElement("span", {
    className: "text"
  }, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "app.".concat(props.theme === 'dark' ? 'dark' : 'light', "Mode")
  }))))));
}

var withLanguage = function withLanguage(WrappedComponent) {
  var lang = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'en';
  var translations = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
  return /*#__PURE__*/function (_React$Component) {
    _inherits(_class, _React$Component);

    var _super = _createSuper(_class);

    function _class(props) {
      var _this;

      _classCallCheck(this, _class);

      _this = _super.call(this, props);
      _this.strings = i18n.strings;
      _this.setLanguage = _this.setLanguage.bind(_assertThisInitialized(_this));
      _this.addTranslations = _this.addTranslations.bind(_assertThisInitialized(_this));
      _this.state = {
        language: lang,
        strings: _this.strings[lang]
      };
      return _this;
    }

    _createClass(_class, [{
      key: "setLanguage",
      value: function setLanguage(l) {
        this.setState({
          language: l,
          strings: this.strings[l]
        });
      }
    }, {
      key: "addTranslations",
      value: function addTranslations(translations) {
        this.setState({
          language: this.state.language,
          strings: _objectSpread2(_objectSpread2({}, this.strings[this.state.language]), translations)
        });
      }
    }, {
      key: "render",
      value: function render() {
        return /*#__PURE__*/React__default['default'].createElement(reactIntl.IntlProvider, {
          locale: this.state.language,
          messages: _objectSpread2(_objectSpread2({}, this.state.strings), translations)
        }, /*#__PURE__*/React__default['default'].createElement(WrappedComponent, _extends({
          language: this.state.language,
          setLanguage: this.setLanguage,
          addTranslations: this.addTranslations
        }, this.props)));
      }
    }]);

    return _class;
  }(React__default['default'].Component);
};

var Svg = function Svg(_ref) {
  var _ref$embed = _ref.embed,
      embed = _ref$embed === void 0 ? true : _ref$embed,
      _ref$design = _ref.design,
      design = _ref$design === void 0 ? false : _ref$design,
      _ref$language = _ref.language,
      language = _ref$language === void 0 ? 'en' : _ref$language,
      _ref$className = _ref.className,
      className = _ref$className === void 0 ? 'freesewing draft' : _ref$className,
      _ref$style = _ref.style,
      style = _ref$style === void 0 ? {} : _ref$style,
      _ref$viewBox = _ref.viewBox,
      viewBox = _ref$viewBox === void 0 ? false : _ref$viewBox,
      width = _ref.width,
      height = _ref.height,
      children = _ref.children;
  var attributes = {
    xmlns: 'http://www.w3.org/2000/svg',
    'xmlns:svg': 'http://www.w3.org/2000/svg',
    xmlnsXlink: 'http://www.w3.org/1999/xlink',
    xmlLang: language,
    viewBox: viewBox || "0 0 ".concat(width, " ").concat(height),
    className: className,
    style: style
  };

  if (!embed) {
    attributes.width = width + 'mm';
    attributes.height = height + 'mm';
  }

  if (design) attributes.className += ' design';
  return /*#__PURE__*/React__default['default'].createElement("svg", attributes, children);
};

var style = " style=\"fill: none; stroke: currentColor;\" ";
var grids = {
  imperial: "\n      <pattern id=\"grid\" height=\"25.4\" width=\"25.4\" patternUnits=\"userSpaceOnUse\" key=\"grid\">\n        <path class=\"gridline lg imperial\" d=\"M 0 0 L 0 25.4 L 25.4 25.4\" ".concat(style, " />\n        <path\n          class=\"gridline lg imperial\"\n          d=\"M 12.7 0 L 12.7 25.4 M 0 12.7 L 25.4 12.7\"\n          ").concat(style, "\n        />\n        <path\n          class=\"gridline sm imperial\"\n          d=\"M 3.175 0 L 3.175 25.4 M 6.32 0 L 6.35 25.4 M 9.525 0 L 9.525 25.4 M 15.875 0 L 15.875 25.4 M 19.05 0 L 19.05 25.4 M 22.225 0 L 22.225 25.4\"\n          ").concat(style, "\n        />\n        <path\n          class=\"gridline sm imperial\"\n          d=\"M 0 3.175 L 25.4 3.175 M 0 6.32 L 25.4 6.35 M 0 9.525 L 25.4 9.525 M 0 15.875 L 25.4 15.875 M 0 19.05 L 25.4 19.05 M 0 22.225 L 25.4 22.225\"\n          ").concat(style, "\n        />\n      </pattern>\n      "),
  metric: "\n      <pattern id=\"grid\" height=\"100\" width=\"100\" patternUnits=\"userSpaceOnUse\" key=\"grid\">\n        <path class=\"gridline lg metric\" d=\"M 0 0 L 0 100 L 100 100\" ".concat(style, " />\n        <path class=\"gridline metric\" d=\"M 50 0 L 50 100 M 0 50 L 100 50\" ").concat(style, " />\n        <path\n          class=\"gridline sm metric\"\n          d=\"M 10 0 L 10 100 M 20 0 L 20 100 M 30 0 L 30 100 M 40 0 L 40 100 M 60 0 L 60 100 M 70 0 L 70 100 M 80 0 L 80 100 M 90 0 L 90 100\"\n          ").concat(style, "\n        />\n        <path\n          class=\"gridline sm metric\"\n          d=\"M 0 10 L 100 10 M 0 20 L 100 20 M 0 30 L 100 30 M 0 40 L 100 40 M 0 60 L 100 60 M 0 70 L 100 70 M 0 80 L 100 80 M 0 90 L 100 90\"\n          ").concat(style, "\n        />\n        <path\n          class=\"gridline xs metric\"\n          d=\"M 5 0 L 5 100 M 15 0 L 15 100 M 25 0 L 25 100 M 35 0 L 35 100 M 45 0 L 45 100 M 55 0 L 55 100 M 65 0 L 65 100 M 75 0 L 75 100 M 85 0 L 85 100 M 95 0 L 95 100\"\n          ").concat(style, "\n        />\n        <path\n          class=\"gridline xs metric\"\n          d=\"M 0 5 L 100 5 M 0 15 L 100 15 M 0 25 L 100 25 M 0 35 L 100 35 M 0 45 L 100 45 M 0 55 L 100 55 M 0 65 L 100 65 M 0 75 L 100 75 M 0 85 L 100 85 M 0 95 L 100 95\"\n          ").concat(style, "\n        />\n      </pattern>\n  ")
};

var Defs = function Defs(props) {
  var defs = props.svg.defs;

  if (props.settings.paperless) {
    defs += grids[props.settings.units || 'metric'];

    for (var p in props.parts) {
      var anchor = {
        x: 0,
        y: 0
      };
      if (typeof props.parts[p].points.gridAnchor !== 'undefined') anchor = props.parts[p].points.gridAnchor;else if (typeof props.parts[p].points.anchor !== 'undefined') anchor = props.parts[p].points.anchor;
      defs += "<pattern id=\"grid-".concat(p, "\" key=\"grid-").concat(p, "\" xlink:href=\"#grid\" x=\"").concat(anchor.x, "\" y=\"").concat(anchor.y, "\" />");
    }
  }

  return /*#__PURE__*/React__default['default'].createElement("defs", {
    dangerouslySetInnerHTML: {
      __html: defs
    }
  });
};

var TextOnPath = function TextOnPath(props) {

  var translated = '';

  var _iterator = _createForOfIteratorHelper(props.path.attributes.getAsArray('data-text')),
      _step;

  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var string = _step.value;
      if (i18n.strings[props.language]['plugin.' + string]) translated += i18n.strings[props.language]['plugin.' + string];else translated += string.toString().replace(/&quot;/g, '"');
      translated += ' ';
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }

  var textPathProps = {
    xlinkHref: '#' + props.pathId,
    startOffset: '0%'
  };
  var align = props.path.attributes.get('data-text-class');
  if (align && align.indexOf('center') > -1) textPathProps.startOffset = '50%';else if (align && align.indexOf('right') > -1) textPathProps.startOffset = '100%';
  return /*#__PURE__*/React__default['default'].createElement("text", null, /*#__PURE__*/React__default['default'].createElement("textPath", textPathProps, /*#__PURE__*/React__default['default'].createElement("tspan", props.path.attributes.asPropsIfPrefixIs('data-text-'), translated)));
};

var DesignPath = function DesignPath(props) {
  var output = [];
  var i = 0;
  var from = null;

  var _iterator = _createForOfIteratorHelper(props.path.ops),
      _step;

  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var op = _step.value;
      var key = props.part + props.name + i;

      if (op.type === 'curve') {
        output.push( /*#__PURE__*/React__default['default'].createElement("path", {
          key: key + 'cp1',
          d: "M ".concat(from.x, ",").concat(from.y, " L ").concat(op.cp1.x, ",").concat(op.cp1.y),
          className: "design path cp"
        }));
        i++;
        output.push( /*#__PURE__*/React__default['default'].createElement("path", {
          key: key + 'cp2',
          d: "M ".concat(op.to.x, ",").concat(op.to.y, " L ").concat(op.cp2.x, ",").concat(op.cp2.y),
          className: "design path cp"
        }));
        i++;
        output.push( /*#__PURE__*/React__default['default'].createElement("circle", {
          key: key + 'cpcirc1',
          cx: op.cp1.x,
          cy: op.cp1.y,
          r: 3.5,
          className: "design path cp"
        }));
        i++;
        output.push( /*#__PURE__*/React__default['default'].createElement("circle", {
          key: key + 'cpcirc2',
          cx: op.cp2.x,
          cy: op.cp2.y,
          r: 3.5,
          className: "design path cp"
        }));
        from = op.to;
      } else if (op.type !== 'close') from = op.to;
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }

  output.push( /*#__PURE__*/React__default['default'].createElement("path", {
    key: props.part + props.name + 'dpath',
    d: props.path.asPathstring(),
    onClick: function onClick() {
      return props.raiseEvent('path', {
        path: props.path,
        name: props.name,
        part: props.part
      });
    },
    className: "design hovertrap"
  }));
  return output;
};

var getProps = function getProps(obj) {
  /** I can't believe it but there seems to be no method on NPM todo this */
  var cssKey = function cssKey(key) {
    var chunks = key.split('-');

    if (chunks.length > 1) {
      key = chunks.shift();

      var _iterator = _createForOfIteratorHelper(chunks),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var s = _step.value;
          key += s.charAt(0).toUpperCase() + s.slice(1);
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }

    return key;
  };

  var convert = function convert(css) {
    var style = {};
    var rules = css.split(';');

    var _iterator2 = _createForOfIteratorHelper(rules),
        _step2;

    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var rule = _step2.value;
        var chunks = rule.split(':');
        if (chunks.length === 2) style[cssKey(chunks[0].trim())] = chunks[1].trim();
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }

    return style;
  };

  var rename = {
    "class": 'className',
    'marker-start': 'markerStart',
    'marker-end': 'markerEnd'
  };
  var props = {};

  for (var key in obj.attributes.list) {
    if (key === 'style') props[key] = convert(obj.attributes.get(key));
    if (Object.keys(rename).indexOf(key) !== -1) props[rename[key]] = obj.attributes.get(key);else if (key !== 'style') props[key] = obj.attributes.get(key);
  }

  return props;
};

var Path = function Path(props) {
  if (!props.path.render) return null;
  var output = [];
  var pathId = 'path-' + props.part + '-' + props.name;
  if (props.design) output.push( /*#__PURE__*/React__default['default'].createElement(DesignPath, _extends({}, props, {
    key: 'dpa-' + props.name
  })));
  output.push( /*#__PURE__*/React__default['default'].createElement("path", _extends({
    id: pathId,
    key: pathId,
    d: props.path.asPathstring()
  }, getProps(props.path))));
  if (props.path.attributes.get('data-text')) output.push( /*#__PURE__*/React__default['default'].createElement(TextOnPath, _extends({
    key: 'text-on-path-' + props.name,
    pathId: pathId
  }, props)));
  return output;
};

var DesignPoint = function DesignPoint(props) {
  return /*#__PURE__*/React__default['default'].createElement("g", {
    className: props.className
  }, /*#__PURE__*/React__default['default'].createElement("circle", {
    cx: props.point.x,
    cy: props.point.y,
    r: "2",
    className: "center"
  }), /*#__PURE__*/React__default['default'].createElement("circle", {
    cx: props.point.x,
    cy: props.point.y,
    r: "7.5",
    className: "hovertrap",
    onClick: function onClick() {
      return props.raiseEvent('point', {
        point: props.point,
        name: props.name,
        part: props.part
      });
    }
  }));
};

var Text = function Text(props) {
  var text = []; // Handle translation

  var translated = '';

  var _iterator = _createForOfIteratorHelper(props.point.attributes.getAsArray('data-text')),
      _step;

  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var string = _step.value;
      if (i18n.strings[props.language]['plugin.' + string]) translated += i18n.strings[props.language]['plugin.' + string];else translated += string.toString().replace(/&quot;/g, '"');
      translated += ' ';
    } // Handle muti-line text

  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }

  if (translated.indexOf('\n') !== -1) {
    var key = 0;
    var lines = translated.split('\n');
    text.push( /*#__PURE__*/React__default['default'].createElement("tspan", {
      key: 'tspan-' + key
    }, lines.shift()));

    var _iterator2 = _createForOfIteratorHelper(lines),
        _step2;

    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var line = _step2.value;
        key++;
        text.push( /*#__PURE__*/React__default['default'].createElement("tspan", {
          key: 'tspan-' + key,
          x: props.point.x,
          dy: props.point.attributes.get('data-text-lineheight') || 12
        }, line.toString().replace(/&quot;/g, '"')));
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }
  } else text.push( /*#__PURE__*/React__default['default'].createElement("tspan", {
    key: "tspan-1"
  }, translated));

  return /*#__PURE__*/React__default['default'].createElement("text", _extends({
    x: props.point.x,
    y: props.point.y
  }, props.point.attributes.asPropsIfPrefixIs('data-text-')), text);
};

var Circle = function Circle(props) {
  return /*#__PURE__*/React__default['default'].createElement("circle", _extends({
    cx: props.point.x,
    cy: props.point.y,
    r: props.point.attributes.get('data-circle')
  }, props.point.attributes.asPropsIfPrefixIs('data-circle-')));
};

var Point = function Point(props) {
  var output = [];
  if (props.design) output.push( /*#__PURE__*/React__default['default'].createElement(DesignPoint, _extends({}, props, {
    key: 'dp-' + props.name,
    className: "design point"
  })));
  if (props.point.attributes && props.point.attributes.get('data-text')) output.push( /*#__PURE__*/React__default['default'].createElement(Text, _extends({}, props, {
    key: 'point-' + props.name
  })));
  if (props.point.attributes && props.point.attributes.get('data-circle')) output.push( /*#__PURE__*/React__default['default'].createElement(Circle, {
    point: props.point,
    key: 'circle-' + props.name
  }));
  return output.length < 1 ? null : output;
};

var Snippet = function Snippet(props) {
  var snippetProps = {
    xlinkHref: '#' + props.snippet.def,
    x: props.snippet.anchor.x,
    y: props.snippet.anchor.y
  };
  var scale = props.snippet.attributes.get('data-scale');
  var rotate = props.snippet.attributes.get('data-rotate');

  if (scale || rotate) {
    snippetProps.transform = '';

    if (scale) {
      snippetProps.transform += "translate(".concat(snippetProps.x, ", ").concat(snippetProps.y, ") ");
      snippetProps.transform += "scale(".concat(scale, ") ");
      snippetProps.transform += "translate(".concat(snippetProps.x * -1, ", ").concat(snippetProps.y * -1, ") ");
    }

    if (rotate) {
      snippetProps.transform += "rotate(".concat(rotate, ", ").concat(snippetProps.x, ", ").concat(snippetProps.y, ") ");
    }
  }

  return /*#__PURE__*/React__default['default'].createElement("use", _extends({}, snippetProps, getProps(props.snippet)));
};

var Part = function Part(props) {
  var focusPoint = function focusPoint(point, i) {
    var p = props.part.points[point];
    var pathString = "M ".concat(p.x, " ").concat(props.part.topLeft.y, " ");
    pathString += "L ".concat(p.x, " ").concat(props.part.bottomRight.y, " ");
    pathString += "M ".concat(props.part.topLeft.x, " ").concat(p.y, " ");
    pathString += "L ".concat(props.part.bottomRight.x, " ").concat(p.y, " ");
    var classes = 'focus point c' + i % 4; // Cycle through 4 CSS classes

    return /*#__PURE__*/React__default['default'].createElement(React__default['default'].Fragment, {
      key: 'fp' + point
    }, /*#__PURE__*/React__default['default'].createElement("path", {
      d: pathString,
      className: classes
    }), /*#__PURE__*/React__default['default'].createElement("circle", {
      cx: p.x,
      cy: p.y,
      r: "5",
      className: classes,
      onClick: function onClick() {
        return props.raiseEvent('clearFocus', {
          part: props.name,
          type: 'points',
          name: point
        });
      }
    }));
  };

  var focusCoords = function focusCoords(p, i) {
    var pathString = "M ".concat(p.x, " ").concat(props.part.topLeft.y, " ");
    pathString += "L ".concat(p.x, " ").concat(props.part.bottomRight.y, " ");
    pathString += "M ".concat(props.part.topLeft.x, " ").concat(p.y, " ");
    pathString += "L ".concat(props.part.bottomRight.x, " ").concat(p.y, " ");
    var classes = 'focus coords c' + i % 4; // Cycle through 4 CSS classes

    return /*#__PURE__*/React__default['default'].createElement(React__default['default'].Fragment, {
      key: 'cp' + i
    }, /*#__PURE__*/React__default['default'].createElement("path", {
      d: pathString,
      className: classes
    }), /*#__PURE__*/React__default['default'].createElement("circle", {
      cx: p.x,
      cy: p.y,
      r: "5",
      className: classes,
      onClick: function onClick() {
        return props.raiseEvent('clearFocus', {
          part: props.name,
          type: 'coords',
          data: p
        });
      }
    }));
  };

  var grid = props.paperless ? /*#__PURE__*/React__default['default'].createElement("rect", {
    x: props.part.topLeft.x,
    y: props.part.topLeft.y,
    width: props.part.width,
    height: props.part.height,
    className: "grid",
    fill: 'url(#grid-' + props.name + ')'
  }) : null;
  var focus = [];

  if (props.design) {
    if (props.focus && typeof props.focus[props.name] !== 'undefined') {
      for (var i in props.focus[props.name].points) {
        focus.push(focusPoint(props.focus[props.name].points[i], i));
      }

      var _loop = function _loop(_i) {
        var name = props.focus[props.name].paths[_i];
        focus.push( /*#__PURE__*/React__default['default'].createElement("path", {
          key: 'fpa-' + name,
          d: props.part.paths[name].asPathstring(),
          className: 'focus path c' + _i % 4,
          onClick: function onClick() {
            return props.raiseEvent('clearFocus', {
              part: props.name,
              type: 'paths',
              name: name
            });
          }
        }));
      };

      for (var _i in props.focus[props.name].paths) {
        _loop(_i);
      }

      for (var _i2 in props.focus[props.name].coords) {
        focus.push(focusCoords(props.focus[props.name].coords[_i2], _i2));
      }
    }
  }

  return /*#__PURE__*/React__default['default'].createElement("g", _extends({}, getProps(props.part), {
    id: "part-".concat(props.name)
  }), grid, Object.keys(props.part.paths).map(function (name) {
    return /*#__PURE__*/React__default['default'].createElement(Path, {
      key: name,
      name: name,
      part: props.name,
      language: props.language,
      path: props.part.paths[name],
      focus: props.focus,
      topLeft: props.part.topLeft,
      bottomRight: props.part.bottomRight,
      design: props.design,
      raiseEvent: props.raiseEvent
    });
  }), Object.keys(props.part.points).map(function (name) {
    return /*#__PURE__*/React__default['default'].createElement(Point, {
      key: name,
      name: name,
      part: props.name,
      language: props.language,
      point: props.part.points[name],
      focus: props.focus,
      topLeft: props.part.topLeft,
      bottomRight: props.part.bottomRight,
      design: props.design,
      raiseEvent: props.raiseEvent
    });
  }), Object.keys(props.part.snippets).map(function (name) {
    return /*#__PURE__*/React__default['default'].createElement(Snippet, {
      key: name,
      name: name,
      snippet: props.part.snippets[name]
    });
  }), focus);
};

var Draft = function Draft(props) {
  return /*#__PURE__*/React__default['default'].createElement(Svg, {
    embed: props.settings.embed,
    width: props.width,
    height: props.height,
    language: props.settings.locale,
    id: props.settings.idPrefix + 'svg',
    design: props.design || false,
    style: props.style || {},
    viewBox: props.viewBox,
    className: props.className || 'freesewing draft'
  }, /*#__PURE__*/React__default['default'].createElement(Defs, props), /*#__PURE__*/React__default['default'].createElement("g", null, Object.keys(props.parts).map(function (name) {
    return /*#__PURE__*/React__default['default'].createElement(Part, {
      part: props.parts[name],
      language: props.settings.locale,
      paperless: props.settings.paperless,
      units: props.settings.units,
      key: name,
      name: name,
      focus: props.focus || false,
      design: props.design || false,
      raiseEvent: props.raiseEvent
    });
  })));
};

var Event = function Event(_ref) {
  var type = _ref.type,
      event = _ref.event;

  var formatError = function formatError(err) {
    return /*#__PURE__*/React__default['default'].createElement("details", null, /*#__PURE__*/React__default['default'].createElement("summary", null, /*#__PURE__*/React__default['default'].createElement(Markdown__default['default'], {
      className: "react-markdown dense"
    }, "\n```js\n".concat(err.name, ": ").concat(err.message, "\n```\n"))), /*#__PURE__*/React__default['default'].createElement(Markdown__default['default'], {
      className: "react-markdown"
    }, "Error in `".concat(err.fileName, "` line `").concat(err.lineNumber, ":").concat(err.columnNumber, "`")), /*#__PURE__*/React__default['default'].createElement(Markdown__default['default'], {
      className: "react-markdown"
    }, "\n```js\n".concat(err.stack, "\n```\n")));
  };

  var formatObject = function formatObject(obj) {
    return /*#__PURE__*/React__default['default'].createElement(Markdown__default['default'], {
      className: "react-markdown"
    }, "\n```json\n".concat(JSON.stringify(obj, null, 2), "\n```\n"));
  };

  var formatEvent = function formatEvent(e) {
    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    if (!data) data = [];

    if (_typeof(e) === 'object') {
      if (e instanceof Error === true) data.push(formatError(e));else if (Array.isArray(e)) {
        var _iterator = _createForOfIteratorHelper(e),
            _step;

        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var subevent = _step.value;
            data.concat(formatEvent(subevent, data));
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
      } else data.push(formatObject(e));
    } else data.push( /*#__PURE__*/React__default['default'].createElement(Markdown__default['default'], {
      className: "react-markdown"
    }, e));

    return data;
  };

  return /*#__PURE__*/React__default['default'].createElement("div", {
    className: "draft-event ".concat(type)
  }, /*#__PURE__*/React__default['default'].createElement("div", {
    className: "icon ".concat(type)
  }, type === 'debug' && /*#__PURE__*/React__default['default'].createElement(DebugIcon__default['default'], {
    fontSize: "small"
  }), type === 'info' && /*#__PURE__*/React__default['default'].createElement(InfoIcon__default['default'], {
    fontSize: "small"
  }), type === 'warning' && /*#__PURE__*/React__default['default'].createElement(WarningIcon__default['default'], {
    fontSize: "small"
  }), type === 'error' && /*#__PURE__*/React__default['default'].createElement(ErrorIcon__default['default'], {
    fontSize: "small"
  })), formatEvent(event));
};

var DraftEvents = function DraftEvents(_ref) {
  var events = _ref.events,
      _ref$types = _ref.types,
      types = _ref$types === void 0 ? ['error', 'warning', 'debug'] : _ref$types;
  return /*#__PURE__*/React__default['default'].createElement("div", {
    className: "draft-events"
  }, types.map(function (type) {
    return /*#__PURE__*/React__default['default'].createElement("div", {
      className: "events-".concat(type),
      key: type
    }, events[type].map(function (event, index) {
      return /*#__PURE__*/React__default['default'].createElement(Event, {
        event: event,
        type: type,
        key: index
      });
    }));
  }));
};

var DraftPattern$1 = function DraftPattern(props) {
  var svgToFile = function svgToFile(svg) {
    var blob = new Blob([svg], {
      type: 'image/svg+xml;charset=utf-8'
    });
    fileSaver__default['default'].saveAs(blob, 'freesewing-' + props.config.name + '.svg');
  };

  if (props.svgExport) {
    svgToFile(new props.Pattern(_objectSpread2(_objectSpread2({}, props.gist.settings), {}, {
      embed: false
    })).use(theme__default['default']).draft().render());
    props.setSvgExport(false);
  }

  if (props.focus !== null) {
    for (var _i = 0, _Object$keys = Object.keys(props.focus); _i < _Object$keys.length; _i++) {
      var p = _Object$keys[_i];

      for (var i in props.focus[p].points) {
      }

      for (var _i2 in props.focus[p].paths) {
      }

      for (var _i3 in props.focus[p].coords) {
      }
    }
  }

  return /*#__PURE__*/React__default['default'].createElement(React__default['default'].Fragment, null, /*#__PURE__*/React__default['default'].createElement(DraftEvents, {
    events: props.patternProps.events,
    types: ['info']
  }), /*#__PURE__*/React__default['default'].createElement(Draft, _extends({}, props.patternProps, {
    design: props.design,
    focus: props.focus,
    raiseEvent: props.raiseEvent,
    viewBox: props.viewBox,
    className: "freesewing draft shadow"
  })), /*#__PURE__*/React__default['default'].createElement(DraftEvents, {
    events: props.patternProps.events
  }));
};

var Zoombox = function Zoombox(props) {
  var _useState = React.useState(false),
      _useState2 = _slicedToArray(_useState, 2),
      from = _useState2[0],
      setFrom = _useState2[1];

  var _useState3 = React.useState(false),
      _useState4 = _slicedToArray(_useState3, 2),
      to = _useState4[0],
      setTo = _useState4[1];

  var _useState5 = React.useState(false),
      _useState6 = _slicedToArray(_useState5, 2),
      dragging = _useState6[0],
      setDragging = _useState6[1];

  var _useState7 = React.useState(1),
      _useState8 = _slicedToArray(_useState7, 2),
      factor = _useState8[0],
      setFactor = _useState8[1];

  var _useState9 = React.useState(false),
      _useState10 = _slicedToArray(_useState9, 2),
      box = _useState10[0],
      setBox = _useState10[1];

  var _useState11 = React.useState(false),
      _useState12 = _slicedToArray(_useState11, 2),
      panning = _useState12[0],
      setPanning = _useState12[1];

  var _useState13 = React.useState(false),
      _useState14 = _slicedToArray(_useState13, 2),
      falseAlarm = _useState14[0],
      setFalseAlarm = _useState14[1];

  var _useState15 = React.useState(false),
      _useState16 = _slicedToArray(_useState15, 2),
      panFrom = _useState16[0],
      setPanFrom = _useState16[1];

  var ref = React.useRef(null);
  React.useEffect(function () {
    var box = ref.current.getBoundingClientRect();
    setBox(box);
    setFactor(props.patternProps.width / box.width);
  }, []);

  var resetZoom = function resetZoom(evt) {
    evt.stopPropagation();
    evt.preventDefault();
    setFrom(false);
    setTo(false);
    setDragging(false);
    props.setViewBox(false);
  };

  var startPan = function startPan(evt) {
    if (!dragging && !panning) {
      evt.stopPropagation();
      evt.preventDefault();
      setPanning(true);
      setPanFrom([evt.clientX, evt.clientY]);
    }
  };

  var endPan = function endPan(evt) {
    if (!dragging && panning) {
      evt.stopPropagation();
      evt.preventDefault();
      setPanning(false);
      setPanFrom(false);
      updateViewBox();
    }
  };

  var handlePan = function handlePan(evt) {
    if (!dragging && panning) {
      evt.stopPropagation();
      evt.preventDefault();

      if (from[0] + (evt.clientX - panFrom[0]) <= -5) ; else if (from[1] + (evt.clientY - panFrom[1]) <= -5) ; else if (to[0] + (evt.clientX - panFrom[0]) >= box.width + 5) ; else if (to[1] + (evt.clientY - panFrom[1]) >= box.height + 5) ; else {
        setPanFrom([evt.clientX, evt.clientY]);
        setFrom([from[0] + (evt.clientX - panFrom[0]), from[1] + (evt.clientY - panFrom[1])]);
        setTo([to[0] + (evt.clientX - panFrom[0]), to[1] + (evt.clientY - panFrom[1])]);
      }
    }
  };

  var handleMouseDown = function handleMouseDown(evt) {
    evt.stopPropagation();
    evt.preventDefault();
    setFrom([evt.clientX - box.x, evt.clientY - box.y]);
    setTo([evt.clientX - box.x, evt.clientY - box.y]);
    setDragging(1);
    setPanning(false);
  };

  var handleMouseUp = function handleMouseUp(evt) {
    if (dragging == 2) {
      updateViewBox();
      if (falseAlarm) setFalseAlarm(false);
    } else {
      setFalseAlarm(true);

      var _box = ref.current.getBoundingClientRect();

      setBox(_box);
      setFactor(props.patternProps.width / _box.width);
    }

    setDragging(false);
    setPanning(false);
    evt.stopPropagation();
    evt.preventDefault();
  };

  var handleMouseMove = function handleMouseMove(evt) {
    if (dragging) {
      evt.stopPropagation();
      evt.preventDefault();
      if (dragging === 1) setDragging(2);
      if (falseAlarm) setFalseAlarm(false);
      setTo([evt.clientX - box.x, evt.clientY - box.y]);
    }
  };

  var updateViewBox = function updateViewBox() {
    props.setViewBox(from[0] * factor + ' ' + from[1] * factor + ' ' + (to[0] - from[0]) * factor + ' ' + (to[1] - from[1]) * factor);
  };

  return /*#__PURE__*/React__default['default'].createElement(React__default['default'].Fragment, null, /*#__PURE__*/React__default['default'].createElement("div", {
    onMouseDown: handleMouseDown,
    onMouseUp: handleMouseUp,
    onMouseMove: handleMouseMove,
    className: "zoombox",
    ref: ref
  }, /*#__PURE__*/React__default['default'].createElement(Draft, props.patternProps), /*#__PURE__*/React__default['default'].createElement("div", {
    className: "mask"
  }), box && from && to && dragging !== 1 && !falseAlarm && /*#__PURE__*/React__default['default'].createElement("div", {
    className: 'box' + (dragging ? ' active' : ' inactive'),
    style: {
      // Remove 16px because of the close icon
      width: to[0] - from[0] - 16 + 'px',
      height: to[1] - from[1] - 16 + 'px',
      left: from[0] + 'px',
      top: from[1] + 'px'
    },
    onMouseDown: startPan,
    onMouseUp: endPan,
    onMouseMove: handlePan
  }, !dragging && /*#__PURE__*/React__default['default'].createElement(IconButton__default['default'], {
    size: "small",
    color: "primary",
    className: "close",
    onMouseDown: resetZoom,
    onMouseUp: resetZoom
  }, /*#__PURE__*/React__default['default'].createElement(ZoomIcon__default['default'], null)))), /*#__PURE__*/React__default['default'].createElement("pre", null, false ));
};

var Design = function Design(props) {
  // Methods
  var renderAttributes = function renderAttributes(attr) {
    var list = [];

    for (var a in attr.list) {
      list.push( /*#__PURE__*/React__default['default'].createElement("li", {
        key: a
      }, /*#__PURE__*/React__default['default'].createElement("b", null, a), ": ", renderAttributeValue(attr.list[a])));
    }

    return /*#__PURE__*/React__default['default'].createElement("ul", null, list);
  };

  var renderAttributeValue = function renderAttributeValue(val) {
    if (Array.isArray(val)) {
      if (val.length === 1) return val.pop();
      var list = [];

      var _iterator = _createForOfIteratorHelper(val),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var v = _step.value;
          list.push( /*#__PURE__*/React__default['default'].createElement("li", {
            key: v
          }, v));
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }

      return /*#__PURE__*/React__default['default'].createElement("ul", null, list);
    }

    return val;
  };

  var round = function round(val) {
    return Math.round(val * 10) / 10;
  };

  if (!props.design || props.focus === null || Object.keys(props.focus).length < 1) return null;
  var info = [];

  var _loop = function _loop() {
    var part = _Object$keys[_i];
    var points = [];
    var paths = [];

    var _loop2 = function _loop2(i) {
      var name = props.focus[part].paths[i];
      var path = props.parts[part].paths[name];
      paths.push( /*#__PURE__*/React__default['default'].createElement("li", {
        key: 'patitle-' + name,
        className: 'path c' + i % 4
      }, "path.", /*#__PURE__*/React__default['default'].createElement("b", null, name), /*#__PURE__*/React__default['default'].createElement(IconButton__default['default'], {
        size: "small",
        onClick: function onClick() {
          return console.log("parts.".concat(part, ".paths.").concat(name, ":"), path);
        }
      }, /*#__PURE__*/React__default['default'].createElement(CameraIcon__default['default'], null)), path.attributes.length > 0 && /*#__PURE__*/React__default['default'].createElement("ul", {
        key: 'ops-' + name
      }, /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("b", null, "attributes"), ": ", renderAttributes(path.attributes)))));
    };

    for (var i in props.focus[part].paths) {
      _loop2(i);
    }

    var _loop3 = function _loop3(_i2) {
      var name = props.focus[part].points[_i2];
      var point = props.parts[part].points[name];
      points.push( /*#__PURE__*/React__default['default'].createElement("li", {
        key: 'potitle-' + name,
        className: 'point c' + _i2 % 4
      }, "point.", /*#__PURE__*/React__default['default'].createElement("b", null, name), /*#__PURE__*/React__default['default'].createElement(IconButton__default['default'], {
        size: "small",
        onClick: function onClick() {
          return console.log("parts.".concat(part, ".points.").concat(name, ":"), point);
        }
      }, /*#__PURE__*/React__default['default'].createElement(CameraIcon__default['default'], null)), /*#__PURE__*/React__default['default'].createElement("ul", {
        key: 'pdata-' + name
      }, /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("b", null, "x"), ": ", round(point.x)), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("b", null, "y"), ": ", round(point.y)), point.attributes.length > 0 && /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("b", null, "attributes"), ": ", renderAttributes(point.attributes)))));
    };

    for (var _i2 in props.focus[part].points) {
      _loop3(_i2);
    }

    info.push( /*#__PURE__*/React__default['default'].createElement("li", {
      key: 'part-' + part
    }, "parts.", /*#__PURE__*/React__default['default'].createElement("b", null, part), /*#__PURE__*/React__default['default'].createElement(IconButton__default['default'], {
      onClick: function onClick() {
        return props.raiseEvent('part', part);
      }
    }, /*#__PURE__*/React__default['default'].createElement(IsolateIcon__default['default'], null)), points.length > 0 && /*#__PURE__*/React__default['default'].createElement("ul", null, points), paths.length > 0 && /*#__PURE__*/React__default['default'].createElement("ul", null, paths)));
  };

  for (var _i = 0, _Object$keys = Object.keys(props.focus); _i < _Object$keys.length; _i++) {
    _loop();
  }

  return /*#__PURE__*/React__default['default'].createElement("div", {
    className: "design"
  }, /*#__PURE__*/React__default['default'].createElement("ul", null, info));
};

var PaddedSlider = styles.withStyles({
  container: {
    padding: '25px 0'
  },
  track: {
    height: '4px'
  },
  thumb: {
    width: '16px',
    height: '16px'
  }
})(Slider__default['default']);

var FormFieldSlider = function FormFieldSlider(_ref) {
  var _ref$min = _ref.min,
      min = _ref$min === void 0 ? 0 : _ref$min,
      _ref$max = _ref.max,
      max = _ref$max === void 0 ? 100 : _ref$max,
      _ref$step = _ref.step,
      step = _ref$step === void 0 ? 0.1 : _ref$step,
      _ref$label = _ref.label,
      label = _ref$label === void 0 ? false : _ref$label,
      updateValue = _ref.updateValue,
      name = _ref.name,
      value = _ref.value;

  var _useState = React.useState(value),
      _useState2 = _slicedToArray(_useState, 2),
      val = _useState2[0],
      setVal = _useState2[1];

  React.useEffect(function () {
    if (value !== val) setVal(value);
  }, [value]);

  var update = function update(evt, newValue) {
    updateValue(name, newValue, evt);
    setVal(newValue);
  };

  return /*#__PURE__*/React__default['default'].createElement(PaddedSlider, {
    value: val,
    min: min,
    max: max,
    step: step,
    onChange: update,
    onChangeCommitted: update,
    classes: {
      track: 'slider-track',
      thumb: 'slider-thumb'
    },
    "aria-labelledby": label
  });
};

var OptionPreamble = function OptionPreamble(_ref) {
  var intl = _ref.intl,
      title = _ref.title,
      desc = _ref.desc,
      dflt = _ref.dflt,
      designDflt = _ref.designDflt,
      option = _ref.option,
      value = _ref.value,
      displayValue = _ref.displayValue,
      _ref$displayFormat = _ref.displayFormat,
      displayFormat = _ref$displayFormat === void 0 ? 'node' : _ref$displayFormat,
      sameButDifferent = _ref.sameButDifferent,
      expanded = _ref.expanded,
      toggleExpanded = _ref.toggleExpanded,
      reset = _ref.reset,
      designReset = _ref.designReset;
  var styles = {
    container: {
      display: 'flex',
      flexDirection: 'row',
      alignItems: 'center'
    },
    left: {
      flexGrow: 1,
      margin: '0 0.5rem'
    },
    right: {
      margin: '0 5px 0 0 ',
      textAlign: 'right'
    }
  };
  var resetLabel = intl.formatMessage({
    id: 'app.restoreDefaults',
    defaultMessage: '   '
  });
  var resetDesignLabel = intl.formatMessage({
    id: 'app.restoreDesignDefaults',
    defaultMessage: '   '
  });
  var resetPatternLabel = intl.formatMessage({
    id: 'app.restorePatternDefaults',
    defaultMessage: '   '
  });
  var pattern = false;
  if (dflt !== designDflt) pattern = true;
  var displayClass = value === dflt ? 'dflt' : 'custom';
  if (pattern && value === designDflt) displayClass = 'p-dflt';else if (pattern && sameButDifferent) displayClass = 'custom';
  var dspValue = /*#__PURE__*/React__default['default'].createElement("span", {
    className: displayClass
  }, displayValue);
  if (displayFormat === 'html') dspValue = /*#__PURE__*/React__default['default'].createElement("span", {
    className: displayClass,
    dangerouslySetInnerHTML: {
      __html: displayValue
    }
  });
  return /*#__PURE__*/React__default['default'].createElement(React__default['default'].Fragment, null, /*#__PURE__*/React__default['default'].createElement("div", {
    onClick: toggleExpanded,
    style: styles.container
  }, /*#__PURE__*/React__default['default'].createElement("div", {
    style: styles.left
  }, /*#__PURE__*/React__default['default'].createElement(RightIcon__default['default'], {
    className: 'icon-col-exp ' + (expanded ? 'expanded' : 'collapsed')
  }), title), /*#__PURE__*/React__default['default'].createElement("div", {
    style: styles.right
  }, dspValue)), /*#__PURE__*/React__default['default'].createElement("div", {
    className: expanded ? 'col-exp expanded' : 'col-exp collapsed'
  }, /*#__PURE__*/React__default['default'].createElement("div", {
    style: styles.container
  }, /*#__PURE__*/React__default['default'].createElement("div", {
    style: styles.left
  }, /*#__PURE__*/React__default['default'].createElement("p", null, desc)), /*#__PURE__*/React__default['default'].createElement("div", {
    style: styles.right
  }, pattern ? /*#__PURE__*/React__default['default'].createElement(IconButton__default['default'], {
    title: resetDesignLabel,
    "aria-label": resetDesignLabel,
    color: "primary",
    disabled: value === designDflt ? true : false,
    onClick: designReset,
    className: "mini-icon-btn pattern"
  }, /*#__PURE__*/React__default['default'].createElement(ResetIcon__default['default'], null)) : null, /*#__PURE__*/React__default['default'].createElement(IconButton__default['default'], {
    title: pattern ? resetPatternLabel : resetLabel,
    "aria-label": pattern ? resetPatternLabel : resetLabel,
    color: "primary",
    disabled: value === dflt && !sameButDifferent ? true : false,
    onClick: reset,
    className: 'mini-icon-btn' + (pattern ? ' pattern' : '')
  }, /*#__PURE__*/React__default['default'].createElement(ResetIcon__default['default'], null)))), option));
};

var OptionPreamble$1 = reactIntl.injectIntl(OptionPreamble);

var PatternOptionPctDegCount = function PatternOptionPctDegCount(_ref) {
  var _ref$min = _ref.min,
      min = _ref$min === void 0 ? 0 : _ref$min,
      _ref$max = _ref.max,
      max = _ref$max === void 0 ? 100 : _ref$max,
      _ref$step = _ref.step,
      step = _ref$step === void 0 ? 0.1 : _ref$step,
      _ref$type = _ref.type,
      type = _ref$type === void 0 ? 'pct' : _ref$type,
      updateValue = _ref.updateValue,
      name = _ref.name,
      dflt = _ref.dflt,
      designDflt = _ref.designDflt,
      title = _ref.title,
      desc = _ref.desc,
      value = _ref.value,
      raiseEvent = _ref.raiseEvent,
      noDocs = _ref.noDocs;
  var factor = 1;
  if (type === 'pct') factor = 100;

  var round = function round(val) {
    return Math.round(val * 10) / 10;
  };

  var _useState = React.useState(value === null ? dflt : round(value * factor)),
      _useState2 = _slicedToArray(_useState, 2),
      val = _useState2[0],
      setVal = _useState2[1];

  var _useState3 = React.useState(value === null ? dflt : round(value * factor)),
      _useState4 = _slicedToArray(_useState3, 2);
      _useState4[0];
      _useState4[1];

  var _useState5 = React.useState(false),
      _useState6 = _slicedToArray(_useState5, 2),
      expanded = _useState6[0],
      setExpanded = _useState6[1];

  var update = function update(name, newValue, evt) {
    newValue = round(newValue); // Sometimes, when sliding, the rapid succession of updates
    // causes a weird timing issue to result in a value that is NaN.
    // If that's the case, just ignore this update and keep the
    // previous one instead

    if (!isNaN(newValue)) {
      setVal(newValue);
      if (evt.type !== 'mousemove') updateValue(name, newValue / factor);
    } else {
      if (evt.type !== 'mousemove') updateValue(name, value / factor);
    }
  };

  var reset = function reset() {
    setVal(dflt);
    updateValue(name, dflt / factor);
  };

  var patternReset = function patternReset() {
    setVal(designDflt);
    updateValue(name, designDflt / factor);
  };

  var toggleExpanded = function toggleExpanded() {
    return setExpanded(!expanded);
  };

  var unit = '';
  if (type === 'pct') unit = '%';
  if (type === 'deg') unit = '';
  var option = /*#__PURE__*/React__default['default'].createElement(FormFieldSlider, {
    name: name,
    value: val,
    min: min,
    max: max,
    step: type === 'count' ? 1 : step,
    onChange: update,
    label: 'po-' + type + '-' + name,
    updateValue: update
  });
  return /*#__PURE__*/React__default['default'].createElement("li", {
    className: expanded ? 'expanded' : 'collapsed'
  }, /*#__PURE__*/React__default['default'].createElement(OptionPreamble$1, {
    dflt: dflt,
    designDflt: designDflt,
    value: val,
    desc: desc,
    title: title,
    id: 'po-' + type + '-' + name,
    displayValue: val + unit,
    reset: reset,
    patternReset: patternReset,
    toggleExpanded: toggleExpanded,
    expanded: expanded,
    showHelp: function showHelp() {
      return raiseEvent('showHelp', {
        type: 'patternOption',
        value: name
      });
    },
    option: option,
    noDocs: noDocs
  }));
};

var Pct = (function (props) {
  return /*#__PURE__*/React__default['default'].createElement(PatternOptionPctDegCount, _extends({}, props, {
    type: "pct"
  }));
});

var Deg = (function (props) {
  return /*#__PURE__*/React__default['default'].createElement(PatternOptionPctDegCount, _extends({}, props, {
    type: "deg"
  }));
});

var PatternOptionMillimeter = function PatternOptionMillimeter(_ref) {
  var _ref$title = _ref.title,
      title = _ref$title === void 0 ? false : _ref$title,
      _ref$desc = _ref.desc,
      desc = _ref$desc === void 0 ? false : _ref$desc,
      _ref$units = _ref.units,
      units = _ref$units === void 0 ? 'metric' : _ref$units,
      _ref$min = _ref.min,
      min = _ref$min === void 0 ? 0 : _ref$min,
      _ref$max = _ref.max,
      max = _ref$max === void 0 ? 100 : _ref$max,
      updateValue = _ref.updateValue,
      name = _ref.name,
      dflt = _ref.dflt,
      value = _ref.value,
      raiseEvent = _ref.raiseEvent,
      noDocs = _ref.noDocs;

  var _useState = React.useState(value === null ? dflt : value),
      _useState2 = _slicedToArray(_useState, 2),
      val = _useState2[0],
      setVal = _useState2[1];

  var _useState3 = React.useState(dflt),
      _useState4 = _slicedToArray(_useState3, 2);
      _useState4[0];
      _useState4[1];

  var _useState5 = React.useState(false),
      _useState6 = _slicedToArray(_useState5, 2),
      expanded = _useState6[0],
      setExpanded = _useState6[1];

  var update = function update(name, newValue, evt) {
    newValue = roundMm__default['default'](newValue, units); // Sometimes, when sliding, the rapid succession of updates
    // causes a weird timing issue to result in a value that is NaN.
    // If that's the case, just ignore this update and keep the
    // previous one instead

    if (!isNaN(newValue)) {
      setVal(newValue);
      if (evt.type !== 'mousemove') updateValue(name, newValue);
    } else {
      if (evt.type !== 'mousemove') updateValue(name, val);
    }
  };

  var reset = function reset() {
    setVal(dflt);
    updateValue(name, dflt);
  };

  var toggleExpanded = function toggleExpanded() {
    return setExpanded(!expanded);
  };

  var option = /*#__PURE__*/React__default['default'].createElement(FormFieldSlider, {
    name: name,
    value: val,
    min: roundMmUp__default['default'](min, units),
    max: roundMmDown__default['default'](max, units),
    step: sliderStep__default['default'][units],
    onChange: update,
    label: 'po-mm-' + name,
    updateValue: update
  });
  return /*#__PURE__*/React__default['default'].createElement("li", {
    className: expanded ? 'expanded' : 'collapsed'
  }, /*#__PURE__*/React__default['default'].createElement(OptionPreamble$1, {
    dflt: dflt,
    value: val,
    desc: desc,
    title: title,
    id: 'po-mm-' + name,
    displayValue: formatMm__default['default'](val, units),
    displayFormat: "html",
    reset: reset,
    toggleExpanded: toggleExpanded,
    expanded: expanded,
    showHelp: function showHelp() {
      return raiseEvent('showHelp', {
        type: 'patternOption',
        value: name
      });
    },
    option: option,
    noDocs: noDocs
  }));
};

var Bool = function Bool(_ref) {
  var _ref$dflt = _ref.dflt,
      dflt = _ref$dflt === void 0 ? false : _ref$dflt,
      _ref$labels = _ref.labels,
      labels = _ref$labels === void 0 ? ['false', 'true'] : _ref$labels,
      value = _ref.value,
      name = _ref.name,
      updateValue = _ref.updateValue;

  var _useState = React.useState(dflt),
      _useState2 = _slicedToArray(_useState, 2),
      val = _useState2[0],
      setVal = _useState2[1];

  React.useEffect(function () {
    if (value !== val) setVal(value);
  }, [value]);

  var toggle = function toggle() {
    updateValue(name, !val);
    setVal(!val);
  };

  return /*#__PURE__*/React__default['default'].createElement(RadioGroup__default['default'], {
    onChange: toggle,
    value: JSON.stringify(val)
  }, /*#__PURE__*/React__default['default'].createElement(FormControlLabel__default['default'], {
    control: /*#__PURE__*/React__default['default'].createElement(Radio__default['default'], {
      color: "primary"
    }),
    value: "false",
    checked: val === 'true' || val === true || val === 1 ? false : true,
    label: labels[0],
    className: "po-list-item"
  }), /*#__PURE__*/React__default['default'].createElement(FormControlLabel__default['default'], {
    control: /*#__PURE__*/React__default['default'].createElement(Radio__default['default'], {
      color: "primary"
    }),
    value: "true",
    checked: val === 'true' || val === true || val === 1 ? true : false,
    label: labels[1],
    className: "po-list-item"
  }));
};

var PatternOptionBool = function PatternOptionBool(props) {
  var _useState = React.useState(props.value === null ? props.dflt : props.value),
      _useState2 = _slicedToArray(_useState, 2),
      value = _useState2[0],
      setValue = _useState2[1];

  var _useState3 = React.useState(false),
      _useState4 = _slicedToArray(_useState3, 2),
      expanded = _useState4[0],
      setExpanded = _useState4[1];

  var update = function update(name, newValue, evt) {
    props.updateValue(props.name, newValue);
    setValue(newValue);
  };

  var reset = function reset() {
    setValue(props.dflt);
    props.updateValue(props.name, props.dflt);
  };

  var patternReset = function patternReset() {
    setValue(props.designDflt);
    props.updateValue(props.name, props.designDflt);
  };

  var toggleExpanded = function toggleExpanded() {
    return setExpanded(!expanded);
  };

  var option = /*#__PURE__*/React__default['default'].createElement(Bool, {
    name: props.name,
    value: value,
    dflt: props.dflt,
    onChange: update,
    label: 'po-bool-' + props.name,
    updateValue: update,
    labels: props.labels
  });
  return /*#__PURE__*/React__default['default'].createElement("li", {
    className: expanded ? 'expanded' : 'collapsed'
  }, /*#__PURE__*/React__default['default'].createElement(OptionPreamble$1, {
    dflt: props.dflt,
    designDflt: props.designDflt,
    value: value,
    desc: props.desc,
    title: props.title,
    id: 'po-list-' + props.name,
    displayValue: value ? props.labels[1] : props.labels[0],
    toggleExpanded: toggleExpanded,
    expanded: expanded,
    reset: reset,
    patternReset: patternReset,
    showHelp: function showHelp() {
      return props.raiseEvent('showHelp', {
        type: 'draftSetting',
        value: props.name
      });
    },
    option: option,
    noDocs: props.noDocs
  }));
};

var FormFieldList = function FormFieldList(props) {
  var _useState = React.useState(props.dflt),
      _useState2 = _slicedToArray(_useState, 2),
      value = _useState2[0],
      setValue = _useState2[1];

  React.useEffect(function () {
    if (props.value !== value) setValue(props.value);
  }, [props.value]);

  var update = function update(evt) {
    props.updateValue(props.name, evt.target.value);
    setValue(evt.target.value);
  };

  return /*#__PURE__*/React__default['default'].createElement(RadioGroup__default['default'], {
    onChange: update,
    value: value
  }, Object.keys(props.list).map(function (item, index) {
    return /*#__PURE__*/React__default['default'].createElement(FormControlLabel__default['default'], {
      key: item,
      control: /*#__PURE__*/React__default['default'].createElement(Radio__default['default'], {
        color: "primary"
      }),
      value: item,
      checked: value === item ? true : false,
      label: props.list[item],
      className: "po-list-item"
    });
  }));
};

var PatternOptionList = function PatternOptionList(props) {
  var _useState = React.useState(props.dflt),
      _useState2 = _slicedToArray(_useState, 2),
      value = _useState2[0],
      setValue = _useState2[1];

  var _useState3 = React.useState(false),
      _useState4 = _slicedToArray(_useState3, 2),
      expanded = _useState4[0],
      setExpanded = _useState4[1];

  var update = function update(name, newValue, evt) {
    props.updateValue(props.name, newValue);
    setValue(newValue);
  };

  var reset = function reset() {
    setValue(props.dflt);
    props.updateValue(props.name, props.dflt);
  };

  var patternReset = function patternReset() {
    setValue(props.designDflt);
    props.updateValue(props.name, props.designDflt);
  };

  var toggleExpanded = function toggleExpanded() {
    return setExpanded(!expanded);
  }; // Add translations


  var stringKey = "options.".concat(props.pattern, ".").concat(props.name, ".options.");
  var list = {};

  var _iterator = _createForOfIteratorHelper(props.list),
      _step;

  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var item = _step.value;
      list[item] = props.intl.formatMessage({
        id: stringKey + item,
        defaultMessage: item
      });
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }

  var option = /*#__PURE__*/React__default['default'].createElement(FormFieldList, {
    name: props.name,
    value: value,
    dflt: props.dflt,
    designDflt: props.designDflt,
    onChange: update,
    label: 'po-list-' + props.name,
    updateValue: update,
    list: list
  });
  return /*#__PURE__*/React__default['default'].createElement("li", {
    className: expanded ? 'expanded' : 'collapsed'
  }, /*#__PURE__*/React__default['default'].createElement(OptionPreamble$1, {
    dflt: props.dflt,
    value: value,
    desc: props.desc,
    title: props.title,
    id: 'po-list-' + props.name,
    displayValue: list[value],
    reset: reset,
    patternReset: patternReset,
    toggleExpanded: toggleExpanded,
    expanded: expanded,
    showHelp: function showHelp() {
      return props.raiseEvent('showHelp', {
        type: 'patternOption',
        value: props.name
      });
    },
    option: option,
    noDocs: props.noDocs
  }));
};

var Count = (function (props) {
  return /*#__PURE__*/React__default['default'].createElement(PatternOptionPctDegCount, _extends({}, props, {
    type: "count"
  }));
});

var OptionSubGroup = function OptionSubGroup(_ref) {
  var title = _ref.title,
      children = _ref.children;

  var _useState = React.useState(false),
      _useState2 = _slicedToArray(_useState, 2),
      open = _useState2[0],
      setOpen = _useState2[1];

  return /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("span", {
    className: "subheading",
    onClick: function onClick() {
      return setOpen(!open);
    }
  }, /*#__PURE__*/React__default['default'].createElement(RightIcon__default['default'], {
    className: "icon-col-exp ".concat(open ? 'expanded' : '')
  }), title), open && /*#__PURE__*/React__default['default'].createElement("ul", {
    className: "config level-3"
  }, children));
};

var OptionGroup$2 = function OptionGroup(props) {
  var renderOption = function renderOption(name) {
    var option = props.config.options[name];
    var type = optionType__default['default'](option);
    var stringKey = "options.".concat(props.config.name, ".").concat(name, ".");
    var extraProps = {
      name: name,
      dflt: optionDefault__default['default'](name, props.config.options[name], props.pattern),
      designDflt: optionDefault__default['default'](name, props.config.options[name]),
      units: props.units,
      updateValue: props.updateValue,
      raiseEvent: props.raiseEvent,
      title: /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
        id: stringKey + 'title'
      }),
      desc: /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
        id: stringKey + 'description'
      }),
      intl: props.intl,
      pattern: props.config.name,
      key: name,
      noDocs: props.noDocs
    };
    if (typeof props.data !== 'undefined' && typeof props.data.settings !== 'undefined' && typeof props.data.settings.options !== 'undefined' && typeof props.data.settings.options[name] !== 'undefined') extraProps.value = props.data.settings.options[name];else extraProps.value = null;
    var noyes = [/*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
      id: "app.no"
    }), /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
      id: "app.yes"
    })];

    switch (type) {
      case 'pct':
        return /*#__PURE__*/React__default['default'].createElement(Pct, _extends({}, option, extraProps));

      case 'deg':
        return /*#__PURE__*/React__default['default'].createElement(Deg, _extends({}, option, extraProps));

      case 'mm':
        return /*#__PURE__*/React__default['default'].createElement(PatternOptionMillimeter, _extends({}, option, extraProps, {
          units: props.units
        }));

      case 'bool':
        return /*#__PURE__*/React__default['default'].createElement(PatternOptionBool, _extends({}, option, extraProps, {
          labels: noyes
        }));

      case 'list':
        return /*#__PURE__*/React__default['default'].createElement(PatternOptionList, _extends({}, option, extraProps));

      case 'count':
        return /*#__PURE__*/React__default['default'].createElement(Count, _extends({}, option, extraProps));

      default:
        throw new Error('Unsupported option type: ' + type);
    }
  };

  return /*#__PURE__*/React__default['default'].createElement(React__default['default'].Fragment, null, props.options.map(function (name) {
    var output = [];

    if (_typeof(name) === 'object') {
      // Subgroup
      for (var _i = 0, _Object$keys = Object.keys(name); _i < _Object$keys.length; _i++) {
        var subGroup = _Object$keys[_i];
        var children = [];

        var _iterator = _createForOfIteratorHelper(name[subGroup]),
            _step;

        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var option = _step.value;
            children.push(renderOption(option, true));
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }

        output.push( /*#__PURE__*/React__default['default'].createElement(OptionSubGroup, {
          title: /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
            id: 'optiongroups.' + subGroup
          }),
          children: children,
          key: subGroup
        }));
      }
    } else output.push(renderOption(name));

    return output;
  }));
};

var OptionGroup$3 = reactIntl.injectIntl(OptionGroup$2);

var PatternOptions$1 = function PatternOptions(props) {
  var _useState = React.useState([]),
      _useState2 = _slicedToArray(_useState, 2),
      expanded = _useState2[0],
      setExpanded = _useState2[1];

  var toggleGroup = function toggleGroup(group) {
    var shown = expanded.slice(0);
    var index = shown.indexOf(group);
    if (index === -1) shown.push(group);else shown.splice(index, 1);
    setExpanded(shown);
  };

  var renderGroup = function renderGroup(group) {
    var open = true;
    if (expanded.indexOf(group) === -1) open = false;
    var output = [];
    var children = null;
    if (expanded.indexOf(group) !== -1) children = /*#__PURE__*/React__default['default'].createElement("ul", {
      className: "config level-2"
    }, /*#__PURE__*/React__default['default'].createElement(OptionGroup$3, {
      noDocs: props.noDocs,
      key: group + '-group',
      units: props.units,
      config: props.config,
      data: props.data,
      pattern: props.pattern,
      options: props.config.optionGroups[group],
      updateValue: props.updateValue,
      raiseEvent: props.raiseEvent
    }));
    output.push( /*#__PURE__*/React__default['default'].createElement("li", {
      className: open ? 'expanded' : 'collapsed',
      key: group + '-ghead'
    }, /*#__PURE__*/React__default['default'].createElement("span", {
      onClick: function onClick() {
        return toggleGroup(group);
      }
    }, /*#__PURE__*/React__default['default'].createElement(RightIcon__default['default'], {
      className: 'icon-col-exp ' + (open ? 'expanded' : 'collapsed')
    }), /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
      id: 'optiongroups.' + group
    })), children));
    return output;
  };

  var children = [];

  for (var group in props.config.optionGroups) {
    if (props.data.settings.advanced || group !== 'advanced') {
      children.push(renderGroup(group));
    }
  }

  return /*#__PURE__*/React__default['default'].createElement("ul", {
    className: "config level-1"
  }, children);
};

var DraftSettingSa = function DraftSettingSa(props) {
  var _useState = React.useState(props.value === defaultSa__default['default'][props.units] ? 'dflt' : props.value === 0 ? 'none' : 'custom'),
      _useState2 = _slicedToArray(_useState, 2),
      value = _useState2[0],
      setValue = _useState2[1];

  var _useState3 = React.useState(props.value === null ? defaultSa__default['default'][props.units] : props.value),
      _useState4 = _slicedToArray(_useState3, 2),
      saValue = _useState4[0],
      setSaValue = _useState4[1];

  var _useState5 = React.useState(value === 'custom' ? props.value : 10),
      _useState6 = _slicedToArray(_useState5, 2),
      customValue = _useState6[0],
      setCustomValue = _useState6[1];

  var _useState7 = React.useState(false),
      _useState8 = _slicedToArray(_useState7, 2),
      expanded = _useState8[0],
      setExpanded = _useState8[1];

  var update = function update(name, newValue, evt) {
    switch (newValue) {
      case 'none':
        props.updateValue('sa', 0);
        setValue(newValue);
        setSaValue(0);
        break;

      case 'dflt':
        props.updateValue('sa', defaultSa__default['default'][props.units]);
        setValue(newValue);
        setSaValue(defaultSa__default['default'][props.units]);
        break;

      default:
        props.updateValue('sa', customValue);
        setValue(newValue);
        setSaValue(customValue);
        break;
    }
  };

  var saDfltToggle = 'dflt';
  if (props.dflt === 0) saDfltToggle = 'none';
  if (props.dflt !== 10) saDfltToggle = 'custom';

  var reset = function reset() {
    setValue(saDfltToggle);
    setSaValue(props.dflt);
    props.updateValue('sa', props.dflt);
  };

  var patternReset = function patternReset() {
    setValue('dflt');
    setSaValue(defaultSa__default['default'][props.units]);
    props.updateValue('sa', defaultSa__default['default'][props.units]);
  };

  var toggleExpanded = function toggleExpanded() {
    return setExpanded(!expanded);
  };

  var updateCustom = function updateCustom(name, newValue, evt) {
    newValue = roundMm__default['default'](newValue); // Sometimes, when sliding, the rapid succession of updates
    // causes a weird timing issue to result in a value that is NaN.
    // If that's the case, just ignore this update and keep the
    // previous one instead

    if (!isNaN(newValue)) {
      setSaValue(newValue);
      setCustomValue(newValue);
      if (evt.type !== 'mousemove') props.updateValue('sa', newValue);
    } else {
      props.updateValue('sa', customValue);
    }
  };

  var list = {
    none: props.labels.none,
    dflt: props.labels.dflt,
    custom: props.labels.custom
  };
  var option = /*#__PURE__*/React__default['default'].createElement(FormFieldList, {
    name: "sa",
    value: value,
    dflt: 'dflt',
    onChange: update,
    label: "po-bool-sa",
    updateValue: update,
    list: list
  });
  if (value === 'custom') option = /*#__PURE__*/React__default['default'].createElement(React__default['default'].Fragment, null, option, /*#__PURE__*/React__default['default'].createElement(FormFieldSlider, {
    name: "customSa",
    value: saValue,
    dflt: defaultSa__default['default'][props.units],
    label: "po-bool-sa",
    updateValue: updateCustom,
    min: 0,
    max: 25.4,
    step: sliderStep__default['default'][props.units]
  }));
  return /*#__PURE__*/React__default['default'].createElement("li", {
    className: expanded ? 'expanded' : 'collapsed'
  }, /*#__PURE__*/React__default['default'].createElement(OptionPreamble$1, {
    dflt: saDfltToggle,
    designDflt: 'dflt',
    sameButDifferent: props.dflt !== props.value,
    value: value,
    desc: props.desc,
    title: props.title,
    id: "po-list-sa",
    displayValue: formatMm__default['default'](saValue, props.units),
    displayFormat: "html",
    reset: reset,
    patternReset: patternReset,
    toggleExpanded: toggleExpanded,
    expanded: expanded,
    showHelp: function showHelp() {
      return props.raiseEvent('showHelp', {
        type: 'draftSetting',
        value: 'sa'
      });
    },
    option: option,
    noDocs: props.noDocs
  }));
};

var DraftSettingMargin = function DraftSettingMargin(props) {
  var _useState = React.useState(props.value === null ? props.dflt : props.value),
      _useState2 = _slicedToArray(_useState, 2),
      value = _useState2[0],
      setValue = _useState2[1];

  var _useState3 = React.useState(false),
      _useState4 = _slicedToArray(_useState3, 2),
      expanded = _useState4[0],
      setExpanded = _useState4[1];

  var update = function update(name, newValue, evt) {
    newValue = roundMm__default['default'](newValue); // Sometimes, when sliding, the rapid succession of updates
    // causes a weird timing issue to result in a value that is NaN.
    // If that's the case, just ignore this update and keep the
    // previous one instead

    if (!isNaN(newValue)) {
      setValue(newValue);
      if (evt.type !== 'mousemove') props.updateValue('margin', newValue);
    } else {
      props.updateValue('margin', value);
    }
  };

  var reset = function reset() {
    setValue(props.dflt);
    props.updateValue('margin', props.dflt);
  };

  var patternReset = function patternReset() {
    setValue(props.designDflt);
    props.updateValue('margin', props.designDflt);
  };

  var toggleExpanded = function toggleExpanded() {
    return setExpanded(!expanded);
  };

  var option = /*#__PURE__*/React__default['default'].createElement(FormFieldSlider, {
    name: "customSa",
    value: value,
    dflt: props.dflt,
    label: "po-slider-margin",
    updateValue: update,
    min: 0,
    max: 25.4,
    step: sliderStep__default['default'][props.units]
  });
  return /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement(OptionPreamble$1, {
    dflt: props.dflt,
    designDflt: props.designDflt,
    value: value,
    desc: props.desc,
    title: props.title,
    id: "po-slider-margin",
    displayValue: formatMm__default['default'](value, props.units),
    displayFormat: "html",
    reset: reset,
    patternReset: patternReset,
    toggleExpanded: toggleExpanded,
    expanded: expanded,
    showHelp: function showHelp() {
      return props.raiseEvent('showHelp', {
        type: 'draftSetting',
        value: 'margin'
      });
    },
    option: option,
    noDocs: props.noDocs
  }));
};

var DraftSettingComplete = (function (props) {
  return /*#__PURE__*/React__default['default'].createElement(PatternOptionBool, _extends({}, props, {
    name: "complete"
  }));
});

var DraftSettingPaperless = (function (props) {
  return /*#__PURE__*/React__default['default'].createElement(PatternOptionBool, _extends({}, props, {
    name: "paperless"
  }));
});

var DraftSettingAdvanced = (function (props) {
  return /*#__PURE__*/React__default['default'].createElement(PatternOptionBool, _extends({}, props, {
    name: "advanced"
  }));
});

var DraftSettingDebug = (function (props) {
  return /*#__PURE__*/React__default['default'].createElement(PatternOptionBool, _extends({}, props, {
    name: "debug"
  }));
});

var DraftSettingUnits = function DraftSettingUnits(props) {
  var _useState = React.useState(props.dflt),
      _useState2 = _slicedToArray(_useState, 2),
      value = _useState2[0],
      setValue = _useState2[1];

  var _useState3 = React.useState(false),
      _useState4 = _slicedToArray(_useState3, 2),
      expanded = _useState4[0],
      setExpanded = _useState4[1];

  var update = function update(name, newValue, evt) {
    props.updateValue(props.name, newValue);
    setValue(newValue);
  };

  var reset = function reset() {
    setValue(props.dflt);
    props.updateValue(props.name, props.dflt);
  };

  var patternReset = function patternReset() {
    setValue(props.designDflt);
    props.updateValue(props.name, props.designDflt);
  };

  var toggleExpanded = function toggleExpanded() {
    return setExpanded(!expanded);
  };

  var option = /*#__PURE__*/React__default['default'].createElement(FormFieldList, {
    name: "units",
    value: value,
    dflt: props.dflt,
    onChange: update,
    label: "po-bool-units",
    updateValue: update,
    list: props.list
  });
  return /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement(OptionPreamble$1, {
    dflt: props.dflt,
    designDflt: props.designDflt,
    value: value,
    desc: props.desc,
    title: props.title,
    id: "po-list-units",
    displayValue: props.list[value],
    reset: reset,
    patternReset: patternReset,
    toggleExpanded: toggleExpanded,
    expanded: expanded,
    showHelp: function showHelp() {
      return props.raiseEvent('showHelp', {
        type: 'draftSetting',
        value: 'units'
      });
    },
    option: option,
    noDocs: props.noDocs
  }));
};

var DraftSettingLanguage = function DraftSettingLanguage(props) {
  var _useState = React.useState(props.value === null ? props.intl.locale : props.value),
      _useState2 = _slicedToArray(_useState, 2),
      value = _useState2[0],
      setValue = _useState2[1];

  var _useState3 = React.useState(false),
      _useState4 = _slicedToArray(_useState3, 2),
      expanded = _useState4[0],
      setExpanded = _useState4[1];

  var update = function update(name, newValue, evt) {
    props.updateValue(props.name, newValue);
    setValue(newValue);
  };

  var reset = function reset() {
    setValue(props.dflt || props.intl.locale);
    props.updateValue(props.name, props.dflt || props.intl.locale);
  };

  var patternReset = function patternReset() {
    setValue(props.intl.locale);
    props.updateValue(props.name, props.intl.locale);
  };

  var toggleExpanded = function toggleExpanded() {
    return setExpanded(!expanded);
  };

  var option = /*#__PURE__*/React__default['default'].createElement(FormFieldList, {
    name: props.name,
    value: value,
    dflt: props.dflt,
    designDflt: props.intl.locale,
    onChange: update,
    label: 'po-list-' + props.name,
    updateValue: update,
    list: i18n.languages
  });
  return /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement(OptionPreamble$1, {
    dflt: props.dflt,
    designDflt: props.intl.locale,
    value: value,
    desc: props.desc,
    title: props.title,
    id: 'po-list-' + props.name,
    displayValue: i18n.languages[value],
    reset: reset,
    patternReset: patternReset,
    toggleExpanded: toggleExpanded,
    expanded: expanded,
    showHelp: function showHelp() {
      return props.raiseEvent('showHelp', {
        type: 'draftSetting',
        value: props.name
      });
    },
    option: option,
    noDocs: props.noDocs
  }));
};

var DraftSettingLanguage$1 = reactIntl.injectIntl(DraftSettingLanguage);

var FormFieldChecks = function FormFieldChecks(props) {
  var _useState = React.useState(props.dflt ? props.dflt : []),
      _useState2 = _slicedToArray(_useState, 2),
      value = _useState2[0],
      setValue = _useState2[1];

  var toggle = function toggle(part) {
    var parts = value.slice(0);
    var index = parts.indexOf(part);
    if (index === -1) parts.push(part);else parts.splice(index, 1);
    setValue(parts);
    props.updateValue(props.name, parts);
  };

  return /*#__PURE__*/React__default['default'].createElement(FormGroup__default['default'], null, Object.keys(props.checks).map(function (i) {
    return /*#__PURE__*/React__default['default'].createElement(FormControlLabel__default['default'], {
      control: /*#__PURE__*/React__default['default'].createElement(Checkbox__default['default'], {
        checked: value.indexOf(i) === -1 ? false : true,
        onChange: function onChange() {
          return toggle(i);
        },
        value: i
      }),
      label: props.checks[i],
      key: i,
      className: "po-list-item"
    });
  }));
};

var DraftSettingOnly = function DraftSettingOnly(props) {
  var _useState = React.useState(props.value === null ? 'dflt' : props.value === false ? 'dflt' : 'custom'),
      _useState2 = _slicedToArray(_useState, 2),
      value = _useState2[0],
      setValue = _useState2[1];

  var _useState3 = React.useState(value === 'custom' ? props.value : props.customDflt),
      _useState4 = _slicedToArray(_useState3, 2),
      parts = _useState4[0],
      setParts = _useState4[1];

  var _useState5 = React.useState(false),
      _useState6 = _slicedToArray(_useState5, 2),
      expanded = _useState6[0],
      setExpanded = _useState6[1];

  var update = function update(name, newValue, evt) {
    setValue(newValue);
    if (newValue === 'dflt') props.updateValue('only', false);else props.updateValue('only', parts);
  };

  var onlyDfltToggle = 'dflt';
  if (props.dflt === 'custom' || Array.isArray(props.dflt)) onlyDfltToggle = 'custom';

  var reset = function reset() {
    setValue(onlyDfltToggle);

    if (onlyDfltToggle === 'dflt') {
      setParts([]);
      props.updateValue('only', false);
    } else {
      setParts(props.dflt);
      props.updateValue('only', props.dflt);
    }
  };

  var patternReset = function patternReset() {
    setValue('dflt');
    setParts([]);
    props.updateValue('only', false);
  };

  var updateCustom = function updateCustom(name, newValue, evt) {
    props.updateValue('only', newValue);
    setParts(newValue);
  };

  var toggleExpanded = function toggleExpanded() {
    return setExpanded(!expanded);
  };

  var list = {
    dflt: props.labels.dflt,
    custom: props.labels.custom
  };
  var option = /*#__PURE__*/React__default['default'].createElement(FormFieldList, {
    name: "only",
    value: value,
    dflt: props.dflt,
    designDflt: props.dflt,
    onChange: update,
    label: "po-list-only",
    updateValue: update,
    list: list
  });
  if (value === 'custom') option = /*#__PURE__*/React__default['default'].createElement(React__default['default'].Fragment, null, option, /*#__PURE__*/React__default['default'].createElement(FormFieldChecks, {
    checks: props.parts,
    name: "parts",
    value: value,
    dflt: parts,
    onChange: updateCustom,
    label: "po-list-only",
    updateValue: updateCustom,
    list: list
  }));
  return /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement(OptionPreamble$1, {
    dflt: onlyDfltToggle,
    designDflt: "dflt",
    sameButDifferent: props.dflt !== props.value,
    value: value,
    desc: props.desc,
    title: props.title,
    id: "po-list-only",
    displayValue: props.labels[value],
    reset: reset,
    patternReset: patternReset,
    toggleExpanded: toggleExpanded,
    expanded: expanded,
    showHelp: function showHelp() {
      return props.raiseEvent('showHelp', {
        type: 'draftSetting',
        value: 'only'
      });
    },
    option: option,
    noDocs: props.noDocs
  }));
};

var DraftSettings = function DraftSettings(_ref) {
  var _ref$units = _ref.units,
      units = _ref$units === void 0 ? 'metric' : _ref$units,
      raiseEvent = _ref.raiseEvent,
      updateValue = _ref.updateValue,
      noDocs = _ref.noDocs,
      pattern = _ref.pattern,
      config = _ref.config,
      _ref$data = _ref.data,
      data = _ref$data === void 0 ? {
    settings: {}
  } : _ref$data;

  // State
  var _useState = React.useState([]),
      _useState2 = _slicedToArray(_useState, 2),
      expanded = _useState2[0],
      setExpanded = _useState2[1]; // Building blocks


  var noyes = [/*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "app.no"
  }), /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "app.yes"
  })];
  var hideshow = [/*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "app.hide"
  }), /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "app.show"
  })];
  var metricimperial = {
    metric: /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
      id: "app.metricUnits"
    }),
    imperial: /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
      id: "app.imperialUnits"
    })
  };
  var labels = {
    sa: {
      none: /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
        id: "app.noSeamAllowance"
      }),
      dflt: /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
        id: "app.standardSeamAllowance"
      }),
      custom: /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
        id: "app.customSeamAllowance"
      })
    },
    only: {
      dflt: /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
        id: "app.default"
      }),
      custom: /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
        id: "app.custom"
      })
    },
    paperless: noyes,
    advanced: hideshow,
    complete: hideshow,
    debug: noyes
  }; // Methods

  var toggleGroup = function toggleGroup(group) {
    var shown = expanded.slice(0);
    var index = shown.indexOf(group);
    if (index === -1) shown.push(group);else shown.splice(index, 1);
    setExpanded(shown);
  };

  var getDefault = function getDefault(setting) {
    var pattern = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    if (pattern && typeof pattern.settings[setting] !== 'undefined') return pattern.settings[setting];

    switch (setting) {
      case 'sa':
        return 10;

      case 'only':
        return 'dflt';

      case 'complete':
        return true;

      case 'margin':
        return 2;

      case 'units':
        return units;

      case 'debug':
        return false;

      default:
        return false;
    }
  };

  var addProps = function addProps(setting) {
    var childProps = {
      raiseEvent: raiseEvent,
      updateValue: updateValue,
      units: units,
      key: setting,
      name: setting,
      labels: labels[setting],
      noDocs: noDocs,
      dflt: getDefault(setting, pattern),
      designDflt: getDefault(setting)
    };
    childProps.title = /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
      id: 'settings.' + setting + '.title'
    });
    childProps.desc = /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
      id: 'settings.' + setting + '.description'
    });

    if (setting === 'only') {
      childProps.customDflt = [];
      childProps.parts = {};

      if (config.draftOrder) {
        var _iterator = _createForOfIteratorHelper(config.draftOrder),
            _step;

        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var part = _step.value;
            childProps.parts[part] = /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
              id: 'parts.' + part
            });
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
      }
    }

    if (typeof data.settings[setting] !== 'undefined') childProps.value = data.settings[setting];else childProps.value = null;
    return childProps;
  };

  var groups = {
    advanced: [/*#__PURE__*/React__default['default'].createElement(DraftSettingLanguage$1, addProps('locale')), /*#__PURE__*/React__default['default'].createElement(DraftSettingUnits, _extends({}, addProps('units'), {
      list: metricimperial
    })), /*#__PURE__*/React__default['default'].createElement(DraftSettingComplete, addProps('complete')), /*#__PURE__*/React__default['default'].createElement(DraftSettingMargin, addProps('margin')), /*#__PURE__*/React__default['default'].createElement(DraftSettingOnly, addProps('only')), /*#__PURE__*/React__default['default'].createElement(DraftSettingDebug, addProps('debug'))]
  };
  return /*#__PURE__*/React__default['default'].createElement(React__default['default'].Fragment, null, /*#__PURE__*/React__default['default'].createElement("ul", {
    className: "config level-1 nogroups"
  }, /*#__PURE__*/React__default['default'].createElement(DraftSettingSa, addProps('sa')), /*#__PURE__*/React__default['default'].createElement(DraftSettingPaperless, addProps('paperless')), /*#__PURE__*/React__default['default'].createElement(DraftSettingAdvanced, addProps('advanced'))), data.settings.advanced && /*#__PURE__*/React__default['default'].createElement("ul", {
    className: "config level-1"
  }, Object.keys(groups).map(function (group) {
    var open = true;
    if (expanded.indexOf(group) === -1) open = false;
    var children = null;
    if (open) children = groups[group].map(function (component) {
      return component;
    });
    return /*#__PURE__*/React__default['default'].createElement(React__default['default'].Fragment, {
      key: group
    }, /*#__PURE__*/React__default['default'].createElement("li", {
      className: open ? 'expanded' : 'collapsed',
      key: group + '-ghead'
    }, /*#__PURE__*/React__default['default'].createElement("span", {
      onClick: function onClick() {
        return toggleGroup(group);
      }
    }, /*#__PURE__*/React__default['default'].createElement(RightIcon__default['default'], {
      className: 'icon-col-exp ' + (open ? 'expanded' : 'collapsed')
    }), /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
      id: 'optiongroups.' + group
    }))), children);
  })));
};

var DraftConfigurator = function DraftConfigurator(_ref) {
  var _ref$noDocs = _ref.noDocs,
      noDocs = _ref$noDocs === void 0 ? false : _ref$noDocs,
      _ref$units = _ref.units,
      units = _ref$units === void 0 ? 'metric' : _ref$units,
      _ref$config = _ref.config,
      config = _ref$config === void 0 ? {} : _ref$config,
      _ref$data = _ref.data,
      data = _ref$data === void 0 ? {} : _ref$data,
      pattern = _ref.pattern,
      updatePatternData = _ref.updatePatternData,
      raiseEvent = _ref.raiseEvent,
      _ref$actions = _ref.actions,
      actions = _ref$actions === void 0 ? false : _ref$actions;
  var childProps = {
    noDocs: noDocs,
    units: units,
    config: config,
    data: data,
    pattern: pattern,
    raiseEvent: raiseEvent
  };
  return /*#__PURE__*/React__default['default'].createElement("ul", {
    id: "draft-config"
  }, actions && /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("span", null, /*#__PURE__*/React__default['default'].createElement(DebugIcon__default['default'], null), /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "app.actions"
  })), /*#__PURE__*/React__default['default'].createElement("ul", {
    className: "config level-1"
  }, actions)), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("span", null, /*#__PURE__*/React__default['default'].createElement(TuneIcon__default['default'], null), /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "app.designOptions"
  })), /*#__PURE__*/React__default['default'].createElement(PatternOptions$1, _extends({}, childProps, {
    updateValue: function updateValue(name, value) {
      return updatePatternData(value, 'settings', 'options', name);
    }
  }))), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("span", null, /*#__PURE__*/React__default['default'].createElement(WrenchIcon__default['default'], null), /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "app.patternOptions"
  })), /*#__PURE__*/React__default['default'].createElement(DraftSettings, _extends({}, childProps, {
    updateValue: function updateValue(name, value) {
      return updatePatternData(value, 'settings', name);
    }
  }))));
};

var DraftPattern = function DraftPattern(props) {

  if (props.focus !== null) {
    for (var _i = 0, _Object$keys = Object.keys(props.focus); _i < _Object$keys.length; _i++) {
      var p = _Object$keys[_i];

      for (var i in props.focus[p].points) {
      }

      for (var _i2 in props.focus[p].paths) {
      }

      for (var _i3 in props.focus[p].coords) {
      }
    }
  }

  return /*#__PURE__*/React__default['default'].createElement("ul", {
    id: "draft-config"
  }, /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("span", {
    title: "Actions"
  }, /*#__PURE__*/React__default['default'].createElement(DebugIcon__default['default'], null), /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "app.actions"
  })), /*#__PURE__*/React__default['default'].createElement("ul", {
    className: "config level-1"
  }, /*#__PURE__*/React__default['default'].createElement("li", {
    className: "action toggle ".concat(props.design ? 'on' : 'off')
  }, /*#__PURE__*/React__default['default'].createElement("span", {
    onClick: function onClick() {
      return props.setDesign(!props.design);
    },
    title: "Toggle design mode"
  }, /*#__PURE__*/React__default['default'].createElement(DesignIcon__default['default'], null), /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: props.design ? 'cfp.thingIsEnabled' : 'cfp.thingIsDisabled',
    values: {
      thing: /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
        id: "cfp.designMode"
      })
    }
  }), /*#__PURE__*/React__default['default'].createElement(Switch__default['default'], {
    color: "primary",
    name: "design",
    checked: props.design,
    onChange: function onChange() {
      return props.setDesign(!props.design);
    }
  }))), /*#__PURE__*/React__default['default'].createElement("li", {
    className: "action toggle ".concat(props.gist.settings.advanced ? 'on' : 'off')
  }, /*#__PURE__*/React__default['default'].createElement("span", {
    onClick: function onClick() {
      return props.updateGist(!props.gist.settings.advanced, 'settings', 'advanced');
    },
    title: "Toggle advanced settings"
  }, /*#__PURE__*/React__default['default'].createElement(AdvancedIcon__default['default'], null), /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: props.gist.settings.advanced ? 'cfp.thingIsEnabled' : 'cfp.thingIsDisabled',
    values: {
      thing: /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
        id: "settings.advanced.title"
      })
    }
  }), /*#__PURE__*/React__default['default'].createElement(Switch__default['default'], {
    color: "primary",
    name: "advanced",
    checked: props.gist.settings.advanced || false,
    onClick: function onClick() {
      return props.updateGist(!props.gist.settings.advanced, 'settings', 'advanced');
    }
  }))), /*#__PURE__*/React__default['default'].createElement("li", {
    className: "action toggle ".concat(props.gist.settings.paperless ? 'on' : 'off')
  }, /*#__PURE__*/React__default['default'].createElement("span", {
    onClick: function onClick() {
      return props.updateGist(!props.gist.settings.paperless, 'settings', 'paperless');
    },
    title: "Toggle paperless"
  }, /*#__PURE__*/React__default['default'].createElement(PaperlessIcon__default['default'], null), /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: props.gist.settings.paperless ? 'cfp.thingIsEnabled' : 'cfp.thingIsDisabled',
    values: {
      thing: /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
        id: "settings.paperless.title"
      })
    }
  }), /*#__PURE__*/React__default['default'].createElement(Switch__default['default'], {
    color: "primary",
    name: "paperless",
    checked: props.gist.settings.paperless,
    onChange: function onChange() {
      return props.updateGist(!props.gist.settings.paperless, 'settings', 'paperless');
    }
  }))), /*#__PURE__*/React__default['default'].createElement("li", {
    className: "action toggle ".concat(props.gist.settings.complete ? 'on' : 'off')
  }, /*#__PURE__*/React__default['default'].createElement("span", {
    onClick: function onClick() {
      return props.updateGist(!props.gist.settings.complete, 'settings', 'complete');
    },
    title: "Toggle complete"
  }, /*#__PURE__*/React__default['default'].createElement(CompleteIcon__default['default'], null), /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: props.gist.settings.complete ? 'cfp.thingIsEnabled' : 'cfp.thingIsDisabled',
    values: {
      thing: /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
        id: "settings.complete.title"
      })
    }
  }), /*#__PURE__*/React__default['default'].createElement(Switch__default['default'], {
    color: "primary",
    name: "complete",
    checked: props.gist.settings.complete,
    onChange: function onChange() {
      return props.updateGist(!props.gist.settings.complete, 'settings', 'complete');
    }
  }))), /*#__PURE__*/React__default['default'].createElement("li", {
    className: "action"
  }, /*#__PURE__*/React__default['default'].createElement("span", {
    onClick: function onClick() {
      return console.log(props.pattern);
    },
    title: "Log pattern object to console"
  }, /*#__PURE__*/React__default['default'].createElement(DumpIcon__default['default'], {
    color: "primary"
  }), "console.log(pattern)")), props.design && /*#__PURE__*/React__default['default'].createElement("li", {
    className: "action"
  }, /*#__PURE__*/React__default['default'].createElement("span", {
    onClick: function onClick() {
      return props.raiseEvent('clearFocusAll', null);
    },
    title: "Clear design mode"
  }, /*#__PURE__*/React__default['default'].createElement(ErrorIcon__default['default'], {
    color: "primary"
  }), /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "cfp.clearDesignMode"
  }))))), props.design && /*#__PURE__*/React__default['default'].createElement(Design, {
    focus: props.focus,
    design: props.design,
    raiseEvent: props.raiseEvent,
    parts: props.patternProps.parts
  }), /*#__PURE__*/React__default['default'].createElement(DraftConfigurator, {
    noDocs: true,
    config: props.config,
    data: props.gist,
    updatePatternData: props.updateGist,
    raiseEvent: props.raiseEvent,
    freesewing: props.freesewing,
    units: props.units || 'metric'
  }), /*#__PURE__*/React__default['default'].createElement("li", {
    className: "zoombox"
  }, /*#__PURE__*/React__default['default'].createElement(Zoombox, {
    patternProps: props.patternProps,
    setViewBox: props.setViewBox
  })));
};

var PatternJson = function PatternJson(props) {
  var gist = Prism__default['default'].highlight(JSON.stringify(props.gist, null, 2), Prism__default['default'].languages.javascript, 'javascript');
  return /*#__PURE__*/React__default['default'].createElement("div", {
    style: {
      padding: '1rem'
    }
  }, /*#__PURE__*/React__default['default'].createElement("div", {
    className: "gatsby-highlight"
  }, /*#__PURE__*/React__default['default'].createElement("pre", {
    className: "language-json",
    dangerouslySetInnerHTML: {
      __html: gist
    }
  })));
};

var Welcome = function Welcome(props) {
  var styles = {
    container: {
      textAlign: "center",
      maxWidth: "500px",
      margin: "0 auto"
    },
    bigButton: {
      margin: "0.5rem",
      width: "calc(100% - 3rem)"
    }
  };
  return /*#__PURE__*/React__default['default'].createElement("section", {
    style: styles.container
  }, /*#__PURE__*/React__default['default'].createElement(Logo, {
    size: 200
  }), /*#__PURE__*/React__default['default'].createElement("h1", null, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "app.welcome"
  })), /*#__PURE__*/React__default['default'].createElement("p", null, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "cfp.renderInBrowser"
  }), /*#__PURE__*/React__default['default'].createElement("br", null), /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "cfp.weWillReRender"
  })), /*#__PURE__*/React__default['default'].createElement(Button__default['default'], {
    style: styles.bigButton,
    variant: "contained",
    size: "large",
    color: "primary",
    onClick: function onClick() {
      return props.setDisplay("draft");
    }
  }, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "cfp.draftYourPattern"
  })), /*#__PURE__*/React__default['default'].createElement(Button__default['default'], {
    style: styles.bigButton,
    variant: "contained",
    size: "large",
    color: "primary",
    onClick: function onClick() {
      return props.setDisplay("sample");
    }
  }, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "cfp.testYourPattern"
  })));
};

var FormFieldMeasurement = function FormFieldMeasurement(props) {
  var initialValue = function initialValue(name, val) {
    return isDegMeasurement__default['default'](name) ? val : roundMm__default['default'](val / 10);
  };

  var _useState = React.useState(initialValue(props.name, props.value)),
      _useState2 = _slicedToArray(_useState, 2),
      value = _useState2[0],
      setValue = _useState2[1];

  React.useEffect(function () {
    if (!isNaN(props.value)) setValue(isDegMeasurement__default['default'](props.name) ? props.value : roundMm__default['default'](props.value / 10));
  }, [props.value]);

  var update = function update(evt) {
    setValue(evt.target.value);

    if (evt.target.value.slice(-1) !== '.') {
      props.updateValue(props.name, evt.target.value * (isDegMeasurement__default['default'](props.name) ? 1 : 10));
    }
  };

  var suffix = function suffix(name) {
    return isDegMeasurement__default['default'](name) ? '' : props.units === 'imperial' ? '"' : 'cm';
  };

  return /*#__PURE__*/React__default['default'].createElement(TextField__default['default'], {
    id: props.name,
    fullWidth: true,
    label: props.intl.formatMessage({
      id: props.label
    }),
    margin: "normal",
    variant: "outlined",
    value: value,
    type: "text",
    onChange: update,
    InputProps: {
      endAdornment: /*#__PURE__*/React__default['default'].createElement(InputAdornment__default['default'], {
        position: "end"
      }, isNaN(props.value) ? /*#__PURE__*/React__default['default'].createElement(InvalidIcon__default['default'], {
        color: "error"
      }) : /*#__PURE__*/React__default['default'].createElement(IconButton__default['default'], {
        classes: {
          label: 'color-success'
        },
        size: "small"
      }, suffix(props.name)))
    }
  });
};

var FormFieldMeasurement$1 = reactIntl.injectIntl(FormFieldMeasurement);

var Measurements = function Measurements(props) {
  var styles = {
    container: {
      display: 'flex',
      flexDirection: 'row',
      width: '100%',
      minHeight: '70vh'
    },
    chooser: {
      width: '100%',
      maxWidth: '500px',
      alignSelf: 'top'
    },
    ul: {
      listStyleType: 'none',
      margin: '0',
      padding: '0'
    },
    li: {
      display: 'inline',
      padding: '0 5px 5px 0'
    }
  };

  var getValue = function getValue(m) {
    if (props.measurements === null) return '';
    if (typeof props.measurements[m] === 'undefined') return '';
    return props.measurements[m];
  };

  if (props.required.length < 1) return /*#__PURE__*/React__default['default'].createElement("div", {
    style: styles.container
  }, /*#__PURE__*/React__default['default'].createElement("div", {
    style: styles.chooser
  }, /*#__PURE__*/React__default['default'].createElement("h3", null, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "cfp.noRequiredMeasurements"
  })), /*#__PURE__*/React__default['default'].createElement("p", null, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "cfp.howtoAddMeasurements"
  })), /*#__PURE__*/React__default['default'].createElement("p", null, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "cfp.seeDocsAt"
  }), "\xA0", /*#__PURE__*/React__default['default'].createElement("a", {
    href: 'https://freesewing.dev/core/config'
  }, props.language, ".freesewing.dev/core/config"))));
  return /*#__PURE__*/React__default['default'].createElement("div", {
    style: styles.container
  }, /*#__PURE__*/React__default['default'].createElement("div", {
    style: styles.chooser
  }, /*#__PURE__*/React__default['default'].createElement("h4", {
    id: "preload"
  }, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "cfp.preloadMeasurements"
  })), /*#__PURE__*/React__default['default'].createElement("ul", {
    style: styles.ul
  }, Object.keys(models.withoutBreasts).map(function (m) {
    return /*#__PURE__*/React__default['default'].createElement("li", {
      key: "".concat(m, "-without"),
      style: styles.li
    }, /*#__PURE__*/React__default['default'].createElement(Button__default['default'], {
      onClick: function onClick() {
        return props.preloadMeasurements(models.withoutBreasts[m]);
      }
    }, /*#__PURE__*/React__default['default'].createElement(Icon, {
      icon: "withoutBreasts"
    }), /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
      id: "cfp.size"
    }), "\xA0", m.slice(-2)));
  }), Object.keys(models.withBreasts).map(function (m) {
    return /*#__PURE__*/React__default['default'].createElement("li", {
      key: "".concat(m, "-with"),
      style: styles.li
    }, /*#__PURE__*/React__default['default'].createElement(Button__default['default'], {
      onClick: function onClick() {
        return props.preloadMeasurements(models.withBreasts[m]);
      }
    }, /*#__PURE__*/React__default['default'].createElement(Icon, {
      icon: "withBreasts"
    }), /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
      id: "cfp.size"
    }), "\xA0", m.slice(-2)));
  }))), /*#__PURE__*/React__default['default'].createElement("div", {
    style: styles.chooser
  }, /*#__PURE__*/React__default['default'].createElement("h4", {
    id: "manual"
  }, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "cfp.enterMeasurements"
  })), props.required.map(function (m) {
    return /*#__PURE__*/React__default['default'].createElement(FormFieldMeasurement$1, {
      key: m,
      name: m,
      units: props.units,
      value: getValue(m),
      label: 'measurements.' + m,
      updateValue: props.updateMeasurement
    });
  })));
};

var OptionGroup = function OptionGroup(props) {
  return /*#__PURE__*/React__default['default'].createElement(React__default['default'].Fragment, null, props.options.map(function (name) {
    var output = [];

    if (_typeof(name) === 'object') {
      // Subgroup
      for (var _i = 0, _Object$keys = Object.keys(name); _i < _Object$keys.length; _i++) {
        var subGroup = _Object$keys[_i];
        output.push( /*#__PURE__*/React__default['default'].createElement("h5", {
          key: subGroup + '-title'
        }, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
          id: 'optiongroups.' + subGroup
        })));
        var children = [];

        var _iterator = _createForOfIteratorHelper(name[subGroup]),
            _step;

        try {
          var _loop = function _loop() {
            var option = _step.value;
            children.push( /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
              href: "#logo",
              onClick: function onClick() {
                return props.sampleOption(option);
              },
              className: props.activeOption === option ? 'active' : ''
            }, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
              id: 'options.' + props.config.name + '.' + option + '.title'
            }))));
          };

          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            _loop();
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }

        output.push( /*#__PURE__*/React__default['default'].createElement("ul", {
          style: {
            paddingLeft: '1rem'
          }
        }, children));
      }
    } else output.push( /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
      href: "#logo",
      onClick: function onClick() {
        return props.sampleOption(name);
      },
      className: props.activeOption === name ? 'active' : ''
    }, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
      id: 'options.' + props.config.name + '.' + name + '.title'
    }))));

    return output;
  }));
};

var OptionGroup$1 = reactIntl.injectIntl(OptionGroup);

var PatternOptions = function PatternOptions(props) {
  var renderGroup = function renderGroup(group) {
    var output = [];
    var children = /*#__PURE__*/React__default['default'].createElement("ul", null, /*#__PURE__*/React__default['default'].createElement(OptionGroup$1, {
      key: group + '-group',
      units: props.units,
      config: props.config,
      options: props.config.optionGroups[group],
      sampleOption: props.sampleOption,
      activeOption: props.activeOption
    }));
    output.push( /*#__PURE__*/React__default['default'].createElement("li", {
      key: group + '-ghead'
    }, /*#__PURE__*/React__default['default'].createElement("h6", null, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
      id: 'optiongroups.' + group
    })), children));
    return output;
  };

  return /*#__PURE__*/React__default['default'].createElement("ul", null, Object.keys(props.config.optionGroups).map(function (group) {
    return renderGroup(group);
  }));
};

var SampleConfigurator = function SampleConfigurator(props) {
  var _useState = React.useState(),
      _useState2 = _slicedToArray(_useState, 2),
      type = _useState2[0],
      setType = _useState2[1];

  var _useState3 = React.useState(),
      _useState4 = _slicedToArray(_useState3, 2),
      instance = _useState4[0],
      setInstance = _useState4[1];

  var sampleOption = function sampleOption(option) {
    setType('option');
    setInstance(option);
    props.updateGist({
      type: 'option',
      option: option
    }, 'settings', 'sample');
  };

  var sampleMeasurement = function sampleMeasurement(measurement) {
    setType('measurement');
    setInstance(measurement);
    props.updateGist({
      type: 'measurement',
      measurement: measurement
    }, 'settings', 'sample');
  };

  var sampleModels = function sampleModels(models) {
    setType('models');
    props.updateGist({
      type: 'models',
      models: models
    }, 'settings', 'sample');
  };

  var antMan = {
    ant: {},
    b: {},
    c: {},
    man: {}
  };
  var antWoman = {
    ant: {},
    b: {},
    c: {},
    woman: {}
  };

  for (var m in models.withoutBreasts.size42) {
    var val = neckstimate__default['default'](420, m, false);
    antMan.ant[m] = val / 10;
    antMan.b[m] = val / 5;
    antMan.c[m] = val / 2;
    antMan.man[m] = val;
  }

  for (var _m in models.withBreasts.size36) {
    var _val = neckstimate__default['default'](360, _m, true);

    antWoman.ant[_m] = _val / 10;
    antWoman.b[_m] = _val / 5;
    antWoman.c[_m] = _val / 2;
    antWoman.woman[_m] = _val;
  }

  return /*#__PURE__*/React__default['default'].createElement("ul", null, /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("h5", null, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "app.patternOptions"
  })), /*#__PURE__*/React__default['default'].createElement(PatternOptions, {
    config: props.config,
    gist: props.gist,
    sampleOption: sampleOption,
    activeOption: type === 'option' ? instance : null
  })), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("h5", null, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "app.measurements"
  })), /*#__PURE__*/React__default['default'].createElement("ul", null, props.config.measurements.map(function (m) {
    return /*#__PURE__*/React__default['default'].createElement("li", {
      key: m
    }, /*#__PURE__*/React__default['default'].createElement("a", {
      href: "#logo",
      onClick: function onClick() {
        return sampleMeasurement(m);
      },
      className: type === 'measurement' && instance === m ? 'active' : ''
    }, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
      id: 'measurements.' + m
    })));
  }))), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("h5", null, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "app.people"
  })), /*#__PURE__*/React__default['default'].createElement("ul", null, /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
    href: "#logo",
    onClick: function onClick() {
      sampleModels(models.withBreasts);
      setType('models');
      setInstance('withBreasts');
    },
    className: type === 'models' && instance === 'withBreasts' ? 'active' : ''
  }, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "app.withBreasts"
  }))), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
    href: "#logo",
    onClick: function onClick() {
      sampleModels(models.withoutBreasts);
      setType('models');
      setInstance('withoutBreasts');
    },
    className: type === 'models' && instance === 'withoutBreasts' ? 'active' : ''
  }, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "app.withoutBreasts"
  }))), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
    href: "#logo",
    onClick: function onClick() {
      sampleModels(antWoman);
      setType('models');
      setInstance('antWoman');
    },
    className: type === 'models' && instance === 'antWoman' ? 'active' : ''
  }, "Antperson (with breasts)")), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
    href: "#logo",
    onClick: function onClick() {
      sampleModels(antMan);
      setType('models');
      setInstance('antMan');
    },
    className: type === 'models' && instance === 'antMan' ? 'active' : ''
  }, "Antperson (without breasts)")))));
};

/**
 * @freesewing/plugin-svgattr | v2.17.0
 * A FreeSewing plugin to set SVG attributes
 * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)
 * @license MIT
 */
var name$1 = "@freesewing/plugin-svgattr";
var version$1 = "2.17.0";
var index$2 = {
  name: name$1,
  version: version$1,
  hooks: {
    preRender: function (svg, attributes) {
      if (svg.attributes.get('freesewing:plugin-svgattr') === false) {
        for (let key of Object.keys(attributes)) svg.attributes.add(key, attributes[key]);

        svg.attributes.add('freesewing:plugin-svgattr', version$1);
      }
    }
  }
};

/**
 * @freesewing/plugin-i18n | v2.17.0
 * A FreeSewing plugin for pattern translation
 * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)
 * @license MIT
 */
var name = "@freesewing/plugin-i18n";
var version = "2.17.0";
var index$1 = {
  name: name,
  version: version,
  hooks: {
    preRender: function (svg) {
      if (svg.attributes.get('freesewing:plugin-i18n') === false) {
        svg.attributes.set('freesewing:plugin-i18n', version);
      }
    },
    insertText: function (locale, text, data) {
      if (data === false) {
        console.log("No data was passed to the i18n plugin. This plugin won't do much without injecting data into it");
        return text;
      }

      let prefix = data.prefix || '';
      if (typeof data.strings[locale][prefix + text] === 'undefined') return text;else return data.strings[locale][prefix + text];
    }
  }
};

var Blockquote = function Blockquote(props) {
  var attr = Object.assign({}, props);
  delete attr.type;
  delete attr.children;
  return /*#__PURE__*/React__default['default'].createElement("blockquote", _extends({
    className: props.type || 'note'
  }, attr), props.children || null, props.type !== 'fixme' && /*#__PURE__*/React__default['default'].createElement(Icon, {
    icon: props.type,
    className: 'icon ' + props.type
  }));
};

var Spinner = function Spinner(props) {
  return /*#__PURE__*/React__default['default'].createElement("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    width: props.embed ? '' : props.size || 200,
    height: props.embed ? '' : props.size || 200,
    viewBox: "-28 -28 108 108",
    className: 'spinner ' + props.className
  }, /*#__PURE__*/React__default['default'].createElement("path", {
    d: "M 35.222,0 C 34.233,0.703 34.284,0.613 33.485,0.874 31.653,1.473 29.896,1.144 27.811,0.97 27.184,0.9 26.562,0.859 25.955,0.855 22.89,0.834 20.287,1.733 19.794,4.243 18.885,4.794 18.049,5.461 17.221,6.129 15.453,7.524 14.122,9.229 13.214,11.284 11.974,14.319 13.094,17.576 13.649,20.652 13.781,21.372 13.919,22.058 13.993,22.323 14.098,22.696 14.283,23.052 14.484,23.372 14.531,23.38 14.779,22.998 14.838,22.829 14.924,22.583 14.915,22.188 14.821,21.848 14.613,21.083 14.415,20.462 14.398,20.15 14.368,19.564 14.482,19.023 14.696,18.755 14.772,18.66 14.946,19.15 14.901,19.332 14.848,19.551 14.808,19.926 14.825,20.099 14.872,20.685 14.958,21.312 15.065,21.86 15.202,22.567 15.261,23.021 15.236,23.197 15.218,23.325 15.158,23.454 14.928,23.85 14.728,24.197 14.624,24.478 14.608,24.726 14.591,24.968 14.664,25.573 14.732,25.721 14.831,25.952 15.129,26.195 15.389,26.255 15.638,26.35 15.763,26.547 15.891,26.768 16.202,27.361 16.442,28.083 16.68,29.171 16.796,29.692 16.893,30.157 16.924,30.401 15.004,30.403 12.545,30.404 10.305,30.404 9.551,30.416 8.189,30.062 6.94,29.98 6.759,28.026 5.901,25.756 4.433,25.624 3.431,25.533 2.6,25.914 1.897,27.497 L 1.917,27.582 C 2.332,27.235 2.77,26.174 4.348,26.247 5.56,26.302 5.964,28.596 6.084,29.976 5.346,30.03 4.718,30.257 4.39,30.824 L 4.383,30.824 C 4.383,30.825 4.383,30.827 4.386,30.829 4.383,30.831 4.383,30.833 4.383,30.835 L 4.39,30.835 C 4.728,31.416 5.379,31.641 6.144,31.686 6.655,46.136 20.238,48 23.95,48 37.798,48 42.646,38.59 43.375,34.863 43.716,36.451 42.642,38.474 42.385,39.967 45.306,36.59 44.778,33.343 44.244,30.077 44.688,30.605 45.289,30.932 46.104,30.751 45.523,30.363 44.735,30.635 44.263,28.998 44.057,28.291 43.879,27.761 43.702,27.316 43.32,25.883 42.778,24.514 42.112,23.18 41.55,21.733 41.921,20.795 41.865,19.553 42.876,22.887 43.508,23.774 44.688,24.123 41.72,20.547 42.736,15.01 41.059,10.068 41.818,10.514 42.684,10.648 43.606,10.103 42.714,9.849 41.824,10.52 40.544,8.639 39.463,6.536 37.897,4.983 35.997,3.613 34.979,2.949 33.849,2.503 32.713,2.089 33.87,1.799 35.162,0.769 35.222,0 z M 33.281,11.107 C 34.805,11.663 36.485,13.775 36.466,15.847 L 36.466,15.933 36.466,15.963 C 36.425,18.777 35.146,20.29 35.2,22.164 35.269,24.371 36.219,25.141 36.408,25.509 36.084,24.148 35.894,22.436 36.322,21.08 36.872,19.336 37.427,17.892 37.387,16.526 37.367,16.206 37.231,15.009 37.14,14.479 38.774,16.837 36.786,20.266 37.358,22.51 38.352,26.419 42.807,26.913 41.481,34.789 40.314,41.713 32.318,46.968 24.122,46.968 18.046,46.968 7.517,43.605 6.997,31.676 8.232,31.588 9.56,31.244 10.305,31.256 12.557,31.256 15.129,31.257 17.067,31.258 17.431,32.9 17.704,33.296 19.085,34.39 20.621,35.598 20.979,35.745 23.251,35.767 25.524,35.79 26.198,35.303 28.403,33.217 28.879,32.659 29.085,31.928 29.316,31.241 31.584,31.22 33.238,31.18 34.865,31.104 36.522,31.029 36.756,31.104 39.426,30.829 36.756,30.554 36.522,30.629 34.865,30.553 33.281,30.481 31.677,30.44 29.508,30.42 29.69,29.603 29.95,28.805 30.227,28.016 30.398,27.551 30.599,27.098 30.805,26.647 L 31.03,26.577 C 31.464,26.423 31.848,26.093 32.001,25.647 32.198,25.056 32.058,24.392 31.677,23.909 31.546,23.728 31.383,23.497 31.316,23.395 31.115,23.077 31.11,22.9 31.28,21.718 31.423,20.728 31.439,20.21 31.34,19.708 31.32,19.421 31.318,18.831 31.309,18.672 31.385,18.714 31.55,19.09 31.717,19.599 31.883,20.11 31.91,20.216 31.948,20.651 31.99,21.145 31.805,21.511 31.653,22.248 31.577,22.628 31.51,22.981 31.51,23.029 31.51,23.08 31.546,23.188 31.584,23.272 31.673,23.46 31.84,23.724 31.871,23.724 32.416,23.123 32.736,22.381 33.021,21.628 33.321,20.776 33.409,19.872 33.619,18.995 33.789,18.231 33.985,17.466 34.046,16.682 34.169,15.152 34.097,14.072 33.759,12.478 33.678,12.118 33.444,11.431 33.281,11.107 z M 27.921,18.644 C 28.506,18.637 29.085,18.708 29.636,18.867 30.385,19.154 30.49,19.823 30.628,20.574 30.705,21.054 30.702,21.399 30.615,21.963 30.554,22.781 30.229,23.414 29.519,23.859 28.448,24.057 27.303,24.248 26.395,23.539 25.633,22.489 25.174,21.162 25.349,19.868 25.46,19.337 25.707,19.061 26.215,18.896 26.762,18.739 27.341,18.653 27.921,18.644 z M 19.038,18.739 C 19.585,18.734 20.138,18.792 20.442,18.986 21.747,19.869 21.328,21.306 20.812,22.567 20.061,24.218 18.437,24.157 16.863,24.144 15.992,23.889 15.912,23.175 15.786,22.412 15.678,21.675 15.448,20.885 15.64,20.144 16.133,18.952 17.935,18.815 19.038,18.739 z M 38.941,18.945 C 38.948,22.118 39.49,23.677 40.578,25.924 39.937,24.701 39.021,24.005 38.68,22.543 38.028,19.72 38.731,19.878 38.941,18.945 z M 23.128,21.243 C 23.3,21.417 23.383,21.657 23.532,21.848 23.647,21.651 23.765,21.455 23.913,21.28 23.99,21.282 24.084,21.434 24.169,21.706 24.533,22.712 24.604,23.819 25.076,24.786 25.517,25.486 24.915,25.894 24.254,25.926 23.772,25.925 23.568,25.596 23.285,25.27 23.212,25.483 23.073,25.62 22.907,25.764 22.485,26.118 21.658,25.987 21.53,25.429 21.7,24.363 22.243,23.384 22.599,22.362 22.776,21.989 22.778,21.703 23.128,21.243 z M 16.936,26.628 C 17.149,26.628 17.734,27.025 17.853,27.249 17.935,27.398 18.122,27.978 18.135,28.119 18.156,28.287 18.105,28.685 18.053,28.793 18.015,28.87 17.986,28.881 17.942,28.831 17.905,28.789 17.415,27.849 17.102,27.227 16.856,26.729 16.83,26.628 16.936,26.628 z M 29.158,26.939 C 29.166,26.94 29.178,26.943 29.189,26.946 29.255,26.973 29.209,27.207 28.961,28.057 28.914,28.313 28.8,28.515 28.633,28.683 28.578,28.683 28.553,28.619 28.467,28.264 28.394,27.961 28.386,27.691 28.437,27.449 28.525,27.146 28.881,27.053 29.158,26.939 z M 27.675,28.792 C 27.696,28.788 27.716,28.799 27.742,28.82 27.832,28.883 27.845,29.049 27.785,29.374 27.712,29.792 27.696,29.838 27.588,29.881 27.541,29.902 27.457,29.917 27.401,29.917 27.3,29.899 27.274,29.817 27.298,29.693 27.298,29.433 27.374,29.207 27.546,28.94 27.611,28.84 27.644,28.797 27.675,28.792 z M 19.042,28.811 C 19.111,28.811 19.319,28.961 19.396,29.065 19.482,29.175 19.58,29.83 19.525,29.943 19.462,30.085 19.154,30.014 19.069,29.837 19.017,29.731 18.894,29.159 18.894,29.023 18.894,28.897 18.955,28.811 19.042,28.811 z M 26.933,28.984 C 27.017,29.104 27.039,29.258 27.021,29.596 L 27.004,29.904 26.916,29.992 C 26.863,30.041 26.773,30.101 26.719,30.126 26.6,30.182 26.509,30.187 26.492,30.142 26.472,30.082 26.506,29.7 26.543,29.571 26.586,29.438 26.779,29.041 26.843,28.957 26.872,28.88 26.906,28.976 26.933,28.984 z M 21.912,28.966 C 22.093,29.012 22.173,29.175 22.272,29.323 L 22.339,29.455 22.245,29.782 C 22.195,29.962 22.142,30.124 22.126,30.142 22.108,30.162 22.041,30.172 21.942,30.171 21.678,30.164 21.648,30.153 21.577,30.045 L 21.511,29.947 21.567,29.672 C 21.648,29.276 21.687,29.157 21.777,29.055 21.824,29 21.871,28.97 21.912,28.966 z M 20.241,29.249 20.39,29.398 20.415,29.735 C 20.428,29.919 20.434,30.09 20.424,30.111 20.415,30.14 20.361,30.148 20.194,30.148 L 19.977,30.148 C 19.861,30.021 19.825,29.866 19.776,29.706 19.662,29.225 19.662,29.006 19.78,28.977 19.973,28.989 20.1,29.129 20.241,29.249 z M 26.041,29.018 C 26.277,29.081 26.23,29.456 26.229,29.724 26.211,30.158 26.194,30.248 26.138,30.304 26.041,30.401 25.771,30.347 25.64,30.203 25.597,30.151 25.593,30.135 25.627,29.924 25.666,29.667 25.716,29.507 25.827,29.287 25.908,29.129 25.984,29.03 26.041,29.018 z M 20.715,29.038 C 20.728,29.037 20.749,29.038 20.769,29.04 20.919,29.052 21.059,29.15 21.183,29.33 L 21.283,29.477 C 21.292,29.718 21.283,29.972 21.24,30.196 21.214,30.209 21.106,30.229 21,30.239 20.816,30.256 20.799,30.252 20.735,30.196 20.646,30.12 20.621,29.979 20.599,29.511 20.586,29.129 20.595,29.044 20.715,29.038 z M 22.984,29.118 C 23.145,29.152 23.247,29.238 23.292,29.379 23.328,29.5 23.35,30.177 23.315,30.224 23.303,30.244 23.227,30.269 23.14,30.28 22.816,30.321 22.53,30.29 22.502,30.213 22.466,30.125 22.707,29.253 22.796,29.145 22.834,29.061 22.926,29.126 22.984,29.118 z M 25.082,29.124 C 25.153,29.117 25.229,29.185 25.303,29.33 25.363,29.451 25.372,29.493 25.372,29.764 25.372,29.98 25.359,30.073 25.336,30.093 25.316,30.109 25.235,30.138 25.149,30.16 24.999,30.199 24.966,30.203 24.919,30.187 L 24.694,30.146 24.711,30.012 C 24.727,29.837 24.842,29.449 24.923,29.281 24.971,29.181 25.026,29.131 25.082,29.124 z M 24.104,29.127 C 24.151,29.125 24.173,29.136 24.203,29.169 24.274,29.253 24.364,29.501 24.421,29.766 24.497,30.139 24.497,30.138 24.334,30.187 24.263,30.209 24.113,30.232 24.006,30.238 23.653,30.256 23.626,30.235 23.669,29.923 23.703,29.645 23.84,29.207 23.899,29.175 23.963,29.141 24.037,29.142 24.104,29.127 z M 6.111,30.536 C 6.114,30.535 6.118,30.536 6.118,30.536 6.127,30.731 6.127,30.928 6.131,31.124 5.636,31.086 5.272,30.968 5.272,30.829 5.272,30.692 5.623,30.575 6.111,30.536 z M 6.976,30.553 C 7.377,30.603 7.654,30.708 7.649,30.829 7.649,30.951 7.381,31.055 6.983,31.104 6.979,30.921 6.979,30.737 6.976,30.553 z M 25.702,31.086 C 25.736,31.083 25.751,31.08 25.803,31.085 26.011,31.106 26.041,31.119 26.041,31.189 26.041,31.281 25.883,31.558 25.776,31.654 25.726,31.702 25.657,31.742 25.633,31.742 25.513,31.742 25.443,31.489 25.499,31.256 25.533,31.13 25.595,31.091 25.702,31.086 z M 24.947,31.169 C 25.04,31.161 25.13,31.186 25.22,31.198 25.194,31.461 25.076,31.676 24.857,31.819 24.803,31.819 24.776,31.716 24.776,31.491 24.776,31.223 24.79,31.172 24.947,31.169 z M 24.119,31.266 C 24.312,31.266 24.482,31.275 24.49,31.286 24.526,31.32 24.422,31.578 24.269,31.84 24.138,32.073 24.119,32.09 24.038,32.096 23.72,32.06 23.729,31.687 23.68,31.431 23.68,31.279 23.714,31.266 24.119,31.266 z M 21.11,31.295 C 21.331,31.299 21.417,31.332 21.417,31.417 21.417,31.525 21.335,31.74 21.288,31.767 21.217,31.806 21.211,31.804 21.071,31.658 20.85,31.41 20.825,31.364 21.11,31.295 z M 22.174,31.306 C 22.178,31.312 22.221,31.39 22.264,31.478 22.358,31.661 22.365,31.741 22.298,31.802 22.14,31.892 22.107,31.841 21.964,31.75 21.798,31.593 21.667,31.382 21.71,31.338 21.858,31.285 22.021,31.305 22.174,31.306 z M 22.596,31.311 22.991,31.318 C 23.145,31.318 23.278,31.326 23.285,31.338 23.312,31.362 23.225,31.876 23.178,31.992 23.124,32.122 22.935,32.123 22.837,31.969 22.697,31.748 22.605,31.562 22.602,31.434 L 22.596,31.311 z"
  }), /*#__PURE__*/React__default['default'].createElement("circle", {
    cx: "24",
    cy: "24",
    r: "35",
    strokeWidth: "1",
    className: "darker",
    stroke: "blue",
    strokeDasharray: "60 360"
  }, /*#__PURE__*/React__default['default'].createElement("animateTransform", {
    attributeName: "transform",
    attributeType: "XML",
    type: "rotate",
    from: "0 24 24",
    to: "360 24 24",
    dur: "1.2s",
    repeatCount: "indefinite"
  })), /*#__PURE__*/React__default['default'].createElement("rect", {
    height: "1",
    width: "6",
    x: "15.5",
    y: "17",
    className: "blink"
  }, /*#__PURE__*/React__default['default'].createElement("animate", {
    attributeType: "XML",
    attributeName: "height",
    from: "1",
    to: "7.2",
    begin: "loop.begin+1.5s;",
    dur: "0.15s"
  })), /*#__PURE__*/React__default['default'].createElement("rect", {
    height: "1",
    width: "5.8",
    x: "25",
    y: "17",
    className: "blink"
  }, /*#__PURE__*/React__default['default'].createElement("animate", {
    attributeType: "XML",
    attributeName: "height",
    from: "1",
    to: "7.2",
    begin: "loop.begin+1.5s;",
    dur: "0.15s"
  })), /*#__PURE__*/React__default['default'].createElement("rect", {
    height: "1",
    width: "1",
    x: "-10",
    y: "-10",
    fill: "none"
  }, /*#__PURE__*/React__default['default'].createElement("animate", {
    attributeType: "CSS",
    attributeName: "visibility",
    from: "hide",
    to: "hide",
    begin: "0;loop.end",
    dur: "3s",
    id: "loop"
  })));
};

var Xport = function Xport(props) {
  // State
  var _useState = React.useState(false),
      _useState2 = _slicedToArray(_useState, 2),
      link = _useState2[0],
      setLink = _useState2[1];

  var _useState3 = React.useState(false),
      _useState4 = _slicedToArray(_useState3, 2),
      loading = _useState4[0],
      setLoading = _useState4[1];

  var data = props.gist; // Remove embed setting

  delete data.settings.embed; // Methods

  var handleExport = function handleExport(type, format) {
    if (type === 'data') {
      if (format === 'json') exportJsonData(data);else if (format === 'yaml') exportYamlData(data);else if (format === 'github gist') exportGithubGist(data);
    } else {
      if (format !== 'svg') setLoading(true);
      var svg = new props.Pattern(data.settings).use(theme__default['default']).use(index$1, {
        strings: i18n.plugin
      }).draft().render();

      if (type === 'raw') {
        if (format === 'svg') svgToFile(svg);else if (format === 'postscript') convert(svg, 'ps', 'full').then(function (url) {
          return ready(url);
        });else if (format === 'pdf') convert(svg, 'pdf', 'full').then(function (url) {
          return ready(url);
        });
      } else if (type === 'tile') convert(svg, 'pdf', format).then(function (url) {
        return ready(url);
      });
    }
  };

  var ready = function ready(url) {
    console.log('Inside ready', url);
    setLink(url);
    setLoading(false);
  };

  var exportJsonData = function exportJsonData(data) {
    var blob = new Blob([JSON.stringify(data, null, 2)], {
      type: 'application/json;charset=utf-8'
    });
    fileSaver__default['default'].saveAs(blob, 'data.json');
  };

  var exportYamlData = function exportYamlData(data) {
    var blob = new Blob([YAML__default['default'].stringify(data)], {
      type: 'application/x-yaml;charset=utf-8'
    });
    fileSaver__default['default'].saveAs(blob, 'data.yaml');
  };

  var exportGithubGist = function exportGithubGist(data) {
    setLoading(true);
    new Backend__default['default']('https://backend.freesewing.org/').createGist({
      data: YAML__default['default'].stringify(data),
      design: data.design
    }).then(function (res) {
      return ready('https://gist.github.com/' + res.data.id);
    })["catch"](function (err) {
      return console.log(err);
    })["finally"](function () {
      return setLoading(false);
    });
  };

  var svgToFile = function svgToFile(svg) {
    var blob = new Blob([svg], {
      type: 'image/svg+xml;charset=utf-8'
    });
    fileSaver__default['default'].saveAs(blob, 'pattern.svg');
  };

  var tile = function tile(svg, format, size) {
    return new Tiler__default['default']().tile(svg, format, size).then(function (res) {
      if (res.status === 200) return res.data.link;
      return false;
    })["catch"](function (err) {
      console.log(err);
      return false;
    });
  };

  var convert = function convert(svg, format) {
    var size = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'full';
    return tile(svg, format, size);
  }; // Style


  var styles = {
    wrapper: {
      display: 'flex',
      flexDirection: 'row',
      flexWrap: 'wrap',
      justifyContent: 'space-around'
    },
    column: {
      width: '100%',
      maxWidth: '350px'
    },
    button: {
      margin: '0.5rem',
      width: 'calc(100% - 1rem)'
    },
    blockquote: {
      background: 'red'
    },
    loader: {
      textAlign: 'center',
      margin: 'auto'
    },
    download: {
      textAlign: 'left'
    },
    link: {
      fontFamily: "'Roboto Condensed', sans-serif",
      fontWeight: 'bold',
      marginLeft: '2rem'
    }
  };
  var btnProps = {
    size: 'large',
    variant: 'contained',
    color: 'primary',
    style: styles.button
  };
  if (loading) return /*#__PURE__*/React__default['default'].createElement(Spinner, {
    size: 200
  });
  return /*#__PURE__*/React__default['default'].createElement(React__default['default'].Fragment, null, /*#__PURE__*/React__default['default'].createElement("div", {
    style: styles.wrapper
  }, link ? /*#__PURE__*/React__default['default'].createElement("div", {
    style: styles.download
  }, /*#__PURE__*/React__default['default'].createElement(Blockquote, {
    type: "note"
  }, /*#__PURE__*/React__default['default'].createElement("h5", null, "Your export is ready"), /*#__PURE__*/React__default['default'].createElement("p", null, "You can download your exported pattern from the following link:"), /*#__PURE__*/React__default['default'].createElement("p", {
    style: styles.link
  }, /*#__PURE__*/React__default['default'].createElement("a", {
    href: link,
    target: "_BLANK"
  }, link)), /*#__PURE__*/React__default['default'].createElement("p", {
    style: {
      textAlign: 'right'
    }
  }, /*#__PURE__*/React__default['default'].createElement(Button__default['default'], {
    variant: "outlined",
    color: "primary",
    onClick: function onClick() {
      return setLink(false);
    },
    className: "info"
  }, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "app.back"
  }))))) : /*#__PURE__*/React__default['default'].createElement(React__default['default'].Fragment, null, /*#__PURE__*/React__default['default'].createElement("div", {
    style: styles.column,
    "data-test": "printing"
  }, /*#__PURE__*/React__default['default'].createElement("h5", null, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "app.exportForPrinting"
  })), ['a4', 'a3', 'a2', 'a1', 'a0', 'letter', 'tabloid'].map(function (size) {
    return /*#__PURE__*/React__default['default'].createElement(Button__default['default'], _extends({}, btnProps, {
      onClick: function onClick() {
        return handleExport('tile', size);
      },
      "data-test": size,
      key: size
    }), size, " PDF");
  })), /*#__PURE__*/React__default['default'].createElement("div", {
    style: styles.column,
    "data-test": "editing"
  }, /*#__PURE__*/React__default['default'].createElement("h5", null, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "app.exportForEditing"
  })), ['svg', 'postscript', 'pdf'].map(function (format) {
    return /*#__PURE__*/React__default['default'].createElement(Button__default['default'], _extends({}, btnProps, {
      onClick: function onClick() {
        return handleExport('raw', format);
      },
      "data-test": format,
      key: format
    }), format);
  }), /*#__PURE__*/React__default['default'].createElement("h5", null, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
    id: "app.exportAsData"
  })), ['json', 'yaml', 'github gist'].map(function (format) {
    return /*#__PURE__*/React__default['default'].createElement(Button__default['default'], _extends({}, btnProps, {
      onClick: function onClick() {
        return handleExport('data', format);
      },
      "data-test": format,
      key: format
    }), format);
  })))));
};

var Footer = function Footer(props) {
  return /*#__PURE__*/React__default['default'].createElement("footer", null, /*#__PURE__*/React__default['default'].createElement("div", {
    className: "cols"
  }, /*#__PURE__*/React__default['default'].createElement("div", null, /*#__PURE__*/React__default['default'].createElement("ul", null, /*#__PURE__*/React__default['default'].createElement("li", {
    className: "heading"
  }), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
    href: "https://freesewing.dev/reference/api/"
  }, "Core API")), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
    href: "https://freesewing.dev/reference/macros/"
  }, "Macros")), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
    href: "https://freesewing.dev/reference/plugins/"
  }, "Plugins")), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
    href: "https://freesewing.dev/reference/snippets/"
  }, "Snippets")), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
    href: "https://freesewing.dev/reference/config/"
  }, "Pattern configuration")), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
    href: "https://freesewing.dev/reference/settings/"
  }, "Pattern settings")), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
    href: "https://freesewing.dev/howtos/code/"
  }, "Common code challenges")), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
    href: "https://freesewing.dev/howtos/code/"
  }, "Common code challenges")), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
    href: "https://freesewing.dev/howtos/design/"
  }, "Common design challenges")))), /*#__PURE__*/React__default['default'].createElement("div", null, /*#__PURE__*/React__default['default'].createElement("ul", null, /*#__PURE__*/React__default['default'].createElement("li", {
    className: "heading"
  }, "Links"), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
    href: "https://freesewing.org/"
  }, "FreeSewing.org")), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
    href: "https://freesewing.dev/"
  }, "FreeSewing.dev")), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
    href: "https://discord.freesewing.org/"
  }, "discord.freesewing.org")))), /*#__PURE__*/React__default['default'].createElement("div", null, /*#__PURE__*/React__default['default'].createElement("ul", null, /*#__PURE__*/React__default['default'].createElement("li", {
    className: "heading"
  }, "Social Media"), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
    href: "https://discord.gg/YDV4GvU",
    title: "discord"
  }, "Discord")), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
    href: "https://instagram.com/freesewing_org",
    title: "instagram"
  }, "Instagram")), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
    href: "https://www.facebook.com/groups/627769821272714/",
    title: "facebook"
  }, "Facebook")), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
    href: "https://github.com/freesewing",
    title: "github"
  }, "Github")), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
    href: "https://www.reddit.com/r/freesewing/",
    title: "reddit"
  }, "Reddit")), /*#__PURE__*/React__default['default'].createElement("li", null, /*#__PURE__*/React__default['default'].createElement("a", {
    href: "https://twitter.com/freesewing_org",
    title: "twitter"
  }, "Twitter")))), /*#__PURE__*/React__default['default'].createElement("div", null, /*#__PURE__*/React__default['default'].createElement("div", {
    className: "logo"
  }, /*#__PURE__*/React__default['default'].createElement("a", {
    href: "https://freesewing.org/",
    title: "freesewing.org"
  }, /*#__PURE__*/React__default['default'].createElement(Logo, {
    size: 100
  })), /*#__PURE__*/React__default['default'].createElement("div", {
    className: "name"
  }, /*#__PURE__*/React__default['default'].createElement("span", {
    className: "free"
  }, "Free"), "Sewing")), /*#__PURE__*/React__default['default'].createElement("div", {
    className: "slogan"
  }, "Come for the sewing patterns", /*#__PURE__*/React__default['default'].createElement("br", null), "Stay for the community"))));
};

var Footer$1 = /*#__PURE__*/React__default['default'].memo(Footer);

var sass = "div.workbench.theme-wrapper > div > header a.navlink {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  color: #f8f9fa;\n  text-align: center;\n  text-transform: uppercase;\n  font-size: 1rem;\n  font-weight: 500;\n  padding: 1.5rem 1rem 1rem !important;\n}\ndiv.workbench.theme-wrapper > div > header a.navlink svg {\n  color: inherit;\n  width: 42px;\n  height: 42px;\n  margin-bottom: 12px;\n}\ndiv.workbench.theme-wrapper > div > header a.navlink.theme svg {\n  transform: rotate(26deg);\n  color: #ffe066;\n}\ndiv.workbench.theme-wrapper > div > header a.navlink.active svg {\n  color: #51cf66;\n}\ndiv.workbench.theme-wrapper > div > header a.logo:hover,\ndiv.workbench.theme-wrapper > div > header a.navlink:hover {\n  color: #d0bfff;\n  text-decoration: none;\n  transition: color 0.2s;\n}\ndiv.workbench.theme-wrapper div.fill {\n  width: 100%;\n  margin: 0;\n}\ndiv.workbench.theme-wrapper div.fill div.inner {\n  max-width: 1200px;\n  padding: 3rem;\n  margin: auto;\n  display: flex;\n  flex-direction: column;\n  min-height: 50vh;\n}";

var extraTranslations = {};

var Workbench = function Workbench(_ref) {
  var updateGist = _ref.updateGist,
      setLanguage = _ref.setLanguage,
      _ref$userLanguage = _ref.userLanguage,
      userLanguage = _ref$userLanguage === void 0 ? 'en' : _ref$userLanguage,
      _ref$language = _ref.language,
      language = _ref$language === void 0 ? 'en' : _ref$language,
      gist = _ref.gist;
      _ref.importGist;
      var freesewing = _ref.freesewing,
      Pattern = _ref.Pattern,
      _ref$units = _ref.units,
      units = _ref$units === void 0 ? 'metric' : _ref$units,
      _ref$translations = _ref.translations,
      translations = _ref$translations === void 0 ? false : _ref$translations,
      addTranslations = _ref.addTranslations,
      _ref$recreate = _ref.recreate,
      recreate = _ref$recreate === void 0 ? false : _ref$recreate;

  if (translations) {
    for (var key in translations) {
      extraTranslations[key] = translations[key];
    }
  }

  var _useState = React.useState(null),
      _useState2 = _slicedToArray(_useState, 2),
      display = _useState2[0],
      setDisplay = _useState2[1];

  var _useState3 = React.useState('light'),
      _useState4 = _slicedToArray(_useState3, 2),
      theme = _useState4[0],
      setTheme = _useState4[1];

  var _useState5 = React.useState(null),
      _useState6 = _slicedToArray(_useState5, 2),
      measurements = _useState6[0],
      setMeasurements = _useState6[1];

  var _useState7 = React.useState(false),
      _useState8 = _slicedToArray(_useState7, 2),
      svgExport = _useState8[0],
      setSvgExport = _useState8[1];

  var _useState9 = React.useState(false),
      _useState10 = _slicedToArray(_useState9, 2),
      viewBox = _useState10[0],
      setViewBox = _useState10[1];

  var _useState11 = React.useState(false),
      _useState12 = _slicedToArray(_useState11, 2),
      hideAside = _useState12[0],
      setHideAside = _useState12[1];

  var _useState13 = React.useState(true),
      _useState14 = _slicedToArray(_useState13, 2),
      design = _useState14[0],
      setDesign = _useState14[1];

  var _useState15 = React.useState(null),
      _useState16 = _slicedToArray(_useState15, 2),
      focus = _useState16[0],
      setFocus = _useState16[1];

  var _useState17 = React.useState(null),
      _useState18 = _slicedToArray(_useState17, 2);
      _useState18[0];
      var setError = _useState18[1];

  var raiseEvent = function raiseEvent(type, data) {
    if (type === 'clearFocusAll') {
      updateGist(false, 'settings', 'only');
      return setFocus(null);
    }

    var f = {};
    if (focus !== null) f = _objectSpread2({}, focus);
    if (typeof f[data.part] === 'undefined') f[data.part] = {
      paths: [],
      points: [],
      coords: []
    };
    if (type === 'point') f[data.part].points.push(data.name);else if (type === 'path') f[data.part].paths.push(data.name);else if (type === 'coords') f[data.part].coords.push(data.coords);else if (type === 'clearFocus') {
      var i = focus[data.part][data.type].indexOf(data.name);
      f[data.part][data.type].splice(i, 1);
    } else if (type === 'part') updateGist(data, 'settings', 'only');
    setFocus(f);
  }; // Get config from pattern object


  var config = Pattern.config; // Enable debug in Workbench

  defaultGist__default['default'].settings.debug = true;
  React.useEffect(function () {
    if (recreate) {
      // Recreating from existing pattern config
      axios__default['default'].get("https://api.github.com/gists/".concat(recreate.id)).then(function (res) {
        if (res.data.files['pattern.yaml'].content) {
          var g = YAML__default['default'].parse(res.data.files['pattern.yaml'].content);

          if (g.design !== Pattern.config.name) {
            setError("You tried loading a configuration for ".concat(g.design, " into a ").concat(Pattern.config.name, " development environment"));
            setDisplay('error');
          }

          setMeasurements(g.settings.measurements);
          updateGist(g.settings, 'settings');
          setLanguage(g.settings.locale);
        } else {
          setError('This gist does not seem to be a valid pattern configuration');
          setDisplay('error');
        }
      })["catch"](function (err) {
        setError(err);
        setDisplay('error');
      });
    } else {
      var m = getMeasurements();
      setMeasurements(m);
      updateGist(m, 'settings', 'measurements');
      setLanguage(userLanguage);
    }

    if (translations) addTranslations(translations);
  }, []);
  React.useEffect(function () {
    if (language !== gist.settings.locale) updateGist(language, 'settings', 'locale');
  }, [language]);

  var getMeasurements = function getMeasurements() {
    return storage__default['default'].get(config.name + '-measurements');
  };

  var saveMeasurements = function saveMeasurements(data) {
    storage__default['default'].set(config.name + '-measurements', data);
    updateGist(data, 'settings', 'measurements');
  };

  var updateMeasurement = function updateMeasurement(name, val) {
    var updatedMeasurements = _objectSpread2({}, measurements);

    updatedMeasurements[name] = val;
    setMeasurements(updatedMeasurements);
    saveMeasurements(updatedMeasurements);
  };

  var preloadMeasurements = function preloadMeasurements(model) {
    var updatedMeasurements = _objectSpread2(_objectSpread2({}, measurements), model);

    setMeasurements(updatedMeasurements);
    saveMeasurements(updatedMeasurements);
  };

  var measurementsMissing = function measurementsMissing() {
    var required = config.measurements;
    if (required.length < 1) return false;
    if (measurements === null) return true;

    var _iterator = _createForOfIteratorHelper(required),
        _step;

    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var m = _step.value;

        if (typeof measurements[m] === 'undefined') {
          console.log('measurement missing', m.measurements);
          return true;
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }

    return false;
  };

  var toggleDarkMode = function toggleDarkMode() {
    if (theme === 'light') setTheme('dark');else setTheme('light');
  }; //const raiseEvent = (type = null, data = null) => {}


  var languageButtons = function languageButtons() {
    return /*#__PURE__*/React__default['default'].createElement("p", null, Object.keys(i18n.languages).map(function (lang) {
      return /*#__PURE__*/React__default['default'].createElement(Button__default['default'], {
        key: lang,
        color: "primary",
        size: "large",
        variant: "outlined",
        onClick: function onClick() {
          return setLanguage(lang);
        },
        style: {
          margin: '0 0.5rem 0.5rem 0'
        },
        disabled: lang === language ? true : false
      }, i18n.languages[lang]);
    }));
  };

  var styles$1 = {
    unhide: {
      position: 'absolute',
      left: 0,
      top: 0
    }
  };
  var main = null;
  var preMenu = null;
  var pattern;

  switch (display) {
    case 'languages':
      main = /*#__PURE__*/React__default['default'].createElement("div", {
        style: {
          textAlign: 'center'
        }
      }, /*#__PURE__*/React__default['default'].createElement("h1", null, /*#__PURE__*/React__default['default'].createElement(reactIntl.FormattedMessage, {
        id: "account.languageTitle"
      })), languageButtons());
      break;

    case 'draft':
      if (measurementsMissing()) {
        setDisplay('measurements');
        break;
      }

      pattern = new Pattern(gist.settings);
      pattern.draft();
      var patternProps = pattern.getRenderProps();
      main = /*#__PURE__*/React__default['default'].createElement(DraftPattern$1, {
        freesewing: freesewing,
        Pattern: Pattern,
        patternProps: patternProps,
        config: config,
        gist: gist,
        updateGist: updateGist,
        raiseEvent: raiseEvent,
        units: units,
        svgExport: svgExport,
        setSvgExport: setSvgExport,
        theme: theme,
        viewBox: viewBox,
        focus: focus,
        design: design
      });
      preMenu = /*#__PURE__*/React__default['default'].createElement(DraftPattern, {
        freesewing: freesewing,
        Pattern: Pattern,
        patternProps: patternProps,
        config: config,
        gist: gist,
        updateGist: updateGist,
        raiseEvent: raiseEvent,
        units: units,
        svgExport: svgExport,
        setSvgExport: setSvgExport,
        theme: theme,
        viewBox: viewBox,
        setViewBox: setViewBox,
        setHideAside: setHideAside,
        focus: focus,
        setFocus: setFocus,
        design: design,
        setDesign: setDesign,
        pattern: pattern
      });
      break;

    case 'sample':
      if (measurementsMissing()) {
        setDisplay('measurements');
        break;
      }

      preMenu = /*#__PURE__*/React__default['default'].createElement(SampleConfigurator, {
        config: config,
        gist: gist,
        updateGist: updateGist,
        raiseEvent: raiseEvent,
        freesewing: freesewing,
        units: units || 'metric'
      });
      if (!gist.settings.sample) main = null;else {
        pattern = new Pattern(_objectSpread2(_objectSpread2({}, gist.settings), {}, {
          embed: true
        })).use(index$2, {
          "class": 'freesewing draft'
        });

        try {
          pattern.sample();
        } catch (err) {
          console.log(err);
        }

        main = /*#__PURE__*/React__default['default'].createElement("div", {
          dangerouslySetInnerHTML: {
            __html: pattern.render()
          }
        });
      }
      break;

    case 'measurements':
      main = /*#__PURE__*/React__default['default'].createElement(Measurements, {
        measurements: measurements,
        required: config.measurements,
        units: units,
        updateMeasurement: updateMeasurement,
        preloadMeasurements: preloadMeasurements,
        language: language
      });
      break;

    case 'xport':
      main = /*#__PURE__*/React__default['default'].createElement(Xport, {
        freesewing: freesewing,
        Pattern: Pattern,
        config: config,
        gist: gist,
        units: units,
        theme: theme
      });
      break;

    case 'json':
      main = /*#__PURE__*/React__default['default'].createElement(PatternJson, {
        gist: gist
      });
      break;

    default:
      main = /*#__PURE__*/React__default['default'].createElement(React__default['default'].Fragment, null, /*#__PURE__*/React__default['default'].createElement(Welcome, {
        language: language,
        setDisplay: setDisplay
      }), /*#__PURE__*/React__default['default'].createElement("div", {
        style: {
          textAlign: 'center'
        }
      }, languageButtons()));
  }

  var themes = {
    dark: muiTheme.dark,
    light: muiTheme.light
  };
  return /*#__PURE__*/React__default['default'].createElement(styles.MuiThemeProvider, {
    theme: styles.createMuiTheme(themes[theme])
  }, /*#__PURE__*/React__default['default'].createElement("style", null, sass), /*#__PURE__*/React__default['default'].createElement("div", {
    className: theme === 'light' ? 'workbench theme-wrapper light' : 'workbench theme-wrapper dark'
  }, /*#__PURE__*/React__default['default'].createElement(ButtonAppBar, {
    display: display,
    setDisplay: setDisplay,
    toggleDarkMode: toggleDarkMode,
    config: config,
    theme: theme,
    language: language
  }), ['draft', 'sample'].indexOf(display) !== -1 ? /*#__PURE__*/React__default['default'].createElement("div", {
    className: "layout-wrapper"
  }, /*#__PURE__*/React__default['default'].createElement("div", {
    className: "layout"
  }, hideAside ? /*#__PURE__*/React__default['default'].createElement("a", {
    href: "#",
    style: styles$1.unhide,
    onClick: function onClick() {
      return setHideAside(false);
    }
  }, /*#__PURE__*/React__default['default'].createElement(UnhideIcon__default['default'], null)) : /*#__PURE__*/React__default['default'].createElement("aside", null, /*#__PURE__*/React__default['default'].createElement("div", {
    className: "sticky"
  }, preMenu)), /*#__PURE__*/React__default['default'].createElement("section", null, main))) : /*#__PURE__*/React__default['default'].createElement("div", {
    className: "fill"
  }, /*#__PURE__*/React__default['default'].createElement("div", {
    className: "inner"
  }, main)), /*#__PURE__*/React__default['default'].createElement(Footer$1, null)));
};

var index = withLanguage(withGist(Workbench, {
  gist: defaultGist__default['default'],
  store: true
}), 'en', false, extraTranslations);

module.exports = index;
//# sourceMappingURL=index.js.map
