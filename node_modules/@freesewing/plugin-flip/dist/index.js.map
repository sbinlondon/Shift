{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import { name, version } from '../package.json'\n\nexport default {\n  name: name,\n  version: version,\n  hooks: {\n    preRender: function (svg) {\n      if (svg.attributes.get('freesewing:plugin-flip') === false)\n        svg.attributes.set('freesewing:plugin-flip', version)\n    },\n  },\n  macros: {\n    flip: function () {\n      let flipped = null\n      let ops = ['from', 'to', 'cp1', 'cp2']\n      for (let id in this.points) {\n        // Keep track of the amount of flips (needed to allow flipping twice, but also avoid double flips in paths below)\n        if (flipped === null) {\n          flipped = this.points[id].attributes.get('flipped')\n          if (flipped === false) flipped = 1\n          else flipped += 1\n        }\n        this.points[id].x = this.points[id].x * -1\n        this.points[id].attributes.set('flipped', flipped)\n      }\n      for (let id of Object.keys(this.paths)) {\n        for (let op in this.paths[id].ops) {\n          for (let type of ops) {\n            if (typeof this.paths[id].ops[op][type] !== 'undefined') {\n              // Path ops can use points not listed in part.points. We should only flip those here\n              // and not double flip the points flipped above\n              let wasFlipped = this.paths[id].ops[op][type].attributes.get('flipped')\n              if (wasFlipped !== false) wasFlipped = parseInt(wasFlipped)\n              if (wasFlipped !== flipped) {\n                this.paths[id].ops[op][type].x = this.paths[id].ops[op][type].x * -1\n                this.paths[id].ops[op][type].attributes.set('flipped', flipped)\n              }\n            }\n          }\n        }\n      }\n      for (let id of Object.keys(this.snippets)) {\n        // Snippets use points not listed in part.points. We should only flip those here\n        // and not double flip the points flipped above\n        let wasFlipped = this.snippets[id].anchor.attributes.get('flipped')\n        if (wasFlipped !== false) wasFlipped = parseInt(wasFlipped)\n        if (wasFlipped !== flipped) this.snippets[id].anchor.x = this.snippets[id].anchor.x * -1\n      }\n    },\n  },\n}\n"],"names":[],"mappings":"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"}