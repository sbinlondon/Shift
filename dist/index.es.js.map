{"version":3,"file":"index.es.js","sources":["../node_modules/@freesewing/core/dist/index.mjs","../node_modules/@freesewing/plugin-bundle/dist/index.mjs","../config/index.js","../src/index.js","../src/box.js"],"sourcesContent":["/**\n * @freesewing/core | v2.17.0\n * A library for creating made-to-measure sewing patterns\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nfunction Attributes() {\n  this.list = {};\n}\n/** Adds an attribute */\n\n\nAttributes.prototype.add = function (name, value) {\n  if (typeof this.list[name] === 'undefined') {\n    this.list[name] = [];\n  }\n\n  this.list[name].push(value);\n  return this;\n};\n/** Sets an attribute, overwriting existing value */\n\n\nAttributes.prototype.set = function (name, value) {\n  this.list[name] = [value];\n  return this;\n};\n/** Removes an attribute */\n\n\nAttributes.prototype.remove = function (name) {\n  delete this.list[name];\n  return this;\n};\n/** Retrieves an attribute */\n\n\nAttributes.prototype.get = function (name) {\n  if (typeof this.list[name] === 'undefined') return false;else return this.list[name].join(' ');\n};\n/** Retrieves an attribute as array*/\n\n\nAttributes.prototype.getAsArray = function (name) {\n  if (typeof this.list[name] === 'undefined') return false;else return this.list[name];\n};\n/** Returns SVG code for attributes */\n\n\nAttributes.prototype.render = function () {\n  let svg = '';\n\n  for (let key in this.list) {\n    svg += ` ${key}=\"${this.list[key].join(' ')}\"`;\n  }\n\n  return svg;\n};\n/** Returns CSS code for attributes */\n\n\nAttributes.prototype.renderAsCss = function () {\n  let css = '';\n\n  for (let key in this.list) {\n    css += ` ${key}:${this.list[key].join(' ')};`;\n  }\n\n  return css;\n};\n/** Returns SVG code for attributes with a fiven prefix\n * typically used for data-text*/\n\n\nAttributes.prototype.renderIfPrefixIs = function (prefix = '') {\n  let svg = '';\n  let prefixLen = prefix.length;\n\n  for (let key in this.list) {\n    if (key.substr(0, prefixLen) === prefix) {\n      svg += ` ${key.substr(prefixLen)}=\"${this.list[key].join(' ')}\"`;\n    }\n  }\n\n  return svg;\n};\n/** Returns a props object for attributes with a fiven prefix\n * typically used for data-text*/\n\n\nAttributes.prototype.asPropsIfPrefixIs = function (prefix = '') {\n  let props = {};\n  let prefixLen = prefix.length;\n\n  for (let key in this.list) {\n    if (key.substr(0, prefixLen) === prefix) {\n      let propKey = key.substr(prefixLen);\n      if (propKey === 'class') propKey = 'className';\n      props[propKey] = this.get(key);\n    }\n  }\n\n  return props;\n};\n/** Returns a deep copy of this */\n\n\nAttributes.prototype.clone = function () {\n  let clone = new Attributes();\n  clone.list = JSON.parse(JSON.stringify(this.list));\n  return clone;\n};\n\nfunction Point(x, y, debug = false) {\n  this.x = x;\n  this.y = y;\n  this.attributes = new Attributes();\n  Object.defineProperty(this, 'debug', {\n    value: debug,\n    configurable: true\n  });\n}\n/** Adds the raise method for a path not created through the proxy **/\n\n\nPoint.prototype.withRaise = function (raise = false) {\n  if (raise) Object.defineProperty(this, 'raise', {\n    value: raise\n  });\n  return this;\n};\n/** Debug method to validate point data **/\n\n\nPoint.prototype.check = function () {\n  if (typeof this.x !== 'number') this.raise.warning('X value of `Point` is not a number');\n  if (typeof this.y !== 'number') this.raise.warning('Y value of `Point` is not a number');\n};\n/** Radians to degrees */\n\n\nPoint.prototype.rad2deg = function (radians) {\n  return radians * 57.29577951308232;\n};\n/** Degrees to radians */\n\n\nPoint.prototype.deg2rad = function (degrees) {\n  return degrees / 57.29577951308232;\n};\n/** Adds an attribute. This is here to make this call chainable in assignment */\n\n\nPoint.prototype.attr = function (name, value, overwrite = false) {\n  if (this.debug) this.check();\n  if (overwrite) this.attributes.set(name, value);else this.attributes.add(name, value);\n  return this;\n};\n/** Returns the distance between this point and that point */\n\n\nPoint.prototype.dist = function (that) {\n  if (this.debug) {\n    this.check();\n    that.check();\n  }\n\n  let dx = this.x - that.x;\n  let dy = this.y - that.y;\n  return Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));\n};\n/** Returns slope of a line made by this point and that point */\n\n\nPoint.prototype.slope = function (that) {\n  if (this.debug) {\n    this.check();\n    that.check();\n  }\n\n  return (that.y - this.y) / (that.x - this.x);\n};\n/** Returns the x-delta between this point and that point */\n\n\nPoint.prototype.dx = function (that) {\n  if (this.debug) {\n    this.check();\n    that.check();\n  }\n\n  return that.x - this.x;\n};\n/** Returns the y-delta between this point and that point */\n\n\nPoint.prototype.dy = function (that) {\n  if (this.debug) {\n    this.check();\n    that.check();\n  }\n\n  return that.y - this.y;\n};\n/** Returns the angle between this point and that point */\n\n\nPoint.prototype.angle = function (that) {\n  if (this.debug) {\n    this.check();\n    that.check();\n  }\n\n  let rad = Math.atan2(-1 * this.dy(that), this.dx(that));\n\n  while (rad < 0) rad += 2 * Math.PI;\n\n  return this.rad2deg(rad);\n};\n/** Rotate this point deg around that point */\n\n\nPoint.prototype.rotate = function (deg, that) {\n  if (this.debug) {\n    this.check();\n    that.check();\n    if (typeof deg !== 'number') this.raise.warning('Called `Point.rotate(deg,that)` but `deg` is not a number');\n    if (that instanceof Point !== true) this.raise.warning('Called `Point.rotate(deg,that)` but `that` is not a `Point` object');\n  }\n\n  let radius = this.dist(that);\n  let angle = this.angle(that);\n  let x = that.x + radius * Math.cos(this.deg2rad(angle + deg)) * -1;\n  let y = that.y + radius * Math.sin(this.deg2rad(angle + deg));\n  return new Point(x, y, this.debug).withRaise(this.raise);\n};\n/** returns an identical copy of this point */\n\n\nPoint.prototype.copy = function () {\n  if (this.debug) this.check();\n  return new Point(this.x, this.y, this.debug).withRaise(this.raise);\n};\n/** Mirrors this point around X value of that point */\n\n\nPoint.prototype.flipX = function (that = false) {\n  if (this.debug) {\n    this.check();\n\n    if (that) {\n      if (that instanceof Point !== true) this.raise.warning('Called `Point.rotate(deg,that)` but `that` is not a `Point` object');\n      that.check();\n    }\n  }\n\n  if (that === false || that.x === 0) return new Point(this.x * -1, this.y, this.debug).withRaise(this.raise);else return new Point(that.x + this.dx(that), this.y, this.debug).withRaise(this.raise);\n};\n/** Mirrors this point around Y value of that point */\n\n\nPoint.prototype.flipY = function (that = false) {\n  if (this.debug) {\n    this.check();\n\n    if (that) {\n      if (that instanceof Point !== true) this.raise.warning('Called `Point.flipY(that)` but `that` is not a `Point` object');\n      that.check();\n    }\n  }\n\n  if (that === false || that.y === 0) return new Point(this.x, this.y * -1, this.debug).withRaise(this.raise);else return new Point(this.x, that.y + this.dy(that), this.debug).withRaise(this.raise);\n};\n/** Shifts this point distance in the deg direction */\n\n\nPoint.prototype.shift = function (deg, distance) {\n  if (this.debug) {\n    this.check();\n    if (typeof distance !== 'number') this.raise.warning('Called `Point.shift` but `distance` is not a number');\n  }\n\n  let p = this.copy();\n  p.x += distance;\n  return p.rotate(deg, this);\n};\n/** Shifts this point distance in the direction of that point */\n\n\nPoint.prototype.shiftTowards = function (that, distance) {\n  if (this.debug) {\n    if (typeof distance !== 'number') this.raise.warning('Called `Point.shiftTowards` but `distance` is not a number');\n    if (that instanceof Point !== true) this.raise.warning('Called `Point.shiftTowards(that, distance)` but `that` is not a `Point` object');\n    this.check();\n    that.check();\n  }\n\n  if (this.debug) this.check();\n  return this.shift(this.angle(that), distance);\n};\n/** Checks whether this has the same coordinates as that */\n\n\nPoint.prototype.sitsOn = function (that) {\n  if (this.debug) {\n    if (that instanceof Point !== true) this.raise.warning('Called `Point.sitsOn(that)` but `that` is not a `Point` object');\n    this.check();\n    that.check();\n  }\n\n  if (this.x === that.x && this.y === that.y) return true;else return false;\n};\n/** Checks whether this has roughly the same coordinates as that */\n\n\nPoint.prototype.sitsRoughlyOn = function (that) {\n  if (this.debug) {\n    if (that instanceof Point !== true) this.raise.warning('Called `Point.sitsRoughlyOn(that)` but `that` is not a `Point` object');\n    this.check();\n    that.check();\n  }\n\n  if (Math.round(this.x) === Math.round(that.x) && Math.round(this.y) === Math.round(that.y)) return true;else return false;\n};\n/** Shifts this point fraction of the distance towards that point */\n\n\nPoint.prototype.shiftFractionTowards = function (that, fraction) {\n  if (this.debug) {\n    if (that instanceof Point !== true) this.raise.warning('Called `Point.shiftFractionTowards(that, fraction)` but `that` is not a `Point` object');\n    if (typeof fraction !== 'number') this.raise.warning('Called `Point.shiftFractionTowards` but `fraction` is not a number');\n    this.check();\n    that.check();\n  }\n\n  return this.shiftTowards(that, this.dist(that) * fraction);\n};\n/** Shifts this point distance beyond that point */\n\n\nPoint.prototype.shiftOutwards = function (that, distance) {\n  if (this.debug) {\n    if (that instanceof Point !== true) this.raise.warning('Called `Point.shiftOutwards(that, distance)` but `that` is not a `Point` object');\n    if (typeof distance !== 'number') this.raise.warning('Called `Point.shiftOutwards(that, distance)` but `distance` is not a number');\n    this.check();\n    that.check();\n  }\n\n  return this.shiftTowards(that, this.dist(that) + distance);\n};\n/** Returns a deep copy of this */\n\n\nPoint.prototype.clone = function () {\n  if (this.debug) this.check();\n  let clone = new Point(this.x, this.y, this.debug).withRaise(this.raise);\n  clone.attributes = this.attributes.clone();\n  return clone;\n};\n/** Applies a translate transform */\n\n\nPoint.prototype.translate = function (x, y) {\n  if (this.debug) {\n    this.check();\n    if (typeof x !== 'number') this.raise.warning('Called `Point.translate(x,y)` but `x` is not a number');\n    if (typeof y !== 'number') this.raise.warning('Called `Point.translate(x,y)` but `y` is not a number');\n  }\n\n  let p = this.copy();\n  p.x += x;\n  p.y += y;\n  return p;\n};\n\nconst {\n  abs: abs$1,\n  cos: cos$1,\n  sin: sin$1,\n  acos: acos$1,\n  atan2,\n  sqrt: sqrt$1,\n  pow\n} = Math; // cube root function yielding real roots\n\nfunction crt(v) {\n  return v < 0 ? -pow(-v, 1 / 3) : pow(v, 1 / 3);\n} // trig constants\n\n\nconst pi$1 = Math.PI,\n      tau = 2 * pi$1,\n      quart = pi$1 / 2,\n      // float precision significant decimal\nepsilon = 0.000001,\n      // extremas used in bbox calculation and similar algorithms\nnMax = Number.MAX_SAFE_INTEGER || 9007199254740991,\n      nMin = Number.MIN_SAFE_INTEGER || -9007199254740991,\n      // a zero coordinate, which is surprisingly useful\nZERO = {\n  x: 0,\n  y: 0,\n  z: 0\n}; // Bezier utility functions\n\nconst utils$1 = {\n  // Legendre-Gauss abscissae with n=24 (x_i values, defined at i=n as the roots of the nth order Legendre polynomial Pn(x))\n  Tvalues: [-0.0640568928626056260850430826247450385909, 0.0640568928626056260850430826247450385909, -0.1911188674736163091586398207570696318404, 0.1911188674736163091586398207570696318404, -0.3150426796961633743867932913198102407864, 0.3150426796961633743867932913198102407864, -0.4337935076260451384870842319133497124524, 0.4337935076260451384870842319133497124524, -0.5454214713888395356583756172183723700107, 0.5454214713888395356583756172183723700107, -0.6480936519369755692524957869107476266696, 0.6480936519369755692524957869107476266696, -0.7401241915785543642438281030999784255232, 0.7401241915785543642438281030999784255232, -0.8200019859739029219539498726697452080761, 0.8200019859739029219539498726697452080761, -0.8864155270044010342131543419821967550873, 0.8864155270044010342131543419821967550873, -0.9382745520027327585236490017087214496548, 0.9382745520027327585236490017087214496548, -0.9747285559713094981983919930081690617411, 0.9747285559713094981983919930081690617411, -0.9951872199970213601799974097007368118745, 0.9951872199970213601799974097007368118745],\n  // Legendre-Gauss weights with n=24 (w_i values, defined by a function linked to in the Bezier primer article)\n  Cvalues: [0.1279381953467521569740561652246953718517, 0.1279381953467521569740561652246953718517, 0.1258374563468282961213753825111836887264, 0.1258374563468282961213753825111836887264, 0.121670472927803391204463153476262425607, 0.121670472927803391204463153476262425607, 0.1155056680537256013533444839067835598622, 0.1155056680537256013533444839067835598622, 0.1074442701159656347825773424466062227946, 0.1074442701159656347825773424466062227946, 0.0976186521041138882698806644642471544279, 0.0976186521041138882698806644642471544279, 0.086190161531953275917185202983742667185, 0.086190161531953275917185202983742667185, 0.0733464814110803057340336152531165181193, 0.0733464814110803057340336152531165181193, 0.0592985849154367807463677585001085845412, 0.0592985849154367807463677585001085845412, 0.0442774388174198061686027482113382288593, 0.0442774388174198061686027482113382288593, 0.0285313886289336631813078159518782864491, 0.0285313886289336631813078159518782864491, 0.0123412297999871995468056670700372915759, 0.0123412297999871995468056670700372915759],\n  arcfn: function (t, derivativeFn) {\n    const d = derivativeFn(t);\n    let l = d.x * d.x + d.y * d.y;\n\n    if (typeof d.z !== \"undefined\") {\n      l += d.z * d.z;\n    }\n\n    return sqrt$1(l);\n  },\n  compute: function (t, points, _3d) {\n    // shortcuts\n    if (t === 0) {\n      points[0].t = 0;\n      return points[0];\n    }\n\n    const order = points.length - 1;\n\n    if (t === 1) {\n      points[order].t = 1;\n      return points[order];\n    }\n\n    const mt = 1 - t;\n    let p = points; // constant?\n\n    if (order === 0) {\n      points[0].t = t;\n      return points[0];\n    } // linear?\n\n\n    if (order === 1) {\n      const ret = {\n        x: mt * p[0].x + t * p[1].x,\n        y: mt * p[0].y + t * p[1].y,\n        t: t\n      };\n\n      if (_3d) {\n        ret.z = mt * p[0].z + t * p[1].z;\n      }\n\n      return ret;\n    } // quadratic/cubic curve?\n\n\n    if (order < 4) {\n      let mt2 = mt * mt,\n          t2 = t * t,\n          a,\n          b,\n          c,\n          d = 0;\n\n      if (order === 2) {\n        p = [p[0], p[1], p[2], ZERO];\n        a = mt2;\n        b = mt * t * 2;\n        c = t2;\n      } else if (order === 3) {\n        a = mt2 * mt;\n        b = mt2 * t * 3;\n        c = mt * t2 * 3;\n        d = t * t2;\n      }\n\n      const ret = {\n        x: a * p[0].x + b * p[1].x + c * p[2].x + d * p[3].x,\n        y: a * p[0].y + b * p[1].y + c * p[2].y + d * p[3].y,\n        t: t\n      };\n\n      if (_3d) {\n        ret.z = a * p[0].z + b * p[1].z + c * p[2].z + d * p[3].z;\n      }\n\n      return ret;\n    } // higher order curves: use de Casteljau's computation\n\n\n    const dCpts = JSON.parse(JSON.stringify(points));\n\n    while (dCpts.length > 1) {\n      for (let i = 0; i < dCpts.length - 1; i++) {\n        dCpts[i] = {\n          x: dCpts[i].x + (dCpts[i + 1].x - dCpts[i].x) * t,\n          y: dCpts[i].y + (dCpts[i + 1].y - dCpts[i].y) * t\n        };\n\n        if (typeof dCpts[i].z !== \"undefined\") {\n          dCpts[i] = dCpts[i].z + (dCpts[i + 1].z - dCpts[i].z) * t;\n        }\n      }\n\n      dCpts.splice(dCpts.length - 1, 1);\n    }\n\n    dCpts[0].t = t;\n    return dCpts[0];\n  },\n  computeWithRatios: function (t, points, ratios, _3d) {\n    const mt = 1 - t,\n          r = ratios,\n          p = points;\n    let f1 = r[0],\n        f2 = r[1],\n        f3 = r[2],\n        f4 = r[3],\n        d; // spec for linear\n\n    f1 *= mt;\n    f2 *= t;\n\n    if (p.length === 2) {\n      d = f1 + f2;\n      return {\n        x: (f1 * p[0].x + f2 * p[1].x) / d,\n        y: (f1 * p[0].y + f2 * p[1].y) / d,\n        z: !_3d ? false : (f1 * p[0].z + f2 * p[1].z) / d,\n        t: t\n      };\n    } // upgrade to quadratic\n\n\n    f1 *= mt;\n    f2 *= 2 * mt;\n    f3 *= t * t;\n\n    if (p.length === 3) {\n      d = f1 + f2 + f3;\n      return {\n        x: (f1 * p[0].x + f2 * p[1].x + f3 * p[2].x) / d,\n        y: (f1 * p[0].y + f2 * p[1].y + f3 * p[2].y) / d,\n        z: !_3d ? false : (f1 * p[0].z + f2 * p[1].z + f3 * p[2].z) / d,\n        t: t\n      };\n    } // upgrade to cubic\n\n\n    f1 *= mt;\n    f2 *= 1.5 * mt;\n    f3 *= 3 * mt;\n    f4 *= t * t * t;\n\n    if (p.length === 4) {\n      d = f1 + f2 + f3 + f4;\n      return {\n        x: (f1 * p[0].x + f2 * p[1].x + f3 * p[2].x + f4 * p[3].x) / d,\n        y: (f1 * p[0].y + f2 * p[1].y + f3 * p[2].y + f4 * p[3].y) / d,\n        z: !_3d ? false : (f1 * p[0].z + f2 * p[1].z + f3 * p[2].z + f4 * p[3].z) / d,\n        t: t\n      };\n    }\n  },\n  derive: function (points, _3d) {\n    const dpoints = [];\n\n    for (let p = points, d = p.length, c = d - 1; d > 1; d--, c--) {\n      const list = [];\n\n      for (let j = 0, dpt; j < c; j++) {\n        dpt = {\n          x: c * (p[j + 1].x - p[j].x),\n          y: c * (p[j + 1].y - p[j].y)\n        };\n\n        if (_3d) {\n          dpt.z = c * (p[j + 1].z - p[j].z);\n        }\n\n        list.push(dpt);\n      }\n\n      dpoints.push(list);\n      p = list;\n    }\n\n    return dpoints;\n  },\n  between: function (v, m, M) {\n    return m <= v && v <= M || utils$1.approximately(v, m) || utils$1.approximately(v, M);\n  },\n  approximately: function (a, b, precision) {\n    return abs$1(a - b) <= (precision || epsilon);\n  },\n  length: function (derivativeFn) {\n    const z = 0.5,\n          len = utils$1.Tvalues.length;\n    let sum = 0;\n\n    for (let i = 0, t; i < len; i++) {\n      t = z * utils$1.Tvalues[i] + z;\n      sum += utils$1.Cvalues[i] * utils$1.arcfn(t, derivativeFn);\n    }\n\n    return z * sum;\n  },\n  map: function (v, ds, de, ts, te) {\n    const d1 = de - ds,\n          d2 = te - ts,\n          v2 = v - ds,\n          r = v2 / d1;\n    return ts + d2 * r;\n  },\n  lerp: function (r, v1, v2) {\n    const ret = {\n      x: v1.x + r * (v2.x - v1.x),\n      y: v1.y + r * (v2.y - v1.y)\n    };\n\n    if (v1.z !== undefined && v2.z !== undefined) {\n      ret.z = v1.z + r * (v2.z - v1.z);\n    }\n\n    return ret;\n  },\n  pointToString: function (p) {\n    let s = p.x + \"/\" + p.y;\n\n    if (typeof p.z !== \"undefined\") {\n      s += \"/\" + p.z;\n    }\n\n    return s;\n  },\n  pointsToString: function (points) {\n    return \"[\" + points.map(utils$1.pointToString).join(\", \") + \"]\";\n  },\n  copy: function (obj) {\n    return JSON.parse(JSON.stringify(obj));\n  },\n  angle: function (o, v1, v2) {\n    const dx1 = v1.x - o.x,\n          dy1 = v1.y - o.y,\n          dx2 = v2.x - o.x,\n          dy2 = v2.y - o.y,\n          cross = dx1 * dy2 - dy1 * dx2,\n          dot = dx1 * dx2 + dy1 * dy2;\n    return atan2(cross, dot);\n  },\n  // round as string, to avoid rounding errors\n  round: function (v, d) {\n    const s = \"\" + v;\n    const pos = s.indexOf(\".\");\n    return parseFloat(s.substring(0, pos + 1 + d));\n  },\n  dist: function (p1, p2) {\n    const dx = p1.x - p2.x,\n          dy = p1.y - p2.y;\n    return sqrt$1(dx * dx + dy * dy);\n  },\n  closest: function (LUT, point) {\n    let mdist = pow(2, 63),\n        mpos,\n        d;\n    LUT.forEach(function (p, idx) {\n      d = utils$1.dist(point, p);\n\n      if (d < mdist) {\n        mdist = d;\n        mpos = idx;\n      }\n    });\n    return {\n      mdist: mdist,\n      mpos: mpos\n    };\n  },\n  abcratio: function (t, n) {\n    // see ratio(t) note on http://pomax.github.io/bezierinfo/#abc\n    if (n !== 2 && n !== 3) {\n      return false;\n    }\n\n    if (typeof t === \"undefined\") {\n      t = 0.5;\n    } else if (t === 0 || t === 1) {\n      return t;\n    }\n\n    const bottom = pow(t, n) + pow(1 - t, n),\n          top = bottom - 1;\n    return abs$1(top / bottom);\n  },\n  projectionratio: function (t, n) {\n    // see u(t) note on http://pomax.github.io/bezierinfo/#abc\n    if (n !== 2 && n !== 3) {\n      return false;\n    }\n\n    if (typeof t === \"undefined\") {\n      t = 0.5;\n    } else if (t === 0 || t === 1) {\n      return t;\n    }\n\n    const top = pow(1 - t, n),\n          bottom = pow(t, n) + top;\n    return top / bottom;\n  },\n  lli8: function (x1, y1, x2, y2, x3, y3, x4, y4) {\n    const nx = (x1 * y2 - y1 * x2) * (x3 - x4) - (x1 - x2) * (x3 * y4 - y3 * x4),\n          ny = (x1 * y2 - y1 * x2) * (y3 - y4) - (y1 - y2) * (x3 * y4 - y3 * x4),\n          d = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n\n    if (d == 0) {\n      return false;\n    }\n\n    return {\n      x: nx / d,\n      y: ny / d\n    };\n  },\n  lli4: function (p1, p2, p3, p4) {\n    const x1 = p1.x,\n          y1 = p1.y,\n          x2 = p2.x,\n          y2 = p2.y,\n          x3 = p3.x,\n          y3 = p3.y,\n          x4 = p4.x,\n          y4 = p4.y;\n    return utils$1.lli8(x1, y1, x2, y2, x3, y3, x4, y4);\n  },\n  lli: function (v1, v2) {\n    return utils$1.lli4(v1, v1.c, v2, v2.c);\n  },\n  makeline: function (p1, p2) {\n    const x1 = p1.x,\n          y1 = p1.y,\n          x2 = p2.x,\n          y2 = p2.y,\n          dx = (x2 - x1) / 3,\n          dy = (y2 - y1) / 3;\n    return new Bezier(x1, y1, x1 + dx, y1 + dy, x1 + 2 * dx, y1 + 2 * dy, x2, y2);\n  },\n  findbbox: function (sections) {\n    let mx = nMax,\n        my = nMax,\n        MX = nMin,\n        MY = nMin;\n    sections.forEach(function (s) {\n      const bbox = s.bbox();\n      if (mx > bbox.x.min) mx = bbox.x.min;\n      if (my > bbox.y.min) my = bbox.y.min;\n      if (MX < bbox.x.max) MX = bbox.x.max;\n      if (MY < bbox.y.max) MY = bbox.y.max;\n    });\n    return {\n      x: {\n        min: mx,\n        mid: (mx + MX) / 2,\n        max: MX,\n        size: MX - mx\n      },\n      y: {\n        min: my,\n        mid: (my + MY) / 2,\n        max: MY,\n        size: MY - my\n      }\n    };\n  },\n  shapeintersections: function (s1, bbox1, s2, bbox2, curveIntersectionThreshold) {\n    if (!utils$1.bboxoverlap(bbox1, bbox2)) return [];\n    const intersections = [];\n    const a1 = [s1.startcap, s1.forward, s1.back, s1.endcap];\n    const a2 = [s2.startcap, s2.forward, s2.back, s2.endcap];\n    a1.forEach(function (l1) {\n      if (l1.virtual) return;\n      a2.forEach(function (l2) {\n        if (l2.virtual) return;\n        const iss = l1.intersects(l2, curveIntersectionThreshold);\n\n        if (iss.length > 0) {\n          iss.c1 = l1;\n          iss.c2 = l2;\n          iss.s1 = s1;\n          iss.s2 = s2;\n          intersections.push(iss);\n        }\n      });\n    });\n    return intersections;\n  },\n  makeshape: function (forward, back, curveIntersectionThreshold) {\n    const bpl = back.points.length;\n    const fpl = forward.points.length;\n    const start = utils$1.makeline(back.points[bpl - 1], forward.points[0]);\n    const end = utils$1.makeline(forward.points[fpl - 1], back.points[0]);\n    const shape = {\n      startcap: start,\n      forward: forward,\n      back: back,\n      endcap: end,\n      bbox: utils$1.findbbox([start, forward, back, end])\n    };\n\n    shape.intersections = function (s2) {\n      return utils$1.shapeintersections(shape, shape.bbox, s2, s2.bbox, curveIntersectionThreshold);\n    };\n\n    return shape;\n  },\n  getminmax: function (curve, d, list) {\n    if (!list) return {\n      min: 0,\n      max: 0\n    };\n    let min = nMax,\n        max = nMin,\n        t,\n        c;\n\n    if (list.indexOf(0) === -1) {\n      list = [0].concat(list);\n    }\n\n    if (list.indexOf(1) === -1) {\n      list.push(1);\n    }\n\n    for (let i = 0, len = list.length; i < len; i++) {\n      t = list[i];\n      c = curve.get(t);\n\n      if (c[d] < min) {\n        min = c[d];\n      }\n\n      if (c[d] > max) {\n        max = c[d];\n      }\n    }\n\n    return {\n      min: min,\n      mid: (min + max) / 2,\n      max: max,\n      size: max - min\n    };\n  },\n  align: function (points, line) {\n    const tx = line.p1.x,\n          ty = line.p1.y,\n          a = -atan2(line.p2.y - ty, line.p2.x - tx),\n          d = function (v) {\n      return {\n        x: (v.x - tx) * cos$1(a) - (v.y - ty) * sin$1(a),\n        y: (v.x - tx) * sin$1(a) + (v.y - ty) * cos$1(a)\n      };\n    };\n\n    return points.map(d);\n  },\n  roots: function (points, line) {\n    line = line || {\n      p1: {\n        x: 0,\n        y: 0\n      },\n      p2: {\n        x: 1,\n        y: 0\n      }\n    };\n    const order = points.length - 1;\n    const aligned = utils$1.align(points, line);\n\n    const reduce = function (t) {\n      return 0 <= t && t <= 1;\n    };\n\n    if (order === 2) {\n      const a = aligned[0].y,\n            b = aligned[1].y,\n            c = aligned[2].y,\n            d = a - 2 * b + c;\n\n      if (d !== 0) {\n        const m1 = -sqrt$1(b * b - a * c),\n              m2 = -a + b,\n              v1 = -(m1 + m2) / d,\n              v2 = -(-m1 + m2) / d;\n        return [v1, v2].filter(reduce);\n      } else if (b !== c && d === 0) {\n        return [(2 * b - c) / (2 * b - 2 * c)].filter(reduce);\n      }\n\n      return [];\n    } // see http://www.trans4mind.com/personal_development/mathematics/polynomials/cubicAlgebra.htm\n\n\n    const pa = aligned[0].y,\n          pb = aligned[1].y,\n          pc = aligned[2].y,\n          pd = aligned[3].y;\n    let d = -pa + 3 * pb - 3 * pc + pd,\n        a = 3 * pa - 6 * pb + 3 * pc,\n        b = -3 * pa + 3 * pb,\n        c = pa;\n\n    if (utils$1.approximately(d, 0)) {\n      // this is not a cubic curve.\n      if (utils$1.approximately(a, 0)) {\n        // in fact, this is not a quadratic curve either.\n        if (utils$1.approximately(b, 0)) {\n          // in fact in fact, there are no solutions.\n          return [];\n        } // linear solution:\n\n\n        return [-c / b].filter(reduce);\n      } // quadratic solution:\n\n\n      const q = sqrt$1(b * b - 4 * a * c),\n            a2 = 2 * a;\n      return [(q - b) / a2, (-b - q) / a2].filter(reduce);\n    } // at this point, we know we need a cubic solution:\n\n\n    a /= d;\n    b /= d;\n    c /= d;\n    const p = (3 * b - a * a) / 3,\n          p3 = p / 3,\n          q = (2 * a * a * a - 9 * a * b + 27 * c) / 27,\n          q2 = q / 2,\n          discriminant = q2 * q2 + p3 * p3 * p3;\n    let u1, v1, x1, x2, x3;\n\n    if (discriminant < 0) {\n      const mp3 = -p / 3,\n            mp33 = mp3 * mp3 * mp3,\n            r = sqrt$1(mp33),\n            t = -q / (2 * r),\n            cosphi = t < -1 ? -1 : t > 1 ? 1 : t,\n            phi = acos$1(cosphi),\n            crtr = crt(r),\n            t1 = 2 * crtr;\n      x1 = t1 * cos$1(phi / 3) - a / 3;\n      x2 = t1 * cos$1((phi + tau) / 3) - a / 3;\n      x3 = t1 * cos$1((phi + 2 * tau) / 3) - a / 3;\n      return [x1, x2, x3].filter(reduce);\n    } else if (discriminant === 0) {\n      u1 = q2 < 0 ? crt(-q2) : -crt(q2);\n      x1 = 2 * u1 - a / 3;\n      x2 = -u1 - a / 3;\n      return [x1, x2].filter(reduce);\n    } else {\n      const sd = sqrt$1(discriminant);\n      u1 = crt(-q2 + sd);\n      v1 = crt(q2 + sd);\n      return [u1 - v1 - a / 3].filter(reduce);\n    }\n  },\n  droots: function (p) {\n    // quadratic roots are easy\n    if (p.length === 3) {\n      const a = p[0],\n            b = p[1],\n            c = p[2],\n            d = a - 2 * b + c;\n\n      if (d !== 0) {\n        const m1 = -sqrt$1(b * b - a * c),\n              m2 = -a + b,\n              v1 = -(m1 + m2) / d,\n              v2 = -(-m1 + m2) / d;\n        return [v1, v2];\n      } else if (b !== c && d === 0) {\n        return [(2 * b - c) / (2 * (b - c))];\n      }\n\n      return [];\n    } // linear roots are even easier\n\n\n    if (p.length === 2) {\n      const a = p[0],\n            b = p[1];\n\n      if (a !== b) {\n        return [a / (a - b)];\n      }\n\n      return [];\n    }\n\n    return [];\n  },\n  curvature: function (t, d1, d2, _3d, kOnly) {\n    let num,\n        dnm,\n        adk,\n        dk,\n        k = 0,\n        r = 0; //\n    // We're using the following formula for curvature:\n    //\n    //              x'y\" - y'x\"\n    //   k(t) = ------------------\n    //           (x'² + y'²)^(3/2)\n    //\n    // from https://en.wikipedia.org/wiki/Radius_of_curvature#Definition\n    //\n    // With it corresponding 3D counterpart:\n    //\n    //          sqrt( (y'z\" - y\"z')² + (z'x\" - z\"x')² + (x'y\" - x\"y')²)\n    //   k(t) = -------------------------------------------------------\n    //                     (x'² + y'² + z'²)^(3/2)\n    //\n\n    const d = utils$1.compute(t, d1);\n    const dd = utils$1.compute(t, d2);\n    const qdsum = d.x * d.x + d.y * d.y;\n\n    if (_3d) {\n      num = sqrt$1(pow(d.y * dd.z - dd.y * d.z, 2) + pow(d.z * dd.x - dd.z * d.x, 2) + pow(d.x * dd.y - dd.x * d.y, 2));\n      dnm = pow(qdsum + d.z * d.z, 3 / 2);\n    } else {\n      num = d.x * dd.y - d.y * dd.x;\n      dnm = pow(qdsum, 3 / 2);\n    }\n\n    if (num === 0 || dnm === 0) {\n      return {\n        k: 0,\n        r: 0\n      };\n    }\n\n    k = num / dnm;\n    r = dnm / num; // We're also computing the derivative of kappa, because\n    // there is value in knowing the rate of change for the\n    // curvature along the curve. And we're just going to\n    // ballpark it based on an epsilon.\n\n    if (!kOnly) {\n      // compute k'(t) based on the interval before, and after it,\n      // to at least try to not introduce forward/backward pass bias.\n      const pk = utils$1.curvature(t - 0.001, d1, d2, _3d, true).k;\n      const nk = utils$1.curvature(t + 0.001, d1, d2, _3d, true).k;\n      dk = (nk - k + (k - pk)) / 2;\n      adk = (abs$1(nk - k) + abs$1(k - pk)) / 2;\n    }\n\n    return {\n      k: k,\n      r: r,\n      dk: dk,\n      adk: adk\n    };\n  },\n  inflections: function (points) {\n    if (points.length < 4) return []; // FIXME: TODO: add in inflection abstraction for quartic+ curves?\n\n    const p = utils$1.align(points, {\n      p1: points[0],\n      p2: points.slice(-1)[0]\n    }),\n          a = p[2].x * p[1].y,\n          b = p[3].x * p[1].y,\n          c = p[1].x * p[2].y,\n          d = p[3].x * p[2].y,\n          v1 = 18 * (-3 * a + 2 * b + 3 * c - d),\n          v2 = 18 * (3 * a - b - 3 * c),\n          v3 = 18 * (c - a);\n\n    if (utils$1.approximately(v1, 0)) {\n      if (!utils$1.approximately(v2, 0)) {\n        let t = -v3 / v2;\n        if (0 <= t && t <= 1) return [t];\n      }\n\n      return [];\n    }\n\n    const trm = v2 * v2 - 4 * v1 * v3,\n          sq = Math.sqrt(trm),\n          d2 = 2 * v1;\n    if (utils$1.approximately(d2, 0)) return [];\n    return [(sq - v2) / d2, -(v2 + sq) / d2].filter(function (r) {\n      return 0 <= r && r <= 1;\n    });\n  },\n  bboxoverlap: function (b1, b2) {\n    const dims = [\"x\", \"y\"],\n          len = dims.length;\n\n    for (let i = 0, dim, l, t, d; i < len; i++) {\n      dim = dims[i];\n      l = b1[dim].mid;\n      t = b2[dim].mid;\n      d = (b1[dim].size + b2[dim].size) / 2;\n      if (abs$1(l - t) >= d) return false;\n    }\n\n    return true;\n  },\n  expandbox: function (bbox, _bbox) {\n    if (_bbox.x.min < bbox.x.min) {\n      bbox.x.min = _bbox.x.min;\n    }\n\n    if (_bbox.y.min < bbox.y.min) {\n      bbox.y.min = _bbox.y.min;\n    }\n\n    if (_bbox.z && _bbox.z.min < bbox.z.min) {\n      bbox.z.min = _bbox.z.min;\n    }\n\n    if (_bbox.x.max > bbox.x.max) {\n      bbox.x.max = _bbox.x.max;\n    }\n\n    if (_bbox.y.max > bbox.y.max) {\n      bbox.y.max = _bbox.y.max;\n    }\n\n    if (_bbox.z && _bbox.z.max > bbox.z.max) {\n      bbox.z.max = _bbox.z.max;\n    }\n\n    bbox.x.mid = (bbox.x.min + bbox.x.max) / 2;\n    bbox.y.mid = (bbox.y.min + bbox.y.max) / 2;\n\n    if (bbox.z) {\n      bbox.z.mid = (bbox.z.min + bbox.z.max) / 2;\n    }\n\n    bbox.x.size = bbox.x.max - bbox.x.min;\n    bbox.y.size = bbox.y.max - bbox.y.min;\n\n    if (bbox.z) {\n      bbox.z.size = bbox.z.max - bbox.z.min;\n    }\n  },\n  pairiteration: function (c1, c2, curveIntersectionThreshold) {\n    const c1b = c1.bbox(),\n          c2b = c2.bbox(),\n          r = 100000,\n          threshold = curveIntersectionThreshold || 0.5;\n\n    if (c1b.x.size + c1b.y.size < threshold && c2b.x.size + c2b.y.size < threshold) {\n      return [(r * (c1._t1 + c1._t2) / 2 | 0) / r + \"/\" + (r * (c2._t1 + c2._t2) / 2 | 0) / r];\n    }\n\n    let cc1 = c1.split(0.5),\n        cc2 = c2.split(0.5),\n        pairs = [{\n      left: cc1.left,\n      right: cc2.left\n    }, {\n      left: cc1.left,\n      right: cc2.right\n    }, {\n      left: cc1.right,\n      right: cc2.right\n    }, {\n      left: cc1.right,\n      right: cc2.left\n    }];\n    pairs = pairs.filter(function (pair) {\n      return utils$1.bboxoverlap(pair.left.bbox(), pair.right.bbox());\n    });\n    let results = [];\n    if (pairs.length === 0) return results;\n    pairs.forEach(function (pair) {\n      results = results.concat(utils$1.pairiteration(pair.left, pair.right, threshold));\n    });\n    results = results.filter(function (v, i) {\n      return results.indexOf(v) === i;\n    });\n    return results;\n  },\n  getccenter: function (p1, p2, p3) {\n    const dx1 = p2.x - p1.x,\n          dy1 = p2.y - p1.y,\n          dx2 = p3.x - p2.x,\n          dy2 = p3.y - p2.y,\n          dx1p = dx1 * cos$1(quart) - dy1 * sin$1(quart),\n          dy1p = dx1 * sin$1(quart) + dy1 * cos$1(quart),\n          dx2p = dx2 * cos$1(quart) - dy2 * sin$1(quart),\n          dy2p = dx2 * sin$1(quart) + dy2 * cos$1(quart),\n          // chord midpoints\n    mx1 = (p1.x + p2.x) / 2,\n          my1 = (p1.y + p2.y) / 2,\n          mx2 = (p2.x + p3.x) / 2,\n          my2 = (p2.y + p3.y) / 2,\n          // midpoint offsets\n    mx1n = mx1 + dx1p,\n          my1n = my1 + dy1p,\n          mx2n = mx2 + dx2p,\n          my2n = my2 + dy2p,\n          // intersection of these lines:\n    arc = utils$1.lli8(mx1, my1, mx1n, my1n, mx2, my2, mx2n, my2n),\n          r = utils$1.dist(arc, p1); // arc start/end values, over mid point:\n\n    let s = atan2(p1.y - arc.y, p1.x - arc.x),\n        m = atan2(p2.y - arc.y, p2.x - arc.x),\n        e = atan2(p3.y - arc.y, p3.x - arc.x),\n        _; // determine arc direction (cw/ccw correction)\n\n\n    if (s < e) {\n      // if s<m<e, arc(s, e)\n      // if m<s<e, arc(e, s + tau)\n      // if s<e<m, arc(e, s + tau)\n      if (s > m || m > e) {\n        s += tau;\n      }\n\n      if (s > e) {\n        _ = e;\n        e = s;\n        s = _;\n      }\n    } else {\n      // if e<m<s, arc(e, s)\n      // if m<e<s, arc(s, e + tau)\n      // if e<s<m, arc(s, e + tau)\n      if (e < m && m < s) {\n        _ = e;\n        e = s;\n        s = _;\n      } else {\n        e += tau;\n      }\n    } // assign and done.\n\n\n    arc.s = s;\n    arc.e = e;\n    arc.r = r;\n    return arc;\n  },\n  numberSort: function (a, b) {\n    return a - b;\n  }\n};\n\n/**\n * Poly Bezier\n * @param {[type]} curves [description]\n */\n\nclass PolyBezier {\n  constructor(curves) {\n    this.curves = [];\n    this._3d = false;\n\n    if (!!curves) {\n      this.curves = curves;\n      this._3d = this.curves[0]._3d;\n    }\n  }\n\n  valueOf() {\n    return this.toString();\n  }\n\n  toString() {\n    return \"[\" + this.curves.map(function (curve) {\n      return utils$1.pointsToString(curve.points);\n    }).join(\", \") + \"]\";\n  }\n\n  addCurve(curve) {\n    this.curves.push(curve);\n    this._3d = this._3d || curve._3d;\n  }\n\n  length() {\n    return this.curves.map(function (v) {\n      return v.length();\n    }).reduce(function (a, b) {\n      return a + b;\n    });\n  }\n\n  curve(idx) {\n    return this.curves[idx];\n  }\n\n  bbox() {\n    const c = this.curves;\n    var bbox = c[0].bbox();\n\n    for (var i = 1; i < c.length; i++) {\n      utils$1.expandbox(bbox, c[i].bbox());\n    }\n\n    return bbox;\n  }\n\n  offset(d) {\n    const offset = [];\n    this.curves.forEach(function (v) {\n      offset.push(...v.offset(d));\n    });\n    return new PolyBezier(offset);\n  }\n\n}\n\n/**\n  A javascript Bezier curve library by Pomax.\n\n  Based on http://pomax.github.io/bezierinfo\n\n  This code is MIT licensed.\n**/\n\nconst {\n  abs,\n  min,\n  max,\n  cos,\n  sin,\n  acos,\n  sqrt\n} = Math;\nconst pi = Math.PI; // a zero coordinate, which is surprisingly useful\n/**\n * Bezier curve constructor.\n *\n * ...docs pending...\n */\n\nclass Bezier {\n  constructor(coords) {\n    let args = coords && coords.forEach ? coords : Array.from(arguments).slice();\n    let coordlen = false;\n\n    if (typeof args[0] === \"object\") {\n      coordlen = args.length;\n      const newargs = [];\n      args.forEach(function (point) {\n        [\"x\", \"y\", \"z\"].forEach(function (d) {\n          if (typeof point[d] !== \"undefined\") {\n            newargs.push(point[d]);\n          }\n        });\n      });\n      args = newargs;\n    }\n\n    let higher = false;\n    const len = args.length;\n\n    if (coordlen) {\n      if (coordlen > 4) {\n        if (arguments.length !== 1) {\n          throw new Error(\"Only new Bezier(point[]) is accepted for 4th and higher order curves\");\n        }\n\n        higher = true;\n      }\n    } else {\n      if (len !== 6 && len !== 8 && len !== 9 && len !== 12) {\n        if (arguments.length !== 1) {\n          throw new Error(\"Only new Bezier(point[]) is accepted for 4th and higher order curves\");\n        }\n      }\n    }\n\n    const _3d = this._3d = !higher && (len === 9 || len === 12) || coords && coords[0] && typeof coords[0].z !== \"undefined\";\n\n    const points = this.points = [];\n\n    for (let idx = 0, step = _3d ? 3 : 2; idx < len; idx += step) {\n      var point = {\n        x: args[idx],\n        y: args[idx + 1]\n      };\n\n      if (_3d) {\n        point.z = args[idx + 2];\n      }\n\n      points.push(point);\n    }\n\n    const order = this.order = points.length - 1;\n    const dims = this.dims = [\"x\", \"y\"];\n    if (_3d) dims.push(\"z\");\n    this.dimlen = dims.length;\n    const aligned = utils$1.align(points, {\n      p1: points[0],\n      p2: points[order]\n    });\n    this._linear = !aligned.some(p => abs(p.y) > 0.0001);\n    this._lut = [];\n    this._t1 = 0;\n    this._t2 = 1;\n    this.update();\n  }\n\n  static quadraticFromPoints(p1, p2, p3, t) {\n    if (typeof t === \"undefined\") {\n      t = 0.5;\n    } // shortcuts, although they're really dumb\n\n\n    if (t === 0) {\n      return new Bezier(p2, p2, p3);\n    }\n\n    if (t === 1) {\n      return new Bezier(p1, p2, p2);\n    } // real fitting.\n\n\n    const abc = Bezier.getABC(2, p1, p2, p3, t);\n    return new Bezier(p1, abc.A, p3);\n  }\n\n  static cubicFromPoints(S, B, E, t, d1) {\n    if (typeof t === \"undefined\") {\n      t = 0.5;\n    }\n\n    const abc = Bezier.getABC(3, S, B, E, t);\n\n    if (typeof d1 === \"undefined\") {\n      d1 = utils$1.dist(B, abc.C);\n    }\n\n    const d2 = d1 * (1 - t) / t;\n    const selen = utils$1.dist(S, E),\n          lx = (E.x - S.x) / selen,\n          ly = (E.y - S.y) / selen,\n          bx1 = d1 * lx,\n          by1 = d1 * ly,\n          bx2 = d2 * lx,\n          by2 = d2 * ly; // derivation of new hull coordinates\n\n    const e1 = {\n      x: B.x - bx1,\n      y: B.y - by1\n    },\n          e2 = {\n      x: B.x + bx2,\n      y: B.y + by2\n    },\n          A = abc.A,\n          v1 = {\n      x: A.x + (e1.x - A.x) / (1 - t),\n      y: A.y + (e1.y - A.y) / (1 - t)\n    },\n          v2 = {\n      x: A.x + (e2.x - A.x) / t,\n      y: A.y + (e2.y - A.y) / t\n    },\n          nc1 = {\n      x: S.x + (v1.x - S.x) / t,\n      y: S.y + (v1.y - S.y) / t\n    },\n          nc2 = {\n      x: E.x + (v2.x - E.x) / (1 - t),\n      y: E.y + (v2.y - E.y) / (1 - t)\n    }; // ...done\n\n    return new Bezier(S, nc1, nc2, E);\n  }\n\n  static getUtils() {\n    return utils$1;\n  }\n\n  getUtils() {\n    return Bezier.getUtils();\n  }\n\n  static get PolyBezier() {\n    return PolyBezier;\n  }\n\n  valueOf() {\n    return this.toString();\n  }\n\n  toString() {\n    return utils$1.pointsToString(this.points);\n  }\n\n  toSVG() {\n    if (this._3d) return false;\n    const p = this.points,\n          x = p[0].x,\n          y = p[0].y,\n          s = [\"M\", x, y, this.order === 2 ? \"Q\" : \"C\"];\n\n    for (let i = 1, last = p.length; i < last; i++) {\n      s.push(p[i].x);\n      s.push(p[i].y);\n    }\n\n    return s.join(\" \");\n  }\n\n  setRatios(ratios) {\n    if (ratios.length !== this.points.length) {\n      throw new Error(\"incorrect number of ratio values\");\n    }\n\n    this.ratios = ratios;\n    this._lut = []; //  invalidate any precomputed LUT\n  }\n\n  verify() {\n    const print = this.coordDigest();\n\n    if (print !== this._print) {\n      this._print = print;\n      this.update();\n    }\n  }\n\n  coordDigest() {\n    return this.points.map(function (c, pos) {\n      return \"\" + pos + c.x + c.y + (c.z ? c.z : 0);\n    }).join(\"\");\n  }\n\n  update() {\n    // invalidate any precomputed LUT\n    this._lut = [];\n    this.dpoints = utils$1.derive(this.points, this._3d);\n    this.computedirection();\n  }\n\n  computedirection() {\n    const points = this.points;\n    const angle = utils$1.angle(points[0], points[this.order], points[1]);\n    this.clockwise = angle > 0;\n  }\n\n  length() {\n    return utils$1.length(this.derivative.bind(this));\n  }\n\n  static getABC(order = 2, S, B, E, t = 0.5) {\n    const u = utils$1.projectionratio(t, order),\n          um = 1 - u,\n          C = {\n      x: u * S.x + um * E.x,\n      y: u * S.y + um * E.y\n    },\n          s = utils$1.abcratio(t, order),\n          A = {\n      x: B.x + (B.x - C.x) / s,\n      y: B.y + (B.y - C.y) / s\n    };\n    return {\n      A,\n      B,\n      C,\n      S,\n      E\n    };\n  }\n\n  getABC(t, B) {\n    B = B || this.get(t);\n    let S = this.points[0];\n    let E = this.points[this.order];\n    return Bezier.getABC(this.order, S, B, E, t);\n  }\n\n  getLUT(steps) {\n    this.verify();\n    steps = steps || 100;\n\n    if (this._lut.length === steps) {\n      return this._lut;\n    }\n\n    this._lut = []; // We want a range from 0 to 1 inclusive, so\n    // we decrement and then use <= rather than <:\n\n    steps--;\n\n    for (let i = 0, p, t; i < steps; i++) {\n      t = i / (steps - 1);\n      p = this.compute(t);\n      p.t = t;\n\n      this._lut.push(p);\n    }\n\n    return this._lut;\n  }\n\n  on(point, error) {\n    error = error || 5;\n    const lut = this.getLUT(),\n          hits = [];\n\n    for (let i = 0, c, t = 0; i < lut.length; i++) {\n      c = lut[i];\n\n      if (utils$1.dist(c, point) < error) {\n        hits.push(c);\n        t += i / lut.length;\n      }\n    }\n\n    if (!hits.length) return false;\n    return t /= hits.length;\n  }\n\n  project(point) {\n    // step 1: coarse check\n    const LUT = this.getLUT(),\n          l = LUT.length - 1,\n          closest = utils$1.closest(LUT, point),\n          mpos = closest.mpos,\n          t1 = (mpos - 1) / l,\n          t2 = (mpos + 1) / l,\n          step = 0.1 / l; // step 2: fine check\n\n    let mdist = closest.mdist,\n        t = t1,\n        ft = t,\n        p;\n    mdist += 1;\n\n    for (let d; t < t2 + step; t += step) {\n      p = this.compute(t);\n      d = utils$1.dist(point, p);\n\n      if (d < mdist) {\n        mdist = d;\n        ft = t;\n      }\n    }\n\n    ft = ft < 0 ? 0 : ft > 1 ? 1 : ft;\n    p = this.compute(ft);\n    p.t = ft;\n    p.d = mdist;\n    return p;\n  }\n\n  get(t) {\n    return this.compute(t);\n  }\n\n  point(idx) {\n    return this.points[idx];\n  }\n\n  compute(t) {\n    if (this.ratios) {\n      return utils$1.computeWithRatios(t, this.points, this.ratios, this._3d);\n    }\n\n    return utils$1.compute(t, this.points, this._3d, this.ratios);\n  }\n\n  raise() {\n    const p = this.points,\n          np = [p[0]],\n          k = p.length;\n\n    for (let i = 1, pi, pim; i < k; i++) {\n      pi = p[i];\n      pim = p[i - 1];\n      np[i] = {\n        x: (k - i) / k * pi.x + i / k * pim.x,\n        y: (k - i) / k * pi.y + i / k * pim.y\n      };\n    }\n\n    np[k] = p[k - 1];\n    return new Bezier(np);\n  }\n\n  derivative(t) {\n    return utils$1.compute(t, this.dpoints[0], this._3d);\n  }\n\n  dderivative(t) {\n    return utils$1.compute(t, this.dpoints[1], this._3d);\n  }\n\n  align() {\n    let p = this.points;\n    return new Bezier(utils$1.align(p, {\n      p1: p[0],\n      p2: p[p.length - 1]\n    }));\n  }\n\n  curvature(t) {\n    return utils$1.curvature(t, this.dpoints[0], this.dpoints[1], this._3d);\n  }\n\n  inflections() {\n    return utils$1.inflections(this.points);\n  }\n\n  normal(t) {\n    return this._3d ? this.__normal3(t) : this.__normal2(t);\n  }\n\n  __normal2(t) {\n    const d = this.derivative(t);\n    const q = sqrt(d.x * d.x + d.y * d.y);\n    return {\n      x: -d.y / q,\n      y: d.x / q\n    };\n  }\n\n  __normal3(t) {\n    // see http://stackoverflow.com/questions/25453159\n    const r1 = this.derivative(t),\n          r2 = this.derivative(t + 0.01),\n          q1 = sqrt(r1.x * r1.x + r1.y * r1.y + r1.z * r1.z),\n          q2 = sqrt(r2.x * r2.x + r2.y * r2.y + r2.z * r2.z);\n    r1.x /= q1;\n    r1.y /= q1;\n    r1.z /= q1;\n    r2.x /= q2;\n    r2.y /= q2;\n    r2.z /= q2; // cross product\n\n    const c = {\n      x: r2.y * r1.z - r2.z * r1.y,\n      y: r2.z * r1.x - r2.x * r1.z,\n      z: r2.x * r1.y - r2.y * r1.x\n    };\n    const m = sqrt(c.x * c.x + c.y * c.y + c.z * c.z);\n    c.x /= m;\n    c.y /= m;\n    c.z /= m; // rotation matrix\n\n    const R = [c.x * c.x, c.x * c.y - c.z, c.x * c.z + c.y, c.x * c.y + c.z, c.y * c.y, c.y * c.z - c.x, c.x * c.z - c.y, c.y * c.z + c.x, c.z * c.z]; // normal vector:\n\n    const n = {\n      x: R[0] * r1.x + R[1] * r1.y + R[2] * r1.z,\n      y: R[3] * r1.x + R[4] * r1.y + R[5] * r1.z,\n      z: R[6] * r1.x + R[7] * r1.y + R[8] * r1.z\n    };\n    return n;\n  }\n\n  hull(t) {\n    let p = this.points,\n        _p = [],\n        q = [],\n        idx = 0;\n    q[idx++] = p[0];\n    q[idx++] = p[1];\n    q[idx++] = p[2];\n\n    if (this.order === 3) {\n      q[idx++] = p[3];\n    } // we lerp between all points at each iteration, until we have 1 point left.\n\n\n    while (p.length > 1) {\n      _p = [];\n\n      for (let i = 0, pt, l = p.length - 1; i < l; i++) {\n        pt = utils$1.lerp(t, p[i], p[i + 1]);\n        q[idx++] = pt;\n\n        _p.push(pt);\n      }\n\n      p = _p;\n    }\n\n    return q;\n  }\n\n  split(t1, t2) {\n    // shortcuts\n    if (t1 === 0 && !!t2) {\n      return this.split(t2).left;\n    }\n\n    if (t2 === 1) {\n      return this.split(t1).right;\n    } // no shortcut: use \"de Casteljau\" iteration.\n\n\n    const q = this.hull(t1);\n    const result = {\n      left: this.order === 2 ? new Bezier([q[0], q[3], q[5]]) : new Bezier([q[0], q[4], q[7], q[9]]),\n      right: this.order === 2 ? new Bezier([q[5], q[4], q[2]]) : new Bezier([q[9], q[8], q[6], q[3]]),\n      span: q\n    }; // make sure we bind _t1/_t2 information!\n\n    result.left._t1 = utils$1.map(0, 0, 1, this._t1, this._t2);\n    result.left._t2 = utils$1.map(t1, 0, 1, this._t1, this._t2);\n    result.right._t1 = utils$1.map(t1, 0, 1, this._t1, this._t2);\n    result.right._t2 = utils$1.map(1, 0, 1, this._t1, this._t2); // if we have no t2, we're done\n\n    if (!t2) {\n      return result;\n    } // if we have a t2, split again:\n\n\n    t2 = utils$1.map(t2, t1, 1, 0, 1);\n    return result.right.split(t2).left;\n  }\n\n  extrema() {\n    const result = {};\n    let roots = [];\n    this.dims.forEach(function (dim) {\n      let mfn = function (v) {\n        return v[dim];\n      };\n\n      let p = this.dpoints[0].map(mfn);\n      result[dim] = utils$1.droots(p);\n\n      if (this.order === 3) {\n        p = this.dpoints[1].map(mfn);\n        result[dim] = result[dim].concat(utils$1.droots(p));\n      }\n\n      result[dim] = result[dim].filter(function (t) {\n        return t >= 0 && t <= 1;\n      });\n      roots = roots.concat(result[dim].sort(utils$1.numberSort));\n    }.bind(this));\n    result.values = roots.sort(utils$1.numberSort).filter(function (v, idx) {\n      return roots.indexOf(v) === idx;\n    });\n    return result;\n  }\n\n  bbox() {\n    const extrema = this.extrema(),\n          result = {};\n    this.dims.forEach(function (d) {\n      result[d] = utils$1.getminmax(this, d, extrema[d]);\n    }.bind(this));\n    return result;\n  }\n\n  overlaps(curve) {\n    const lbbox = this.bbox(),\n          tbbox = curve.bbox();\n    return utils$1.bboxoverlap(lbbox, tbbox);\n  }\n\n  offset(t, d) {\n    if (typeof d !== \"undefined\") {\n      const c = this.get(t),\n            n = this.normal(t);\n      const ret = {\n        c: c,\n        n: n,\n        x: c.x + n.x * d,\n        y: c.y + n.y * d\n      };\n\n      if (this._3d) {\n        ret.z = c.z + n.z * d;\n      }\n\n      return ret;\n    }\n\n    if (this._linear) {\n      const nv = this.normal(0),\n            coords = this.points.map(function (p) {\n        const ret = {\n          x: p.x + t * nv.x,\n          y: p.y + t * nv.y\n        };\n\n        if (p.z && nv.z) {\n          ret.z = p.z + t * nv.z;\n        }\n\n        return ret;\n      });\n      return [new Bezier(coords)];\n    }\n\n    return this.reduce().map(function (s) {\n      if (s._linear) {\n        return s.offset(t)[0];\n      }\n\n      return s.scale(t);\n    });\n  }\n\n  simple() {\n    if (this.order === 3) {\n      const a1 = utils$1.angle(this.points[0], this.points[3], this.points[1]);\n      const a2 = utils$1.angle(this.points[0], this.points[3], this.points[2]);\n      if (a1 > 0 && a2 < 0 || a1 < 0 && a2 > 0) return false;\n    }\n\n    const n1 = this.normal(0);\n    const n2 = this.normal(1);\n    let s = n1.x * n2.x + n1.y * n2.y;\n\n    if (this._3d) {\n      s += n1.z * n2.z;\n    }\n\n    return abs(acos(s)) < pi / 3;\n  }\n\n  reduce() {\n    // TODO: examine these var types in more detail...\n    let i,\n        t1 = 0,\n        t2 = 0,\n        step = 0.01,\n        segment,\n        pass1 = [],\n        pass2 = []; // first pass: split on extrema\n\n    let extrema = this.extrema().values;\n\n    if (extrema.indexOf(0) === -1) {\n      extrema = [0].concat(extrema);\n    }\n\n    if (extrema.indexOf(1) === -1) {\n      extrema.push(1);\n    }\n\n    for (t1 = extrema[0], i = 1; i < extrema.length; i++) {\n      t2 = extrema[i];\n      segment = this.split(t1, t2);\n      segment._t1 = t1;\n      segment._t2 = t2;\n      pass1.push(segment);\n      t1 = t2;\n    } // second pass: further reduce these segments to simple segments\n\n\n    pass1.forEach(function (p1) {\n      t1 = 0;\n      t2 = 0;\n\n      while (t2 <= 1) {\n        for (t2 = t1 + step; t2 <= 1 + step; t2 += step) {\n          segment = p1.split(t1, t2);\n\n          if (!segment.simple()) {\n            t2 -= step;\n\n            if (abs(t1 - t2) < step) {\n              // we can never form a reduction\n              return [];\n            }\n\n            segment = p1.split(t1, t2);\n            segment._t1 = utils$1.map(t1, 0, 1, p1._t1, p1._t2);\n            segment._t2 = utils$1.map(t2, 0, 1, p1._t1, p1._t2);\n            pass2.push(segment);\n            t1 = t2;\n            break;\n          }\n        }\n      }\n\n      if (t1 < 1) {\n        segment = p1.split(t1, 1);\n        segment._t1 = utils$1.map(t1, 0, 1, p1._t1, p1._t2);\n        segment._t2 = p1._t2;\n        pass2.push(segment);\n      }\n    });\n    return pass2;\n  }\n\n  scale(d) {\n    const order = this.order;\n    let distanceFn = false;\n\n    if (typeof d === \"function\") {\n      distanceFn = d;\n    }\n\n    if (distanceFn && order === 2) {\n      return this.raise().scale(distanceFn);\n    } // TODO: add special handling for degenerate (=linear) curves.\n\n\n    const clockwise = this.clockwise;\n    const r1 = distanceFn ? distanceFn(0) : d;\n    const r2 = distanceFn ? distanceFn(1) : d;\n    const v = [this.offset(0, 10), this.offset(1, 10)];\n    const points = this.points;\n    const np = [];\n    const o = utils$1.lli4(v[0], v[0].c, v[1], v[1].c);\n\n    if (!o) {\n      throw new Error(\"cannot scale this curve. Try reducing it first.\");\n    } // move all points by distance 'd' wrt the origin 'o'\n    // move end points by fixed distance along normal.\n\n\n    [0, 1].forEach(function (t) {\n      const p = np[t * order] = utils$1.copy(points[t * order]);\n      p.x += (t ? r2 : r1) * v[t].n.x;\n      p.y += (t ? r2 : r1) * v[t].n.y;\n    });\n\n    if (!distanceFn) {\n      // move control points to lie on the intersection of the offset\n      // derivative vector, and the origin-through-control vector\n      [0, 1].forEach(t => {\n        if (order === 2 && !!t) return;\n        const p = np[t * order];\n        const d = this.derivative(t);\n        const p2 = {\n          x: p.x + d.x,\n          y: p.y + d.y\n        };\n        np[t + 1] = utils$1.lli4(p, p2, o, points[t + 1]);\n      });\n      return new Bezier(np);\n    } // move control points by \"however much necessary to\n    // ensure the correct tangent to endpoint\".\n\n\n    [0, 1].forEach(function (t) {\n      if (order === 2 && !!t) return;\n      var p = points[t + 1];\n      var ov = {\n        x: p.x - o.x,\n        y: p.y - o.y\n      };\n      var rc = distanceFn ? distanceFn((t + 1) / order) : d;\n      if (distanceFn && !clockwise) rc = -rc;\n      var m = sqrt(ov.x * ov.x + ov.y * ov.y);\n      ov.x /= m;\n      ov.y /= m;\n      np[t + 1] = {\n        x: p.x + rc * ov.x,\n        y: p.y + rc * ov.y\n      };\n    });\n    return new Bezier(np);\n  }\n\n  outline(d1, d2, d3, d4) {\n    d2 = typeof d2 === \"undefined\" ? d1 : d2;\n    const reduced = this.reduce(),\n          len = reduced.length,\n          fcurves = [];\n    let bcurves = [],\n        p,\n        alen = 0,\n        tlen = this.length();\n    const graduated = typeof d3 !== \"undefined\" && typeof d4 !== \"undefined\";\n\n    function linearDistanceFunction(s, e, tlen, alen, slen) {\n      return function (v) {\n        const f1 = alen / tlen,\n              f2 = (alen + slen) / tlen,\n              d = e - s;\n        return utils$1.map(v, 0, 1, s + f1 * d, s + f2 * d);\n      };\n    } // form curve oulines\n\n\n    reduced.forEach(function (segment) {\n      const slen = segment.length();\n\n      if (graduated) {\n        fcurves.push(segment.scale(linearDistanceFunction(d1, d3, tlen, alen, slen)));\n        bcurves.push(segment.scale(linearDistanceFunction(-d2, -d4, tlen, alen, slen)));\n      } else {\n        fcurves.push(segment.scale(d1));\n        bcurves.push(segment.scale(-d2));\n      }\n\n      alen += slen;\n    }); // reverse the \"return\" outline\n\n    bcurves = bcurves.map(function (s) {\n      p = s.points;\n\n      if (p[3]) {\n        s.points = [p[3], p[2], p[1], p[0]];\n      } else {\n        s.points = [p[2], p[1], p[0]];\n      }\n\n      return s;\n    }).reverse(); // form the endcaps as lines\n\n    const fs = fcurves[0].points[0],\n          fe = fcurves[len - 1].points[fcurves[len - 1].points.length - 1],\n          bs = bcurves[len - 1].points[bcurves[len - 1].points.length - 1],\n          be = bcurves[0].points[0],\n          ls = utils$1.makeline(bs, fs),\n          le = utils$1.makeline(fe, be),\n          segments = [ls].concat(fcurves).concat([le]).concat(bcurves);\n          segments.length;\n    return new PolyBezier(segments);\n  }\n\n  outlineshapes(d1, d2, curveIntersectionThreshold) {\n    d2 = d2 || d1;\n    const outline = this.outline(d1, d2).curves;\n    const shapes = [];\n\n    for (let i = 1, len = outline.length; i < len / 2; i++) {\n      const shape = utils$1.makeshape(outline[i], outline[len - i], curveIntersectionThreshold);\n      shape.startcap.virtual = i > 1;\n      shape.endcap.virtual = i < len / 2 - 1;\n      shapes.push(shape);\n    }\n\n    return shapes;\n  }\n\n  intersects(curve, curveIntersectionThreshold) {\n    if (!curve) return this.selfintersects(curveIntersectionThreshold);\n\n    if (curve.p1 && curve.p2) {\n      return this.lineIntersects(curve);\n    }\n\n    if (curve instanceof Bezier) {\n      curve = curve.reduce();\n    }\n\n    return this.curveintersects(this.reduce(), curve, curveIntersectionThreshold);\n  }\n\n  lineIntersects(line) {\n    const mx = min(line.p1.x, line.p2.x),\n          my = min(line.p1.y, line.p2.y),\n          MX = max(line.p1.x, line.p2.x),\n          MY = max(line.p1.y, line.p2.y);\n    return utils$1.roots(this.points, line).filter(t => {\n      var p = this.get(t);\n      return utils$1.between(p.x, mx, MX) && utils$1.between(p.y, my, MY);\n    });\n  }\n\n  selfintersects(curveIntersectionThreshold) {\n    // \"simple\" curves cannot intersect with their direct\n    // neighbour, so for each segment X we check whether\n    // it intersects [0:x-2][x+2:last].\n    const reduced = this.reduce(),\n          len = reduced.length - 2,\n          results = [];\n\n    for (let i = 0, result, left, right; i < len; i++) {\n      left = reduced.slice(i, i + 1);\n      right = reduced.slice(i + 2);\n      result = this.curveintersects(left, right, curveIntersectionThreshold);\n      results.push(...result);\n    }\n\n    return results;\n  }\n\n  curveintersects(c1, c2, curveIntersectionThreshold) {\n    const pairs = []; // step 1: pair off any overlapping segments\n\n    c1.forEach(function (l) {\n      c2.forEach(function (r) {\n        if (l.overlaps(r)) {\n          pairs.push({\n            left: l,\n            right: r\n          });\n        }\n      });\n    }); // step 2: for each pairing, run through the convergence algorithm.\n\n    let intersections = [];\n    pairs.forEach(function (pair) {\n      const result = utils$1.pairiteration(pair.left, pair.right, curveIntersectionThreshold);\n\n      if (result.length > 0) {\n        intersections = intersections.concat(result);\n      }\n    });\n    return intersections;\n  }\n\n  arcs(errorThreshold) {\n    errorThreshold = errorThreshold || 0.5;\n    return this._iterate(errorThreshold, []);\n  }\n\n  _error(pc, np1, s, e) {\n    const q = (e - s) / 4,\n          c1 = this.get(s + q),\n          c2 = this.get(e - q),\n          ref = utils$1.dist(pc, np1),\n          d1 = utils$1.dist(pc, c1),\n          d2 = utils$1.dist(pc, c2);\n    return abs(d1 - ref) + abs(d2 - ref);\n  }\n\n  _iterate(errorThreshold, circles) {\n    let t_s = 0,\n        t_e = 1,\n        safety; // we do a binary search to find the \"good `t` closest to no-longer-good\"\n\n    do {\n      safety = 0; // step 1: start with the maximum possible arc\n\n      t_e = 1; // points:\n\n      let np1 = this.get(t_s),\n          np2,\n          np3,\n          arc,\n          prev_arc; // booleans:\n\n      let curr_good = false,\n          prev_good = false,\n          done; // numbers:\n\n      let t_m = t_e,\n          prev_e = 1;\n // step 2: find the best possible arc\n\n      do {\n        prev_good = curr_good;\n        prev_arc = arc;\n        t_m = (t_s + t_e) / 2;\n        np2 = this.get(t_m);\n        np3 = this.get(t_e);\n        arc = utils$1.getccenter(np1, np2, np3); //also save the t values\n\n        arc.interval = {\n          start: t_s,\n          end: t_e\n        };\n\n        let error = this._error(arc, np1, t_s, t_e);\n\n        curr_good = error <= errorThreshold;\n        done = prev_good && !curr_good;\n        if (!done) prev_e = t_e; // this arc is fine: we can move 'e' up to see if we can find a wider arc\n\n        if (curr_good) {\n          // if e is already at max, then we're done for this arc.\n          if (t_e >= 1) {\n            // make sure we cap at t=1\n            arc.interval.end = prev_e = 1;\n            prev_arc = arc; // if we capped the arc segment to t=1 we also need to make sure that\n            // the arc's end angle is correct with respect to the bezier end point.\n\n            if (t_e > 1) {\n              let d = {\n                x: arc.x + arc.r * cos(arc.e),\n                y: arc.y + arc.r * sin(arc.e)\n              };\n              arc.e += utils$1.angle({\n                x: arc.x,\n                y: arc.y\n              }, d, this.get(1));\n            }\n\n            break;\n          } // if not, move it up by half the iteration distance\n\n\n          t_e = t_e + (t_e - t_s) / 2;\n        } else {\n          // this is a bad arc: we need to move 'e' down to find a good arc\n          t_e = t_m;\n        }\n      } while (!done && safety++ < 100);\n\n      if (safety >= 100) {\n        break;\n      } // console.log(\"L835: [F] arc found\", t_s, prev_e, prev_arc.x, prev_arc.y, prev_arc.s, prev_arc.e);\n\n\n      prev_arc = prev_arc ? prev_arc : arc;\n      circles.push(prev_arc);\n      t_s = prev_e;\n    } while (t_e < 1);\n\n    return circles;\n  }\n\n}\n\nfunction Path(debug = false) {\n  this.render = true;\n  this.topLeft = false;\n  this.bottomRight = false;\n  this.attributes = new Attributes();\n  this.ops = [];\n  Object.defineProperty(this, 'debug', {\n    value: debug,\n    configurable: true\n  });\n}\n/** Adds the raise method for a path not created through the proxy **/\n\n\nPath.prototype.withRaise = function (raise = false) {\n  if (raise) Object.defineProperty(this, 'raise', {\n    value: raise\n  });\n  return this;\n};\n/** Chainable way to set the render property */\n\n\nPath.prototype.setRender = function (render = true) {\n  if (render) this.render = true;else this.render = false;\n  if (this.debug) this.raise.debug('Setting `Path.render` to ' + (render ? '`true`' : '`false`'));\n  return this;\n};\n/** Adds a move operation to Point to */\n\n\nPath.prototype.move = function (to) {\n  if (this.debug && to instanceof Point !== true) this.raise.warning('Called `Path.rotate(to)` but `to` is not a `Point` object');\n  this.ops.push({\n    type: 'move',\n    to\n  });\n  return this;\n};\n/** Adds a line operation to Point to */\n\n\nPath.prototype.line = function (to) {\n  if (this.debug && to instanceof Point !== true) this.raise.warning('Called `Path.line(to)` but `to` is not a `Point` object');\n  this.ops.push({\n    type: 'line',\n    to\n  });\n  return this;\n};\n/** Adds a curve operation via cp1 & cp2 to Point to */\n\n\nPath.prototype.curve = function (cp1, cp2, to) {\n  if (this.debug) {\n    if (to instanceof Point !== true) this.raise.warning('Called `Path.curve(cp1, cp2, to)` but `to` is not a `Point` object');\n    if (cp1 instanceof Point !== true) this.raise.warning('Called `Path.curve(cp1, cp2, to)` but `cp1` is not a `Point` object');\n    if (cp2 instanceof Point !== true) this.raise.warning('Called `Path.curve(cp1, cp2, to)` but `cp2` is not a `Point` object');\n  }\n\n  this.ops.push({\n    type: 'curve',\n    cp1,\n    cp2,\n    to\n  });\n  return this;\n};\n/** Adds a curve operation without cp1 via cp2 to Point to */\n\n\nPath.prototype._curve = function (cp2, to) {\n  if (this.debug) {\n    if (to instanceof Point !== true) this.raise.warning('Called `Path._curve(cp2, to)` but `to` is not a `Point` object');\n    if (cp2 instanceof Point !== true) this.raise.warning('Called `Path._curve(cp2, to)` but `cp2` is not a `Point` object');\n  }\n\n  let cp1 = this.ops.slice(-1).pop().to;\n  this.ops.push({\n    type: 'curve',\n    cp1,\n    cp2,\n    to\n  });\n  return this;\n};\n/** Adds a curve operation via cp1 with no cp2 to Point to */\n\n\nPath.prototype.curve_ = function (cp1, to) {\n  if (this.debug) {\n    if (to instanceof Point !== true) this.raise.warning('Called `Path.curve_(cp1, to)` but `to` is not a `Point` object');\n    if (cp1 instanceof Point !== true) this.raise.warning('Called `Path.curve_(cp1, to)` but `cp2` is not a `Point` object');\n  }\n\n  let cp2 = to.copy();\n  this.ops.push({\n    type: 'curve',\n    cp1,\n    cp2,\n    to\n  });\n  return this;\n};\n/** Adds a close operation */\n\n\nPath.prototype.close = function () {\n  this.ops.push({\n    type: 'close'\n  });\n  return this;\n};\n/** Adds a noop operation */\n\n\nPath.prototype.noop = function (id = false) {\n  this.ops.push({\n    type: 'noop',\n    id\n  });\n  return this;\n};\n/** Replace a noop operation with the ops from path */\n\n\nPath.prototype.insop = function (noopId, path) {\n  if (this.debug) {\n    if (!noopId) this.raise.warning('Called `Path.insop(noopId, path)` but `noopId` is undefined or false');\n    if (path instanceof Path !== true) this.raise.warning('Called `Path.insop(noopId, path) but `path` is not a `Path` object');\n  }\n\n  let newPath = this.clone();\n\n  for (let i in newPath.ops) {\n    if (newPath.ops[i].type === 'noop' && newPath.ops[i].id === noopId) {\n      newPath.ops = newPath.ops.slice(0, i).concat(path.ops).concat(newPath.ops.slice(Number(i) + 1));\n    }\n  }\n\n  return newPath;\n};\n/** Adds an attribute. This is here to make this call chainable in assignment */\n\n\nPath.prototype.attr = function (name, value, overwrite = false) {\n  if (this.debug) {\n    if (!name) this.raise.warning('Called `Path.attr(name, value, overwrite=false)` but `name` is undefined or false');\n    if (typeof value === 'undefined') this.raise.warning('Called `Path.attr(name, value, overwrite=false)` but `value` is undefined');\n    if (overwrite) this.raise.debug(`Overwriting \\`Path.attribute.${name}\\` with ${value} (was: ${this.attributes.get(name)})`);\n  }\n\n  if (overwrite) this.attributes.set(name, value);else this.attributes.add(name, value);\n  return this;\n};\n/** Returns SVG pathstring for this path */\n\n\nPath.prototype.asPathstring = function () {\n  let d = '';\n\n  for (let op of this.ops) {\n    switch (op.type) {\n      case 'move':\n        d += `M ${round(op.to.x)},${round(op.to.y)}`;\n        break;\n\n      case 'line':\n        d += ` L ${round(op.to.x)},${round(op.to.y)}`;\n        break;\n\n      case 'curve':\n        d += ` C ${round(op.cp1.x)},${round(op.cp1.y)} ${round(op.cp2.x)},${round(op.cp2.y)} ${round(op.to.x)},${round(op.to.y)}`;\n        break;\n\n      case 'close':\n        d += ' z';\n        break;\n    }\n  }\n\n  return d;\n};\n/** Returns offset of this path as a new path */\n\n\nPath.prototype.offset = function (distance) {\n  if (typeof distance !== 'number') this.raise.error('Called `Path.offset(distance)` but `distance` is not a number');\n  return pathOffset(this, distance, this.raise);\n};\n/** Returns the length of this path */\n\n\nPath.prototype.length = function () {\n  let current, start;\n  let length = 0;\n\n  for (let i in this.ops) {\n    let op = this.ops[i];\n\n    if (op.type === 'move') {\n      start = op.to;\n    } else if (op.type === 'line') {\n      length += current.dist(op.to);\n    } else if (op.type === 'curve') {\n      length += new Bezier({\n        x: current.x,\n        y: current.y\n      }, {\n        x: op.cp1.x,\n        y: op.cp1.y\n      }, {\n        x: op.cp2.x,\n        y: op.cp2.y\n      }, {\n        x: op.to.x,\n        y: op.to.y\n      }).length();\n    } else if (op.type === 'close') {\n      length += current.dist(start);\n    }\n\n    if (op.to) current = op.to;\n  }\n\n  return length;\n};\n/** Returns the startpoint of the path */\n\n\nPath.prototype.start = function () {\n  if (this.ops.length < 1 || typeof this.ops[0].to === 'undefined') this.raise.error('Called `Path.start()` but this path has no drawing operations');\n  return this.ops[0].to;\n};\n/** Returns the endpoint of the path */\n\n\nPath.prototype.end = function () {\n  if (this.ops.length < 1) this.raise.error('Called `Path.end()` but this path has no drawing operations');\n  let op = this.ops[this.ops.length - 1];\n  if (op.type === 'close') return this.start();else return op.to;\n};\n/** Finds the bounding box of a path */\n\n\nPath.prototype.boundary = function () {\n  if (this.topLeft) return this; // Cached\n\n  let current;\n  let topLeft = new Point(Infinity, Infinity);\n  let bottomRight = new Point(-Infinity, -Infinity);\n  let edges = [];\n\n  for (let i in this.ops) {\n    let op = this.ops[i];\n\n    if (op.type === 'move' || op.type === 'line') {\n      if (op.to.x < topLeft.x) {\n        topLeft.x = op.to.x;\n        edges['leftOp'] = i;\n      }\n\n      if (op.to.y < topLeft.y) {\n        topLeft.y = op.to.y;\n        edges['topOp'] = i;\n      }\n\n      if (op.to.x > bottomRight.x) {\n        bottomRight.x = op.to.x;\n        edges['rightOp'] = i;\n      }\n\n      if (op.to.y > bottomRight.y) {\n        bottomRight.y = op.to.y;\n        edges['bottomOp'] = i;\n      }\n    } else if (op.type === 'curve') {\n      let bb = new Bezier({\n        x: current.x,\n        y: current.y\n      }, {\n        x: op.cp1.x,\n        y: op.cp1.y\n      }, {\n        x: op.cp2.x,\n        y: op.cp2.y\n      }, {\n        x: op.to.x,\n        y: op.to.y\n      }).bbox();\n\n      if (bb.x.min < topLeft.x) {\n        topLeft.x = bb.x.min;\n        edges['leftOp'] = i;\n      }\n\n      if (bb.y.min < topLeft.y) {\n        topLeft.y = bb.y.min;\n        edges['topOp'] = i;\n      }\n\n      if (bb.x.max > bottomRight.x) {\n        bottomRight.x = bb.x.max;\n        edges['rightOp'] = i;\n      }\n\n      if (bb.y.max > bottomRight.y) {\n        bottomRight.y = bb.y.max;\n        edges['bottomOp'] = i;\n      }\n    }\n\n    if (op.to) current = op.to;\n  }\n\n  this.topLeft = topLeft;\n  this.bottomRight = bottomRight;\n\n  for (let side of ['top', 'left', 'bottom', 'right']) {\n    let s = side + 'Op';\n    this[s] = this.ops[edges[s]];\n    this[s].from = this[s].type === 'move' ? this[s].to : this.ops[edges[s] - 1].to;\n  }\n\n  return this;\n};\n/** Returns a deep copy of this */\n\n\nPath.prototype.clone = function () {\n  let clone = new Path(this.debug).withRaise(this.raise).setRender(this.render);\n  if (this.topLeft) clone.topLeft = this.topLeft.clone();else clone.topLeft = false;\n  if (this.bottomRight) clone.bottomRight = this.bottomRight.clone();else clone.bottomRight = false;\n  clone.attributes = this.attributes.clone();\n  clone.ops = [];\n\n  for (let i in this.ops) {\n    let op = this.ops[i];\n    clone.ops[i] = {\n      type: op.type\n    };\n\n    if (op.type === 'move' || op.type === 'line') {\n      clone.ops[i].to = op.to.clone();\n    } else if (op.type === 'curve') {\n      clone.ops[i].to = op.to.clone();\n      clone.ops[i].cp1 = op.cp1.clone();\n      clone.ops[i].cp2 = op.cp2.clone();\n    } else if (op.type === 'noop') {\n      clone.ops[i].id = op.id;\n    }\n  }\n\n  return clone;\n};\n/** Joins this with that path, closes them if wanted */\n\n\nPath.prototype.join = function (that, closed = false) {\n  if (that instanceof Path !== true) this.raise.error('Called `Path.join(that)` but `that` is not a `Path` object');\n  return joinPaths([this, that], closed, this.raise);\n};\n/** Offsets a path by distance */\n\n\nfunction pathOffset(path, distance, raise) {\n  let offset = [];\n  let current;\n  let closed = false;\n\n  for (let i in path.ops) {\n    let op = path.ops[i];\n\n    if (op.type === 'line') {\n      let segment = offsetLine(current, op.to, distance, path.debug, path.raise);\n      if (segment) offset.push(segment);\n    } else if (op.type === 'curve') {\n      // We need to avoid a control point sitting on top of start or end\n      // because that will break the offset in bezier-js\n      let cp1, cp2;\n\n      if (current.sitsRoughlyOn(op.cp1)) {\n        cp1 = new Path(path.debug).withRaise(path.raise).move(current).curve(op.cp1, op.cp2, op.to).shiftAlong(2);\n      } else cp1 = op.cp1;\n\n      if (op.cp2.sitsRoughlyOn(op.to)) {\n        cp2 = new Path(path.debug).withRaise(path.raise).move(op.to).curve(op.cp2, op.cp1, current).shiftAlong(2);\n      } else cp2 = op.cp2;\n\n      let b = new Bezier({\n        x: current.x,\n        y: current.y\n      }, {\n        x: cp1.x,\n        y: cp1.y\n      }, {\n        x: cp2.x,\n        y: cp2.y\n      }, {\n        x: op.to.x,\n        y: op.to.y\n      });\n\n      for (let bezier of b.offset(distance)) offset.push(asPath(bezier, path.debug, path.raise));\n    } else if (op.type === 'close') closed = true;\n\n    if (op.to) current = op.to;\n  }\n\n  return joinPaths(offset, closed, raise);\n}\n/** Offsets a line by distance */\n\n\nfunction offsetLine(from, to, distance, debug = false, raise = false) {\n  if (from.x === to.x && from.y === to.y) return false;\n  let angle = from.angle(to) - 90;\n  return new Path(debug).withRaise(raise).move(from.shift(angle, distance)).line(to.shift(angle, distance));\n}\n/** Converts a bezier-js instance to a path */\n\n\nfunction asPath(bezier, debug = false, raise = false) {\n  return new Path(debug).withRaise(raise).move(new Point(bezier.points[0].x, bezier.points[0].y)).curve(new Point(bezier.points[1].x, bezier.points[1].y), new Point(bezier.points[2].x, bezier.points[2].y), new Point(bezier.points[3].x, bezier.points[3].y));\n}\n/** Joins path segments together into one path */\n\n\nfunction joinPaths(paths, closed = false, raise = false) {\n  let joint = new Path(paths[0].debug).withRaise(paths[0].raise).move(paths[0].ops[0].to);\n  let current;\n\n  for (let p of paths) {\n    for (let op of p.ops) {\n      if (op.type === 'curve') {\n        joint.curve(op.cp1, op.cp2, op.to);\n      } else if (op.type !== 'close') {\n        // We're using sitsRoughlyOn here to avoid miniscule line segments\n        if (current && !op.to.sitsRoughlyOn(current)) joint.line(op.to);\n      } else {\n        let err = 'Cannot join a closed path with another';\n        joint.raise.error(err);\n        throw new Error(err);\n      }\n\n      if (op.to) current = op.to;\n    }\n  }\n\n  if (closed) joint.close();\n  return joint;\n}\n/** Returns a point that lies at distance along this */\n\n\nPath.prototype.shiftAlong = function (distance, stepsPerMm = 25) {\n  if (typeof distance !== 'number') this.raise.error('Called `Path.shiftAlong(distance)` but `distance` is not a number');\n  let len = 0;\n  let current;\n\n  for (let i in this.ops) {\n    let op = this.ops[i];\n\n    if (op.type === 'line') {\n      let thisLen = op.to.dist(current);\n      if (Math.abs(len + thisLen - distance) < 0.1) return op.to;\n      if (len + thisLen > distance) return current.shiftTowards(op.to, distance - len);\n      len += thisLen;\n    } else if (op.type === 'curve') {\n      let bezier = new Bezier({\n        x: current.x,\n        y: current.y\n      }, {\n        x: op.cp1.x,\n        y: op.cp1.y\n      }, {\n        x: op.cp2.x,\n        y: op.cp2.y\n      }, {\n        x: op.to.x,\n        y: op.to.y\n      });\n      let thisLen = bezier.length();\n      if (Math.abs(len + thisLen - distance) < 0.1) return op.to;\n      if (len + thisLen > distance) return shiftAlongBezier(distance - len, bezier, thisLen * stepsPerMm);\n      len += thisLen;\n    }\n\n    current = op.to;\n  }\n\n  this.raise.error(`Called \\`Path.shiftAlong(distance)\\` with a \\`distance\\` of \\`${distance}\\` but \\`Path.length()\\` is only \\`${this.length()}\\``);\n};\n/** Returns a point that lies at fraction along this */\n\n\nPath.prototype.shiftFractionAlong = function (fraction, stepsPerMm = 25) {\n  if (typeof fraction !== 'number') this.raise.error('Called `Path.shiftFractionAlong(fraction)` but `fraction` is not a number');\n  return this.shiftAlong(this.length() * fraction, stepsPerMm);\n};\n/** Returns a point that lies at distance along bezier */\n\n\nfunction shiftAlongBezier(distance, bezier, steps = 100) {\n  let previous, next, t, thisLen;\n  let len = 0;\n\n  for (let i = 0; i <= steps; i++) {\n    t = i / steps;\n    next = bezier.get(t);\n    next = new Point(next.x, next.y);\n\n    if (i > 0) {\n      thisLen = next.dist(previous);\n      if (len + thisLen > distance) return next;else len += thisLen;\n    }\n\n    previous = next;\n  }\n}\n/** Returns a point at the top edge of a bounding box of this */\n\n\nPath.prototype.bbox = function () {\n  let bbs = [];\n  let current;\n\n  for (let i in this.ops) {\n    let op = this.ops[i];\n\n    if (op.type === 'line') {\n      bbs.push(lineBoundingBox({\n        from: current,\n        to: op.to\n      }));\n    } else if (op.type === 'curve') {\n      bbs.push(curveBoundingBox(new Bezier({\n        x: current.x,\n        y: current.y\n      }, {\n        x: op.cp1.x,\n        y: op.cp1.y\n      }, {\n        x: op.cp2.x,\n        y: op.cp2.y\n      }, {\n        x: op.to.x,\n        y: op.to.y\n      })));\n    }\n\n    if (op.to) current = op.to;\n  }\n\n  return bbbbox(bbs);\n};\n\nfunction lineBoundingBox(line) {\n  let from = line.from;\n  let to = line.to;\n\n  if (from.x === to.x) {\n    if (from.y < to.y) return {\n      topLeft: from,\n      bottomRight: to\n    };else return {\n      topLeft: to,\n      bottomRight: from\n    };\n  } else if (from.y === to.y) {\n    if (from.x < to.x) return {\n      topLeft: from,\n      bottomRight: to\n    };else return {\n      topLeft: to,\n      bottomRight: from\n    };\n  } else if (from.x < to.x) {\n    if (from.y < to.y) return {\n      topLeft: from,\n      bottomRight: to\n    };else return {\n      topLeft: new Point(from.x, to.y),\n      bottomRight: new Point(to.x, from.y)\n    };\n  } else if (from.x > to.x) {\n    if (from.y < to.y) return {\n      topLeft: new Point(to.x, from.y),\n      bottomRight: new Point(from.x, to.y)\n    };else return {\n      topLeft: new Point(to.x, to.y),\n      bottomRight: new Point(from.x, from.y)\n    };\n  }\n}\n\nfunction curveBoundingBox(curve) {\n  let bb = curve.bbox();\n  return {\n    topLeft: new Point(bb.x.min, bb.y.min),\n    bottomRight: new Point(bb.x.max, bb.y.max)\n  };\n}\n\nfunction bbbbox(boxes) {\n  let minX = Infinity;\n  let maxX = -Infinity;\n  let minY = Infinity;\n  let maxY = -Infinity;\n\n  for (let box of boxes) {\n    if (box.topLeft.x < minX) minX = box.topLeft.x;\n    if (box.topLeft.y < minY) minY = box.topLeft.y;\n    if (box.bottomRight.x > maxX) maxX = box.bottomRight.x;\n    if (box.bottomRight.y > maxY) maxY = box.bottomRight.y;\n  }\n\n  return {\n    topLeft: new Point(minX, minY),\n    bottomRight: new Point(maxX, maxY)\n  };\n}\n/** Returns a reversed version of this */\n\n\nPath.prototype.reverse = function () {\n  let sections = [];\n  let current;\n  let closed = false;\n\n  for (let i in this.ops) {\n    let op = this.ops[i];\n\n    if (op.type === 'line') {\n      if (!op.to.sitsOn(current)) sections.push(new Path(this.debug).withRaise(this.raise).move(op.to).line(current));\n    } else if (op.type === 'curve') {\n      sections.push(new Path(this.debug).withRaise(this.raise).move(op.to).curve(op.cp2, op.cp1, current));\n    } else if (op.type === 'close') {\n      closed = true;\n    }\n\n    if (op.to) current = op.to;\n  }\n\n  let rev = new Path(this.debug).withRaise(this.raise).move(current);\n\n  for (let section of sections.reverse()) rev.ops.push(section.ops[1]);\n\n  if (closed) rev.close();\n  return rev;\n};\n/** Returns the point at an edge of this path */\n\n\nPath.prototype.edge = function (side) {\n  this.boundary();\n  if (side === 'topLeft') return this.topLeft;else if (side === 'bottomRight') return this.bottomRight;else if (side === 'topRight') return new Point(this.bottomRight.x, this.topLeft.y);else if (side === 'bottomLeft') return new Point(this.topLeft.x, this.bottomRight.y);else {\n    let s = side + 'Op';\n    if (this[s].type === 'move') return this[s].to;else if (this[s].type === 'line') {\n      if (side === 'top') {\n        if (this.topOp.to.y < this.topOp.from.y) return this.topOp.to;else return this.topOp.from;\n      } else if (side === 'left') {\n        if (this.leftOp.to.x < this.leftOp.from.x) return this.leftOp.to;else return this.leftOp.from;\n      } else if (side === 'bottom') {\n        if (this.bottomOp.to.y > this.bottomOp.from.y) return this.bottomOp.to;else return this.bottomOp.from;\n      } else if (side === 'right') {\n        if (this.rightOp.to.x > this.rightOp.from.x) return this.rightOp.to;else return this.rightOp.from;\n      }\n    } else if (this[s].type === 'curve') {\n      let curve = edgeCurveAsBezier(this[s]);\n      return curveEdge(curve, side);\n    }\n  }\n  this.raise.error(`Unable to find \\`Path.edge(side)\\` for side ${side}`);\n};\n\nfunction edgeCurveAsBezier(op) {\n  return new Bezier({\n    x: op.from.x,\n    y: op.from.y\n  }, {\n    x: op.cp1.x,\n    y: op.cp1.y\n  }, {\n    x: op.cp2.x,\n    y: op.cp2.y\n  }, {\n    x: op.to.x,\n    y: op.to.y\n  });\n}\n/** Divides a path into atomic paths */\n\n\nPath.prototype.divide = function () {\n  let paths = [];\n  let current, start;\n\n  for (let i in this.ops) {\n    let op = this.ops[i];\n\n    if (op.type === 'move') {\n      start = op.to;\n    } else if (op.type === 'line') {\n      if (!op.to.sitsRoughlyOn(current)) paths.push(new Path(this.debug).withRaise(this.raise).move(current).line(op.to));\n    } else if (op.type === 'curve') {\n      paths.push(new Path(this.debug).withRaise(this.raise).move(current).curve(op.cp1, op.cp2, op.to));\n    } else if (op.type === 'close') {\n      paths.push(new Path(this.debug).withRaise(this.raise).move(current).line(start));\n    }\n\n    if (op.to) current = op.to;\n  }\n\n  return paths;\n};\n/** Finds intersections between this path and an X value */\n\n\nPath.prototype.intersectsX = function (x) {\n  if (typeof x !== 'number') this.raise.error('Called `Path.intersectsX(x)` but `x` is not a number');\n  return this.intersectsAxis(x, 'x');\n};\n/** Finds intersections between this path and an Y value */\n\n\nPath.prototype.intersectsY = function (y) {\n  if (typeof y !== 'number') this.raise.error('Called `Path.intersectsX(y)` but `y` is not a number');\n  return this.intersectsAxis(y, 'y');\n};\n/** Finds intersections between this path and a X or Y value */\n\n\nPath.prototype.intersectsAxis = function (val = false, mode) {\n  let intersections = [];\n  let lineStart = mode === 'x' ? new Point(val, -100000) : new Point(-10000, val);\n  let lineEnd = mode === 'x' ? new Point(val, 100000) : new Point(100000, val);\n\n  for (let path of this.divide()) {\n    if (path.ops[1].type === 'line') {\n      addIntersectionsToArray(linesIntersect(path.ops[0].to, path.ops[1].to, lineStart, lineEnd), intersections);\n    } else if (path.ops[1].type === 'curve') {\n      addIntersectionsToArray(lineIntersectsCurve(lineStart, lineEnd, path.ops[0].to, path.ops[1].cp1, path.ops[1].cp2, path.ops[1].to), intersections);\n    }\n  }\n\n  return intersections;\n};\n/** Finds intersections between this path and another path */\n\n\nPath.prototype.intersects = function (path) {\n  if (this === path) this.raise.error('You called Path.intersects(path)` but `path` and `this` are the same object');\n  let intersections = [];\n\n  for (let pathA of this.divide()) {\n    for (let pathB of path.divide()) {\n      if (pathA.ops[1].type === 'line') {\n        if (pathB.ops[1].type === 'line') {\n          addIntersectionsToArray(linesIntersect(pathA.ops[0].to, pathA.ops[1].to, pathB.ops[0].to, pathB.ops[1].to), intersections);\n        } else if (pathB.ops[1].type === 'curve') {\n          addIntersectionsToArray(lineIntersectsCurve(pathA.ops[0].to, pathA.ops[1].to, pathB.ops[0].to, pathB.ops[1].cp1, pathB.ops[1].cp2, pathB.ops[1].to), intersections);\n        }\n      } else if (pathA.ops[1].type === 'curve') {\n        if (pathB.ops[1].type === 'line') {\n          addIntersectionsToArray(lineIntersectsCurve(pathB.ops[0].to, pathB.ops[1].to, pathA.ops[0].to, pathA.ops[1].cp1, pathA.ops[1].cp2, pathA.ops[1].to), intersections);\n        } else if (pathB.ops[1].type === 'curve') {\n          addIntersectionsToArray(curvesIntersect(pathA.ops[0].to, pathA.ops[1].cp1, pathA.ops[1].cp2, pathA.ops[1].to, pathB.ops[0].to, pathB.ops[1].cp1, pathB.ops[1].cp2, pathB.ops[1].to), intersections);\n        }\n      }\n    }\n  }\n\n  return intersections;\n};\n\nfunction addIntersectionsToArray(candidates, intersections) {\n  if (!candidates) return;\n\n  if (typeof candidates === 'object') {\n    if (typeof candidates.x === 'number') intersections.push(candidates);else {\n      for (let candidate of candidates) intersections.push(candidate);\n    }\n  }\n}\n/** Splits path on point, and retuns both halves */\n\n\nPath.prototype.split = function (point) {\n  if (point instanceof Point !== true) this.raise.error('Called `Path.split(point)` but `point` is not a `Point` object');\n  let divided = this.divide();\n  let firstHalf = false;\n  let secondHalf = false;\n\n  for (let pi = 0; pi < divided.length; pi++) {\n    let path = divided[pi];\n\n    if (path.ops[1].type === 'line') {\n      if (pointOnLine(path.ops[0].to, path.ops[1].to, point)) {\n        firstHalf = divided.slice(0, pi);\n        firstHalf.push(new Path(this.debug).withRaise(this.raise).move(path.ops[0].to).line(point));\n        pi++;\n        secondHalf = divided.slice(pi);\n        secondHalf.unshift(new Path(this.debug).withRaise(this.raise).move(point).line(path.ops[1].to));\n      }\n    } else if (path.ops[1].type === 'curve') {\n      let t = pointOnCurve(path.ops[0].to, path.ops[1].cp1, path.ops[1].cp2, path.ops[1].to, point);\n\n      if (t !== false) {\n        let curve = new Bezier({\n          x: path.ops[0].to.x,\n          y: path.ops[0].to.y\n        }, {\n          x: path.ops[1].cp1.x,\n          y: path.ops[1].cp1.y\n        }, {\n          x: path.ops[1].cp2.x,\n          y: path.ops[1].cp2.y\n        }, {\n          x: path.ops[1].to.x,\n          y: path.ops[1].to.y\n        });\n        let split = curve.split(t);\n        firstHalf = divided.slice(0, pi);\n        firstHalf.push(new Path(this.debug).withRaise(this.raise).move(new Point(split.left.points[0].x, split.left.points[0].y)).curve(new Point(split.left.points[1].x, split.left.points[1].y), new Point(split.left.points[2].x, split.left.points[2].y), new Point(split.left.points[3].x, split.left.points[3].y)));\n        pi++;\n        secondHalf = divided.slice(pi);\n        secondHalf.unshift(new Path(this.debug).withRaise(this.raise).move(new Point(split.right.points[0].x, split.right.points[0].y)).curve(new Point(split.right.points[1].x, split.right.points[1].y), new Point(split.right.points[2].x, split.right.points[2].y), new Point(split.right.points[3].x, split.right.points[3].y)));\n      }\n    }\n  }\n\n  if (firstHalf) firstHalf = joinPaths(firstHalf, false, this.raise);\n  if (secondHalf) secondHalf = joinPaths(secondHalf, false, this.raise);\n  return [firstHalf, secondHalf];\n};\n/** Removes self-intersections (overlap) from the path */\n\n\nPath.prototype.trim = function () {\n  let chunks = this.divide();\n\n  for (let i = 0; i < chunks.length; i++) {\n    let firstCandidate = parseInt(i) + 2;\n    let lastCandidate = parseInt(chunks.length) - 1;\n\n    for (let j = firstCandidate; j < lastCandidate; j++) {\n      let intersections = chunks[i].intersects(chunks[j]);\n\n      if (intersections.length > 0) {\n        let intersection = intersections.pop();\n        let trimmedStart = chunks.slice(0, i);\n        let trimmedEnd = chunks.slice(parseInt(j) + 1);\n        let glue = new Path(this.debug).withRaise(this.raise);\n        let first = true;\n\n        for (let k of [i, j]) {\n          let ops = chunks[k].ops;\n\n          if (ops[1].type === 'line') {\n            glue.line(intersection);\n          } else if (ops[1].type === 'curve') {\n            // handle curve\n            let curve = new Bezier({\n              x: ops[0].to.x,\n              y: ops[0].to.y\n            }, {\n              x: ops[1].cp1.x,\n              y: ops[1].cp1.y\n            }, {\n              x: ops[1].cp2.x,\n              y: ops[1].cp2.y\n            }, {\n              x: ops[1].to.x,\n              y: ops[1].to.y\n            });\n            let t = pointOnCurve(ops[0].to, ops[1].cp1, ops[1].cp2, ops[1].to, intersection);\n            let split = curve.split(t);\n            let side;\n            if (first) side = split.left;else side = split.right;\n            glue.curve(new Point(side.points[1].x, side.points[1].y), new Point(side.points[2].x, side.points[2].y), new Point(side.points[3].x, side.points[3].y));\n          }\n\n          first = false;\n        }\n\n        let joint;\n        if (trimmedStart.length > 0) joint = joinPaths(trimmedStart, false, this.raise).join(glue);else joint = glue;\n        if (trimmedEnd.length > 0) joint = joint.join(joinPaths(trimmedEnd, false, this.raise));\n        return joint.trim();\n      }\n    }\n  }\n\n  return this;\n};\n/** Applies a path translate transform */\n\n\nPath.prototype.translate = function (x, y) {\n  if (this.debug) {\n    if (typeof x !== 'number') this.raise.warning('Called `Path.translate(x, y)` but `x` is not a number');\n    if (typeof y !== 'number') this.raise.warning('Called `Path.translate(x, y)` but `y` is not a number');\n  }\n\n  let clone = this.clone();\n\n  for (let op of clone.ops) {\n    if (op.type !== 'close') {\n      op.to = op.to.translate(x, y);\n    }\n\n    if (op.type === 'curve') {\n      op.cp1 = op.cp1.translate(x, y);\n      op.cp2 = op.cp2.translate(x, y);\n    }\n  }\n\n  return clone;\n};\n\nfunction capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n/** Checks for a valid coordinate value **/\n\nfunction isCoord(value) {\n  return value === value // NaN does not equal itself\n  ? typeof value === 'number' : false;\n}\n/** Returns internal hook name for a macro */\n\nfunction macroName(name) {\n  return `_macro_${name}`;\n}\n/** Find intersection of two (endless) lines */\n\nfunction beamsIntersect(a1, a2, b1, b2) {\n  let slopeA = a1.slope(a2);\n  let slopeB = b1.slope(b2);\n  if (slopeA === slopeB) return false; // Parallel lines\n\n  if (a1.x === a2.x) return new Point(a1.x, slopeB * a1.x + (b1.y - slopeB * b1.x)); // Vertical line A\n  else if (b1.x === b2.x) return new Point(b1.x, slopeA * b1.x + (a1.y - slopeA * a1.x)); // Vertical line B\n    else {\n        // Swap points if line A or B goes from right to left\n        if (a1.x > a2.x) a1 = a2.copy();\n        if (b1.x > b2.x) b1 = b2.copy(); // Find y intercept\n\n        let iA = a1.y - slopeA * a1.x;\n        let iB = b1.y - slopeB * b1.x; // Find intersection\n\n        let x = (iB - iA) / (slopeA - slopeB);\n        let y = slopeA * x + iA;\n        return new Point(x, y);\n      }\n}\n/** Find intersection of two line segments */\n\nfunction linesIntersect(a1, a2, b1, b2) {\n  let p = beamsIntersect(a1, a2, b1, b2);\n  if (!p) return false;\n  let lenA = a1.dist(a2);\n  let lenB = b1.dist(b2);\n  let lenC = a1.dist(p) + p.dist(a2);\n  let lenD = b1.dist(p) + p.dist(b2);\n  if (Math.round(lenA) == Math.round(lenC) && Math.round(lenB) == Math.round(lenD)) return p;else return false;\n}\n/** Finds out whether a point lies on an endless line */\n\nfunction pointOnBeam(from, to, check, precision = 1e6) {\n  if (from.sitsOn(check)) return true;\n  if (to.sitsOn(check)) return true;\n  let cross = check.dx(from) * to.dy(from) - check.dy(from) * to.dx(from);\n  if (Math.abs(Math.round(cross * precision) / precision) === 0) return true;else return false;\n}\n/** Finds out whether a point lies on a line segment */\n\nfunction pointOnLine(from, to, check, precision = 1e6) {\n  if (!pointOnBeam(from, to, check, precision)) return false;\n  let lenA = from.dist(to);\n  let lenB = from.dist(check) + check.dist(to);\n  if (Math.round(lenA) == Math.round(lenB)) return true;else return false;\n}\n/** Finds out whether a point lies on a curve */\n\nfunction pointOnCurve(start, cp1, cp2, end, check) {\n  if (start.sitsOn(check)) return true;\n  if (end.sitsOn(check)) return true;\n  let curve = new Bezier({\n    x: start.x,\n    y: start.y\n  }, {\n    x: cp1.x,\n    y: cp1.y\n  }, {\n    x: cp2.x,\n    y: cp2.y\n  }, {\n    x: end.x,\n    y: end.y\n  });\n  let intersections = curve.intersects({\n    p1: {\n      x: check.x - 1,\n      y: check.y\n    },\n    p2: {\n      x: check.x + 1,\n      y: check.y\n    }\n  });\n\n  if (intersections.length === 0) {\n    // Handle edge case of a curve that's a perfect horizontal line\n    intersections = curve.intersects({\n      p1: {\n        x: check.x,\n        y: check.y - 1\n      },\n      p2: {\n        x: check.x,\n        y: check.y + 1\n      }\n    });\n  }\n\n  if (intersections.length > 0) return intersections.shift();else return false;\n}\n/** Splits a curve on a point */\n\nfunction splitCurve(start, cp1, cp2, end, split) {\n  let [c1, c2] = new Path().move(start).curve(cp1, cp2, end).split(split);\n  return [{\n    start: c1.ops[0].to,\n    cp1: c1.ops[1].cp1,\n    cp2: c1.ops[1].cp2,\n    end: c1.ops[1].to\n  }, {\n    start: c2.ops[0].to,\n    cp1: c2.ops[1].cp1,\n    cp2: c2.ops[1].cp2,\n    end: c2.ops[1].to\n  }];\n}\n/** Find where an (endless) line intersects with a certain X-value */\n\nfunction beamIntersectsX(from, to, x) {\n  if (from.x === to.x) return false; // Vertical line\n\n  let top = new Point(x, -10);\n  let bottom = new Point(x, 10);\n  return beamsIntersect(from, to, top, bottom);\n}\n/** Find where an (endless) line intersects with a certain Y-value */\n\nfunction beamIntersectsY(from, to, y) {\n  if (from.y === to.y) return false; // Horizontal line\n\n  let left = new Point(-10, y);\n  let right = new Point(10, y);\n  return beamsIntersect(from, to, left, right);\n}\n/** Convert value in mm to cm or imperial units */\n\nfunction units(value, to = 'metric') {\n  if (to === 'imperial') return round(value / 25.4) + '&quot;';else return round(value / 10) + 'cm';\n}\n/** Find where a curve intersects with line */\n\nfunction lineIntersectsCurve(start, end, from, cp1, cp2, to) {\n  let intersections = [];\n  let bz = new Bezier({\n    x: from.x,\n    y: from.y\n  }, {\n    x: cp1.x,\n    y: cp1.y\n  }, {\n    x: cp2.x,\n    y: cp2.y\n  }, {\n    x: to.x,\n    y: to.y\n  });\n  let line = {\n    p1: {\n      x: start.x,\n      y: start.y\n    },\n    p2: {\n      x: end.x,\n      y: end.y\n    }\n  };\n\n  for (let t of bz.intersects(line)) {\n    let isect = bz.get(t);\n    intersections.push(new Point(isect.x, isect.y));\n  }\n\n  if (intersections.length === 0) return false;else if (intersections.length === 1) return intersections[0];else return intersections;\n}\n/** Find where a curve intersects with a given X-value */\n\nfunction curveIntersectsX(from, cp1, cp2, to, x) {\n  let start = new Point(x, -10000);\n  let end = new Point(x, 10000);\n  return lineIntersectsCurve(start, end, from, cp1, cp2, to);\n}\n/** Find where a curve intersects with a given Y-value */\n\nfunction curveIntersectsY(from, cp1, cp2, to, y) {\n  let start = new Point(-10000, y);\n  let end = new Point(10000, y);\n  return lineIntersectsCurve(start, end, from, cp1, cp2, to);\n}\n/** Find where a curve intersects with another curve */\n\nfunction curvesIntersect(fromA, cp1A, cp2A, toA, fromB, cp1B, cp2B, toB) {\n  let precision = 0.005; // See https://github.com/Pomax/bezierjs/issues/99\n\n  let intersections = [];\n  let curveA = new Bezier({\n    x: fromA.x,\n    y: fromA.y\n  }, {\n    x: cp1A.x,\n    y: cp1A.y\n  }, {\n    x: cp2A.x,\n    y: cp2A.y\n  }, {\n    x: toA.x,\n    y: toA.y\n  });\n  let curveB = new Bezier({\n    x: fromB.x,\n    y: fromB.y\n  }, {\n    x: cp1B.x,\n    y: cp1B.y\n  }, {\n    x: cp2B.x,\n    y: cp2B.y\n  }, {\n    x: toB.x,\n    y: toB.y\n  });\n\n  for (let tvalues of curveA.intersects(curveB, precision)) {\n    let intersection = curveA.get(tvalues.substr(0, tvalues.indexOf('/')));\n    intersections.push(new Point(intersection.x, intersection.y));\n  }\n\n  if (intersections.length === 0) return false;else if (intersections.length === 1) return intersections.shift();else {\n    let unique = [];\n\n    for (let i of intersections) {\n      let dupe = false;\n\n      for (let u of unique) {\n        if (i.sitsRoughlyOn(u)) dupe = true;\n      }\n\n      if (!dupe) unique.push(i);\n    }\n\n    return unique;\n  }\n}\n/** Find the intersections between two circles */\n\nfunction circlesIntersect(c1, r1, c2, r2, sort = 'x') {\n  let dx = c1.dx(c2);\n  let dy = c1.dy(c2);\n  let dist = c1.dist(c2); // Check for edge cases\n\n  if (dist > parseFloat(r1) + parseFloat(r2)) return false; // Circles do not intersect\n\n  if (dist < parseFloat(r2) - parseFloat(r1)) return false; // One circle is contained in the other\n\n  if (dist === 0 && r1 === r2) return false; // Two circles are identical\n\n  let chorddistance = (Math.pow(r1, 2) - Math.pow(r2, 2) + Math.pow(dist, 2)) / (2 * dist);\n  let halfchordlength = Math.sqrt(Math.pow(r1, 2) - Math.pow(chorddistance, 2));\n  let chordmidpointx = c1.x + chorddistance * dx / dist;\n  let chordmidpointy = c1.y + chorddistance * dy / dist;\n  let i1 = new Point(chordmidpointx + halfchordlength * dy / dist, chordmidpointy - halfchordlength * dx / dist);\n  let i2 = new Point(chordmidpointx - halfchordlength * dy / dist, chordmidpointy + halfchordlength * dx / dist);\n  if (sort === 'x' && i1.x <= i2.x || sort === 'y' && i1.y <= i2.y) return [i1, i2];else return [i2, i1];\n}\n/** Find the intersections between a beam and a circle */\n\nfunction beamIntersectsCircle(c, r, p1, p2, sort = 'x') {\n  let dx = p2.x - p1.x;\n  let dy = p2.y - p1.y;\n  let A = Math.pow(dx, 2) + Math.pow(dy, 2);\n  let B = 2 * (dx * (p1.x - c.x) + dy * (p1.y - c.y));\n  let C = Math.pow(p1.x - c.x, 2) + Math.pow(p1.y - c.y, 2) - Math.pow(r, 2);\n  let det = Math.pow(B, 2) - 4 * A * C;\n  if (A <= 0.0000001 || det < 0) return false; // No real solutions\n  else if (det === 0) {\n      // One solution\n      let t = -1 * B / (2 * A);\n      let i1 = new Point(p1.x + t * dx, p1.y + t * dy);\n      return [i1];\n    } else {\n      // Two solutions\n      let t = (-1 * B + Math.sqrt(det)) / (2 * A);\n      let i1 = new Point(p1.x + t * dx, p1.y + t * dy);\n      t = (-1 * B - Math.sqrt(det)) / (2 * A);\n      let i2 = new Point(p1.x + t * dx, p1.y + t * dy);\n      if (sort === 'x' && i1.x <= i2.x || sort === 'y' && i1.y <= i2.y) return [i1, i2];else return [i2, i1];\n    }\n}\n/** Find the intersections between a line and a circle */\n\nfunction lineIntersectsCircle(c, r, p1, p2, sort = 'x') {\n  let intersections = beamIntersectsCircle(c, r, p1, p2, sort);\n  if (intersections === false) return false;else {\n    if (intersections.length === 1) {\n      if (pointOnLine(p1, p2, intersections[0])) return intersections;else return false;\n    } else {\n      let i1 = intersections[0];\n      let i2 = intersections[1];\n      if (!pointOnLine(p1, p2, i1, 5) && !pointOnLine(p1, p2, i2, 5)) return false;else if (pointOnLine(p1, p2, i1, 5) && pointOnLine(p1, p2, i2, 5)) {\n        if (sort === 'x' && i1.x <= i2.x || sort === 'y' && i1.y <= i2.y) return [i1, i2];else return [i2, i1];\n      } else if (pointOnLine(p1, p2, i1, 5)) return [i1];else if (pointOnLine(p1, p2, i2, 5)) return [i2];\n    }\n  }\n}\nfunction curveEdge(curve, edge, steps = 500) {\n  let x = Infinity;\n  let y = Infinity;\n  let p;\n  if (edge === 'bottom') y = -Infinity;\n  if (edge === 'right') x = -Infinity;\n\n  for (let i = 0; i < steps; i++) {\n    p = curve.get(i / steps);\n\n    if (edge === 'top' && p.y < y || edge === 'bottom' && p.y > y || edge === 'right' && p.x > x || edge === 'left' && p.x < x) {\n      x = p.x;\n      y = p.y;\n    }\n  }\n\n  return new Point(x, y);\n}\n/**\n * Calculates scale factor based on stretch factor\n *\n * The way people measure stretch intuitively is\n * different from the way we handle stretch in code.\n * When people say '25% stretch' they mean that\n * 10cm fabric should get stretched to 12.5cm fabric.\n * In our code, that means we need to scale things by 80%.\n *\n * This method does that calculation.\n */\n\nfunction stretchToScale(stretch) {\n  return 1 / (1 + parseFloat(stretch));\n}\nfunction round(value) {\n  return Math.round(value * 1e2) / 1e2;\n}\nfunction sampleStyle(run, runs, styles = false) {\n  return styles && Array.isArray(styles) && styles.length > 0 ? styles[run % styles.length] : `stroke: hsl(${(run - 1) * (330 / runs)}, 100%, 35%);`;\n}\nfunction deg2rad(degrees) {\n  return degrees * (Math.PI / 180);\n}\nfunction rad2deg(radians) {\n  return radians / Math.PI * 180;\n} // Export bezier-js so plugins can use it\n\nvar utils = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  capitalize: capitalize,\n  isCoord: isCoord,\n  macroName: macroName,\n  beamsIntersect: beamsIntersect,\n  linesIntersect: linesIntersect,\n  pointOnBeam: pointOnBeam,\n  pointOnLine: pointOnLine,\n  pointOnCurve: pointOnCurve,\n  splitCurve: splitCurve,\n  beamIntersectsX: beamIntersectsX,\n  beamIntersectsY: beamIntersectsY,\n  units: units,\n  lineIntersectsCurve: lineIntersectsCurve,\n  curveIntersectsX: curveIntersectsX,\n  curveIntersectsY: curveIntersectsY,\n  curvesIntersect: curvesIntersect,\n  circlesIntersect: circlesIntersect,\n  beamIntersectsCircle: beamIntersectsCircle,\n  lineIntersectsCircle: lineIntersectsCircle,\n  curveEdge: curveEdge,\n  stretchToScale: stretchToScale,\n  round: round,\n  sampleStyle: sampleStyle,\n  deg2rad: deg2rad,\n  rad2deg: rad2deg,\n  Bezier: Bezier\n});\n\nfunction Snippet(def, anchor, debug = false) {\n  this.def = def;\n  this.anchor = anchor;\n  this.attributes = new Attributes();\n  Object.defineProperty(this, 'debug', {\n    value: debug,\n    configurable: true\n  });\n  return this;\n}\n/** Adds the raise method for a snippet not created through the proxy **/\n\n\nSnippet.prototype.withRaise = function (raise = false) {\n  if (raise) Object.defineProperty(this, 'raise', {\n    value: raise\n  });\n  return this;\n};\n/** Adds an attribute. This is here to make this call chainable in assignment */\n\n\nSnippet.prototype.attr = function (name, value, overwrite = false) {\n  if (overwrite) this.attributes.set(name, value);else this.attributes.add(name, value);\n  return this;\n};\n/** Returns a deep copy of this */\n\n\nSnippet.prototype.clone = function () {\n  let clone = new Snippet(this.def, this.anchor.clone(), this.debug).withRaise(this.raise);\n  clone.attributes = this.attributes.clone();\n  return clone;\n};\n\nfunction Hooks() {\n  return {\n    preDraft: [],\n    postDraft: [],\n    preSample: [],\n    postSample: [],\n    preRender: [],\n    postRender: [],\n    insertText: []\n  };\n}\n\nfunction Part() {\n  this.attributes = new Attributes();\n  this.points = {};\n  this.paths = {};\n  this.snippets = {};\n  this.freeId = 0;\n  this.topLeft = false;\n  this.bottomRight = false;\n  this.width = false;\n  this.height = false;\n  this.render = true;\n  this.utils = utils;\n  this.Point = Point;\n  this.Path = Path;\n  this.Snippet = Snippet;\n  this.hooks = new Hooks(); // Hooks container\n\n  return this;\n}\n\nPart.prototype.macroClosure = function (args) {\n  let self = this;\n\n  let method = function (key, args) {\n    let macro = macroName(key);\n    if (typeof self[macro] === 'function') self[macro](args);\n  };\n\n  return method;\n};\n\nPart.prototype.runHooks = function (hookName, data = false) {\n  if (data === false) data = this;\n  let hooks = this.hooks[hookName];\n\n  if (hooks && hooks.length > 0) {\n    for (let hook of hooks) {\n      hook.method(data, hook.data);\n    }\n  }\n};\n/** Returns an unused ID */\n\n\nPart.prototype.getId = function (prefix = '') {\n  this.freeId += 1;\n  return prefix + this.freeId;\n};\n/** Returns a value formatted for units provided in settings */\n\n\nPart.prototype.unitsClosure = function (value) {\n  let self = this;\n\n  let method = function (value) {\n    if (self.context.settings.debug && typeof value !== 'number') self.context.raise.debug(`Calling \\`units(value)\\` but \\`value\\` is not a number (\\`${typeof value}\\`)`);\n    return units(value, self.context.settings.units);\n  };\n\n  return method;\n};\n/** Calculates the part's bounding box and sets it */\n\n\nPart.prototype.boundary = function () {\n  if (this.topLeft) return this; // Cached\n\n  let topLeft = new Point(Infinity, Infinity);\n  let bottomRight = new Point(-Infinity, -Infinity);\n\n  for (let key in this.paths) {\n    try {\n      let path = this.paths[key].boundary();\n\n      if (path.render) {\n        if (path.topLeft.x < topLeft.x) topLeft.x = path.topLeft.x;\n        if (path.topLeft.y < topLeft.y) topLeft.y = path.topLeft.y;\n        if (path.bottomRight.x > bottomRight.x) bottomRight.x = path.bottomRight.x;\n        if (path.bottomRight.y > bottomRight.y) bottomRight.y = path.bottomRight.y;\n      }\n    } catch (err) {\n      this.context.raise.error(`Could not calculate boundary of \\`paths.${key}\\``);\n      this.context.raise.debug(`Since \\`paths.${key}\\` has no boundary, neither does \\`parts.${this.name}\\`. Ejecting part`);\n      return false;\n    }\n  }\n\n  for (let key in this.points) {\n    let point = this.points[key];\n    let radius = point.attributes.get('data-circle');\n\n    if (radius) {\n      radius = parseFloat(radius);\n      if (point.x - radius < topLeft.x) topLeft.x = point.x - radius;\n      if (point.y - radius < topLeft.y) topLeft.y = point.y - radius;\n      if (point.x + radius > bottomRight.x) bottomRight.x = point.x + radius;\n      if (point.y + radius > bottomRight.y) bottomRight.y = point.y + radius;\n    }\n  } // Fix infinity if part has no paths\n\n\n  if (topLeft.x === Infinity) topLeft.x = 0;\n  if (topLeft.y === Infinity) topLeft.y = 0;\n  if (bottomRight.x === -Infinity) bottomRight.x = 0;\n  if (bottomRight.y === -Infinity) bottomRight.y = 0; // Add margin\n\n  let margin = this.context.settings.margin;\n  if (this.context.settings.paperless && margin < 10) margin = 10;\n  this.topLeft = new Point(topLeft.x - margin, topLeft.y - margin);\n  this.bottomRight = new Point(bottomRight.x + margin, bottomRight.y + margin);\n  this.width = this.bottomRight.x - this.topLeft.x;\n  this.height = this.bottomRight.y - this.topLeft.y;\n  return this;\n};\n/** Stacks part so that its top left corner is in (0,0) */\n\n\nPart.prototype.stack = function () {\n  if (this.topLeft !== false) return this;else this.boundary();\n  if (this.topLeft.x == 0 && this.topLeft.y == 0) return this;else this.attr('transform', `translate(${this.topLeft.x * -1}, ${this.topLeft.y * -1})`);\n  return this;\n};\n/** Adds an attribute. This is here to make this call chainable in assignment */\n\n\nPart.prototype.attr = function (name, value, overwrite = false) {\n  if (overwrite) this.attributes.set(name, value);else this.attributes.add(name, value);\n  return this;\n};\n/** Copies point/path/snippet data from part orig into this */\n\n\nPart.prototype.inject = function (orig) {\n  const findBasePoint = p => {\n    for (let i in orig.points) {\n      if (orig.points[i] === p) return i;\n    }\n\n    return false;\n  };\n\n  for (let i in orig.points) this.points[i] = orig.points[i].clone();\n\n  for (let i in orig.paths) {\n    this.paths[i] = orig.paths[i].clone(); // Keep link between points and path ops where possible\n\n    for (let j in orig.paths[i].ops) {\n      let op = orig.paths[i].ops[j];\n\n      if (op.type !== 'close') {\n        let toPoint = findBasePoint(op.to);\n        if (toPoint) this.paths[i].ops[j].to = this.points[toPoint];\n      }\n\n      if (op.type === 'curve') {\n        let cp1Point = findBasePoint(op.cp1);\n        if (cp1Point) this.paths[i].ops[j].cp1 = this.points[cp1Point];\n        let cp2Point = findBasePoint(op.cp2);\n        if (cp2Point) this.paths[i].ops[j].cp2 = this.points[cp2Point];\n      }\n    }\n  }\n\n  for (let i in orig.snippets) {\n    this.snippets[i] = orig.snippets[i].clone();\n  }\n\n  return this;\n};\n\nPart.prototype.units = function (input) {\n  return units(input, this.context.settings.units);\n};\n/** Returns an object with shorthand access for pattern design */\n\n\nPart.prototype.shorthand = function () {\n  let complete = this.context.settings.complete ? true : false;\n  let paperless = this.context.settings.paperless === true ? true : false;\n  let sa = this.context.settings.complete ? this.context.settings.sa || 0 : 0;\n  const shorthand = {\n    sa,\n    store: this.context.store,\n    macro: this.macroClosure(),\n    units: this.unitsClosure(),\n    utils: utils,\n    complete,\n    paperless,\n    events: this.context.events,\n    raise: this.context.raise\n  };\n\n  if (this.context.settings.debug) {\n    // We'll need this\n    let self = this; // Wrap the Point constructor so objects can raise events\n\n    shorthand.Point = function (x, y) {\n      Point.apply(this, [x, y, true]);\n      Object.defineProperty(this, 'raise', {\n        value: self.context.raise\n      });\n    };\n\n    shorthand.Point.prototype = Object.create(Point.prototype); // Wrap the Path constructor so objects can raise events\n\n    shorthand.Path = function () {\n      Path.apply(this, [true]);\n      Object.defineProperty(this, 'raise', {\n        value: self.context.raise\n      });\n    };\n\n    shorthand.Path.prototype = Object.create(Path.prototype); // Wrap the Snippet constructor so objects can raise events\n\n    shorthand.Snippet = function (def, anchor) {\n      Snippet.apply(this, [def, anchor, true]);\n      Snippet.apply(this, arguments);\n      Object.defineProperty(this, 'raise', {\n        value: self.context.raise\n      });\n    };\n\n    shorthand.Snippet.prototype = Object.create(Snippet.prototype); // Proxy the points object\n\n    const pointsProxy = {\n      get: function () {\n        return Reflect.get(...arguments);\n      },\n      set: (points, name, value) => {\n        // Constructor checks\n        if (value instanceof Point !== true) self.context.raise.warning(`\\`points.${name}\\` was set with a value that is not a \\`Point\\` object`);\n        if (value.x == null || !isCoord(value.x)) self.context.raise.warning(`\\`points.${name}\\` was set with a \\`x\\` parameter that is not a \\`number\\``);\n        if (value.y == null || !isCoord(value.y)) self.context.raise.warning(`\\`points.${name}\\` was set with a \\`y\\` parameter that is not a \\`number\\``);\n\n        try {\n          value.name = name;\n        } catch (err) {\n          self.context.raise.warning(`Could not set \\`name\\` property on \\`points.${name}\\``);\n        }\n\n        return self.points[name] = value;\n      }\n    };\n    shorthand.points = new Proxy(this.points || {}, pointsProxy); // Proxy the paths object\n\n    const pathsProxy = {\n      get: function () {\n        return Reflect.get(...arguments);\n      },\n      set: (paths, name, value) => {\n        // Constructor checks\n        if (value instanceof Path !== true) self.context.raise.warning(`\\`paths.${name}\\` was set with a value that is not a \\`Path\\` object`);\n\n        try {\n          value.name = name;\n        } catch (err) {\n          self.context.raise.warning(`Could not set \\`name\\` property on \\`paths.${name}\\``);\n        }\n\n        return self.paths[name] = value;\n      }\n    };\n    shorthand.paths = new Proxy(this.paths || {}, pathsProxy); // Proxy the snippets object\n\n    const snippetsProxy = {\n      get: function (target, prop, receiver) {\n        return Reflect.get(...arguments);\n      },\n      set: (snippets, name, value) => {\n        // Constructor checks\n        if (value instanceof Snippet !== true) self.context.raise.warning(`\\`snippets.${name}\\` was set with a value that is not a \\`Snippet\\` object`);\n        if (typeof value.def !== 'string') self.context.raise.warning(`\\`snippets.${name}\\` was set with a \\`def\\` parameter that is not a \\`string\\``);\n        if (value.anchor instanceof Point !== true) self.context.raise.warning(`\\`snippets.${name}\\` was set with an \\`anchor\\` parameter that is not a \\`Point\\``);\n\n        try {\n          value.name = name;\n        } catch (err) {\n          self.context.raise.warning(`Could not set \\`name\\` property on \\`snippets.${name}\\``);\n        }\n\n        return self.snippets[name] = value;\n      }\n    };\n    shorthand.snippets = new Proxy(this.snippets || {}, snippetsProxy); // Proxy the measurements object\n\n    const measurementsProxy = {\n      get: function (measurements, name) {\n        if (typeof measurements[name] === 'undefined') self.context.raise.warning(`Tried to access \\`measurements.${name}\\` but it is \\`undefined\\``);\n        return Reflect.get(...arguments);\n      },\n      set: (measurements, name, value) => self.context.settings.measurements[name] = value\n    };\n    shorthand.measurements = new Proxy(this.context.settings.measurements || {}, measurementsProxy); // Proxy the options object\n\n    const optionsProxy = {\n      get: function (options, name) {\n        if (typeof options[name] === 'undefined') self.context.raise.warning(`Tried to access \\`options.${name}\\` but it is \\`undefined\\``);\n        return Reflect.get(...arguments);\n      },\n      set: (options, name, value) => self.context.settings.options[name] = value\n    };\n    shorthand.options = new Proxy(this.context.settings.options || {}, optionsProxy);\n  } else {\n    shorthand.Point = Point;\n    shorthand.Path = Path;\n    shorthand.Snippet = Snippet;\n    shorthand.points = this.points || {};\n    shorthand.paths = this.paths || {};\n    shorthand.snippets = this.snippets || {};\n    shorthand.measurements = this.context.settings.measurements || {};\n    shorthand.options = this.context.settings.options || {};\n  }\n\n  return shorthand;\n};\n\nvar version = \"2.17.0\";\n\nfunction Svg(pattern) {\n  this.openGroups = [];\n  this.layout = {};\n  this.freeId = 0;\n  this.body = '';\n  this.style = '';\n  this.script = '';\n  this.defs = '';\n  this.pattern = pattern; // Needed to expose pattern to hooks\n\n  this.prefix = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>';\n  this.attributes = new Attributes();\n  this.attributes.add('xmlns', 'http://www.w3.org/2000/svg');\n  this.attributes.add('xmlns:svg', 'http://www.w3.org/2000/svg');\n  this.attributes.add('xmlns:xlink', 'http://www.w3.org/1999/xlink');\n  this.attributes.add('xml:lang', pattern.settings.locale);\n  this.attributes.add('xmlns:freesewing', 'http://freesewing.org/namespaces/freesewing');\n  this.attributes.add('freesewing', version);\n}\n\nSvg.prototype.runHooks = function (hookName, data = false) {\n  if (data === false) data = this;\n  let hooks = this.hooks[hookName];\n\n  if (hooks.length > 0) {\n    for (let hook of hooks) {\n      hook.method(data, hook.data);\n    }\n  }\n};\n/** Runs insertText hooks */\n\n\nSvg.prototype.insertText = function (text) {\n  if (this.hooks.insertText.length > 0) {\n    for (let hook of this.hooks.insertText) text = hook.method(this.pattern.settings.locale, text, hook.data);\n  }\n\n  return text;\n};\n/** Renders a draft object as SVG */\n\n\nSvg.prototype.render = function (pattern) {\n  this.idPrefix = pattern.settings.idPrefix;\n  this.runHooks('preRender');\n\n  if (!pattern.settings.embed) {\n    this.attributes.add('width', round(pattern.width) + 'mm');\n    this.attributes.add('height', round(pattern.height) + 'mm');\n  }\n\n  this.attributes.add('viewBox', `0 0 ${pattern.width} ${pattern.height}`);\n  this.head = this.renderHead();\n  this.tail = this.renderTail();\n  this.svg = '';\n  this.layout = {}; // Reset layout\n\n  for (let partId in pattern.parts) {\n    let part = pattern.parts[partId];\n\n    if (part.render) {\n      let partSvg = this.renderPart(part);\n      this.layout[partId] = {\n        svg: partSvg,\n        transform: part.attributes.getAsArray('transform')\n      };\n      this.svg += this.openGroup(`${this.idPrefix}part-${partId}`, part.attributes);\n      this.svg += partSvg;\n      this.svg += this.closeGroup();\n    }\n  }\n\n  this.svg = this.prefix + this.renderSvgTag() + this.head + this.svg + this.tail;\n  this.runHooks('postRender');\n  return this.svg;\n};\n/** Renders SVG head section */\n\n\nSvg.prototype.renderHead = function () {\n  let svg = this.renderStyle();\n  svg += this.renderScript();\n  svg += this.renderDefs();\n  svg += this.openGroup(this.idPrefix + 'container');\n  return svg;\n};\n/** Renders SVG closing section */\n\n\nSvg.prototype.renderTail = function () {\n  let svg = '';\n  svg += this.closeGroup();\n  svg += this.nl() + '</svg>';\n  return svg;\n};\n/** Returns SVG code for the opening SVG tag */\n\n\nSvg.prototype.renderSvgTag = function () {\n  let svg = '<svg';\n  this.indent();\n  svg += this.nl() + this.attributes.render();\n  this.outdent();\n  svg += this.nl() + '>' + this.nl();\n  return svg;\n};\n/** Returns SVG code for the style block */\n\n\nSvg.prototype.renderStyle = function () {\n  let svg = '<style type=\"text/css\"> <![CDATA[ ';\n  this.indent();\n  svg += this.nl() + this.style;\n  this.outdent();\n  svg += this.nl() + ']]>' + this.nl() + '</style>' + this.nl();\n  return svg;\n};\n/** Returns SVG code for the script block */\n\n\nSvg.prototype.renderScript = function () {\n  let svg = '<script type=\"text/javascript\"> <![CDATA[';\n  this.indent();\n  svg += this.nl() + this.script;\n  this.outdent();\n  svg += this.nl() + ']]>' + this.nl() + '</script>' + this.nl();\n  return svg;\n};\n/** Returns SVG code for the defs block */\n\n\nSvg.prototype.renderDefs = function () {\n  let svg = '<defs>';\n  this.indent();\n  svg += this.nl() + this.defs;\n  this.outdent();\n  svg += this.nl() + '</defs>' + this.nl();\n  return svg;\n};\n/** Returns SVG code for a Part object */\n\n\nSvg.prototype.renderPart = function (part) {\n  let svg = '';\n\n  for (let key in part.paths) {\n    let path = part.paths[key];\n    if (path.render) svg += this.renderPath(path);\n  }\n\n  for (let key in part.points) {\n    if (part.points[key].attributes.get('data-text')) {\n      svg += this.renderText(part.points[key]);\n    }\n\n    if (part.points[key].attributes.get('data-circle')) {\n      svg += this.renderCircle(part.points[key]);\n    }\n  }\n\n  for (let key in part.snippets) {\n    let snippet = part.snippets[key];\n    svg += this.renderSnippet(snippet, part);\n  }\n\n  return svg;\n};\n/** Returns SVG code for a Path object */\n\n\nSvg.prototype.renderPath = function (path) {\n  if (!path.attributes.get('id')) path.attributes.add('id', this.idPrefix + this.getId());\n  path.attributes.set('d', path.asPathstring());\n  return `${this.nl()}<path ${path.attributes.render()} />${this.renderPathText(path)}`;\n};\n\nSvg.prototype.renderPathText = function (path) {\n  let text = path.attributes.get('data-text');\n  if (!text) return '';else this.text = this.insertText(text);\n  let attributes = path.attributes.renderIfPrefixIs('data-text-'); // Sadly aligning text along a patch can't be done in CSS only\n\n  let offset = '';\n  let align = path.attributes.get('data-text-class');\n  if (align && align.indexOf('center') > -1) offset = ' startOffset=\"50%\" ';else if (align && align.indexOf('right') > -1) offset = ' startOffset=\"100%\" ';\n  let svg = this.nl() + '<text>';\n  this.indent();\n  svg += `<textPath xlink:href=\"#${path.attributes.get('id')}\" ${offset}><tspan ${attributes}>${this.escapeText(this.text)}</tspan></textPath>`;\n  this.outdent();\n  svg += this.nl() + '</text>';\n  return svg;\n};\n\nSvg.prototype.renderText = function (point) {\n  let text = point.attributes.getAsArray('data-text');\n\n  if (text !== false) {\n    let joint = '';\n\n    for (let string of text) {\n      this.text = this.insertText(string);\n      joint += this.text + ' ';\n    }\n\n    this.text = this.insertText(joint);\n  }\n\n  point.attributes.set('data-text-x', round(point.x));\n  point.attributes.set('data-text-y', round(point.y));\n  let lineHeight = point.attributes.get('data-text-lineheight') || 12;\n  point.attributes.remove('data-text-lineheight');\n  let svg = `${this.nl()}<text ${point.attributes.renderIfPrefixIs('data-text-')}>`;\n  this.indent(); // Multi-line text?\n\n  if (this.text.indexOf('\\n') !== -1) {\n    let lines = this.text.split('\\n');\n    svg += `<tspan>${lines.shift()}</tspan>`;\n\n    for (let line of lines) {\n      svg += `<tspan x=\"${round(point.x)}\" dy=\"${lineHeight}\">${line}</tspan>`;\n    }\n  } else {\n    svg += `<tspan>${this.escapeText(this.text)}</tspan>`;\n  }\n\n  this.outdent();\n  svg += this.nl() + '</text>';\n  return svg;\n};\n\nSvg.prototype.escapeText = function (text) {\n  return text.replace('\"', '&#8220;');\n};\n\nSvg.prototype.renderCircle = function (point) {\n  return `<circle cx=\"${round(point.x)}\" cy=\"${round(point.y)}\" r=\"${point.attributes.get('data-circle')}\" ${point.attributes.renderIfPrefixIs('data-circle-')}></circle>`;\n};\n/** Returns SVG code for a snippet */\n\n\nSvg.prototype.renderSnippet = function (snippet, part) {\n  let x = round(snippet.anchor.x);\n  let y = round(snippet.anchor.y);\n  let scale = snippet.attributes.get('data-scale');\n\n  if (scale) {\n    snippet.attributes.add('transform', `translate(${x}, ${y})`);\n    snippet.attributes.add('transform', `scale(${scale})`);\n    snippet.attributes.add('transform', `translate(${x * -1}, ${y * -1})`);\n  }\n\n  let rotate = snippet.attributes.get('data-rotate');\n\n  if (rotate) {\n    snippet.attributes.add('transform', `rotate(${rotate}, ${x}, ${y})`);\n  }\n\n  let svg = this.nl();\n  svg += `<use x=\"${x}\" y=\"${y}\" `;\n  svg += `xlink:href=\"#${snippet.def}\" ${snippet.attributes.render()}>`;\n  svg += '</use>';\n  return svg;\n};\n/** Returns SVG code to open a group */\n\n\nSvg.prototype.openGroup = function (id, attributes = false) {\n  let svg = this.nl() + this.nl();\n  svg += `<!-- Start of group #${id} -->`;\n  svg += this.nl();\n  svg += `<g id=\"${id}\"`;\n  if (attributes) svg += ` ${attributes.render()}`;\n  svg += '>';\n  this.indent();\n  this.openGroups.push(id);\n  return svg;\n};\n/** Returns SVG code to close a group */\n\n\nSvg.prototype.closeGroup = function () {\n  this.outdent();\n  return `${this.nl()}</g>${this.nl()}<!-- end of group #${this.openGroups.pop()} -->`;\n};\n/** Returns a linebreak + identation */\n\n\nSvg.prototype.nl = function () {\n  return '\\n' + this.tab();\n};\n/** Returns indentation */\n\n\nSvg.prototype.tab = function () {\n  let space = '';\n\n  for (let i = 0; i < this.tabs; i++) {\n    space += '  ';\n  }\n\n  return space;\n};\n/** Increases indentation by 1 */\n\n\nSvg.prototype.indent = function () {\n  this.tabs += 1;\n};\n/** Decreases indentation by 1 */\n\n\nSvg.prototype.outdent = function () {\n  this.tabs -= 1;\n};\n/** Returns an unused ID */\n\n\nSvg.prototype.getId = function () {\n  this.freeId += 1;\n  return '' + this.freeId;\n};\n\n/******************************************************************************\n\nThis is a binary tree based bin packing algorithm that is more complex than\nthe simple Packer (packer.js). Instead of starting off with a fixed width and\nheight, it starts with the width and height of the first block passed and then\ngrows as necessary to accomodate each subsequent block. As it grows it attempts\nto maintain a roughly square ratio by making 'smart' choices about whether to\ngrow right or down.\n\nWhen growing, the algorithm can only grow to the right OR down. Therefore, if\nthe new block is BOTH wider and taller than the current target then it will be\nrejected. This makes it very important to initialize with a sensible starting\nwidth and height. If you are providing sorted input (largest first) then this\nwill not be an issue.\n\nA potential way to solve this limitation would be to allow growth in BOTH\ndirections at once, but this requires maintaining a more complex tree\nwith 3 children (down, right and center) and that complexity can be avoided\nby simply chosing a sensible starting block.\n\nBest results occur when the input blocks are sorted by height, or even better\nwhen sorted by max(width,height).\n\nInputs:\n------\n\n\tblocks: array of any objects that have .w and .h attributes\n\nOutputs:\n-------\n\n\tmarks each block that fits with a .fit attribute pointing to a\n\tnode with .x and .y coordinates\n\nExample:\n-------\n\n\tvar blocks = [\n\t\t{ w: 100, h: 100 },\n\t\t{ w: 100, h: 100 },\n\t\t{ w:  80, h:  80 },\n\t\t{ w:  80, h:  80 },\n\t\tetc\n\t\tetc\n\t];\n\n\tvar packer = new GrowingPacker();\n\tpacker.fit(blocks);\n\n\tfor(var n = 0 ; n < blocks.length ; n++) {\n\t\tvar block = blocks[n];\n\t\tif (block.fit) {\n\t\t\tDraw(block.fit.x, block.fit.y, block.w, block.h);\n\t\t}\n\t}\n\n\n******************************************************************************/\n\nvar GrowingPacker$1 = function () {};\n\nGrowingPacker$1.prototype = {\n  fit: function (blocks) {\n    var n,\n        node,\n        block,\n        len = blocks.length,\n        fit;\n    var width = len > 0 ? blocks[0].width : 0;\n    var height = len > 0 ? blocks[0].height : 0;\n    this.root = {\n      x: 0,\n      y: 0,\n      width: width,\n      height: height\n    };\n\n    for (n = 0; n < len; n++) {\n      block = blocks[n];\n\n      if (node = this.findNode(this.root, block.width, block.height)) {\n        fit = this.splitNode(node, block.width, block.height);\n        block.x = fit.x;\n        block.y = fit.y;\n      } else {\n        fit = this.growNode(block.width, block.height);\n        block.x = fit.x;\n        block.y = fit.y;\n      }\n    }\n  },\n  findNode: function (root, width, height) {\n    if (root.used) return this.findNode(root.right, width, height) || this.findNode(root.down, width, height);else if (width <= root.width && height <= root.height) return root;else return null;\n  },\n  splitNode: function (node, width, height) {\n    node.used = true;\n    node.down = {\n      x: node.x,\n      y: node.y + height,\n      width: node.width,\n      height: node.height - height\n    };\n    node.right = {\n      x: node.x + width,\n      y: node.y,\n      width: node.width - width,\n      height: height\n    };\n    return node;\n  },\n  growNode: function (width, height) {\n    var canGrowDown = width <= this.root.width;\n    var canGrowRight = height <= this.root.height;\n    var shouldGrowRight = canGrowRight && this.root.height >= this.root.width + width; // attempt to keep square-ish by growing right when height is much greater than width\n\n    var shouldGrowDown = canGrowDown && this.root.width >= this.root.height + height; // attempt to keep square-ish by growing down  when width  is much greater than height\n\n    if (shouldGrowRight) return this.growRight(width, height);else if (shouldGrowDown) return this.growDown(width, height);else if (canGrowRight) return this.growRight(width, height);else if (canGrowDown) return this.growDown(width, height);else return null; // need to ensure sensible root starting size to avoid this happening\n  },\n  growRight: function (width, height) {\n    this.root = {\n      used: true,\n      x: 0,\n      y: 0,\n      width: this.root.width + width,\n      height: this.root.height,\n      down: this.root,\n      right: {\n        x: this.root.width,\n        y: 0,\n        width: width,\n        height: this.root.height\n      }\n    };\n    var node;\n    if (node = this.findNode(this.root, width, height)) return this.splitNode(node, width, height);else return null;\n  },\n  growDown: function (width, height) {\n    this.root = {\n      used: true,\n      x: 0,\n      y: 0,\n      width: this.root.width,\n      height: this.root.height + height,\n      down: {\n        x: 0,\n        y: this.root.height,\n        width: this.root.width,\n        height: height\n      },\n      right: this.root\n    };\n    var node;\n    if (node = this.findNode(this.root, width, height)) return this.splitNode(node, width, height);else return null;\n  }\n};\nvar packer_growing = GrowingPacker$1;\n\nvar GrowingPacker = packer_growing;\n\nvar binPack = function (items, options) {\n  options = options || {};\n  var packer = new GrowingPacker();\n  var inPlace = options.inPlace || false; // Clone the items.\n\n  var newItems = items.map(function (item) {\n    return inPlace ? item : {\n      width: item.width,\n      height: item.height,\n      item: item\n    };\n  });\n  newItems = newItems.sort(function (a, b) {\n    // TODO: check that each actually HAS a width and a height.\n    // Sort based on the size (area) of each block.\n    return b.width * b.height - a.width * a.height;\n  });\n  packer.fit(newItems);\n  var w = newItems.reduce(function (curr, item) {\n    return Math.max(curr, item.x + item.width);\n  }, 0);\n  var h = newItems.reduce(function (curr, item) {\n    return Math.max(curr, item.y + item.height);\n  }, 0);\n  var ret = {\n    width: w,\n    height: h\n  };\n\n  if (!inPlace) {\n    ret.items = newItems;\n  }\n\n  return ret;\n};\n\nfunction Store(raise) {\n  this.data = new Map();\n  this.raise = raise;\n}\n/** Sets a value under index key */\n\n\nStore.prototype.set = function (key, value) {\n  this.data.set(key, value);\n};\n/** Sets a value under index key */\n\n\nStore.prototype.setIfUnset = function (key, value) {\n  if (!this.data.has(key)) this.data.set(key, value);\n};\n/** Gets a value under index key */\n\n\nStore.prototype.get = function (key) {\n  if (!this.data.has(key)) this.raise.warning(`Tried to access \\`${key}\\` in the \\`store\\` but it is not set`);\n  return this.data.get(key);\n};\n\nfunction Pattern(config = {\n  options: {}\n}) {\n  // Events store and raise methods\n  this.events = {\n    info: [],\n    warning: [],\n    error: [],\n    debug: []\n  };\n  const events = this.events;\n  this.raise = {\n    info: function (data) {\n      events.info.push(data);\n    },\n    warning: function (data) {\n      events.warning.push(data);\n    },\n    error: function (data) {\n      events.error.push(data);\n    },\n    debug: function (data) {\n      events.debug.push(data);\n    }\n  };\n  this.raise.debug(`New \\`@freesewing/${config.name}:${config.version}\\` pattern using \\`@freesewing/core:${version}\\``);\n  this.config = config; // Pattern configuration\n\n  this.width = 0; // Will be set after render\n\n  this.height = 0; // Will be set after render\n\n  this.is = ''; // Will be set when drafting/sampling\n\n  this.debug = true; // Will be set when applying settings\n\n  this.store = new Store(this.raise); // Store for sharing data across parts\n\n  this.parts = {}; // Parts container\n\n  this.hooks = new Hooks(); // Hooks container\n\n  this.Point = Point; // Point constructor\n\n  this.Path = Path; // Path constructor\n\n  this.Snippet = Snippet; // Snippet constructor\n\n  this.Attributes = Attributes; // Attributes constructor\n  // Default settings\n\n  this.settings = {\n    complete: true,\n    idPrefix: 'fs-',\n    locale: 'en',\n    units: 'metric',\n    margin: 2,\n    layout: true,\n    debug: true,\n    options: {}\n  };\n  if (typeof this.config.dependencies === 'undefined') this.config.dependencies = {};\n  if (typeof this.config.inject === 'undefined') this.config.inject = {};\n  if (typeof this.config.hide === 'undefined') this.config.hide = [];\n  this.config.resolvedDependencies = this.resolveDependencies(this.config.dependencies);\n  this.config.draftOrder = this.draftOrder(this.config.resolvedDependencies); // Convert options\n\n  for (let i in config.options) {\n    let option = config.options[i];\n\n    if (typeof option === 'object') {\n      if (typeof option.pct !== 'undefined') this.settings.options[i] = option.pct / 100;else if (typeof option.mm !== 'undefined') this.settings.options[i] = option.mm;else if (typeof option.deg !== 'undefined') this.settings.options[i] = option.deg;else if (typeof option.count !== 'undefined') this.settings.options[i] = option.count;else if (typeof option.bool !== 'undefined') this.settings.options[i] = option.bool;else if (typeof option.dflt !== 'undefined') this.settings.options[i] = option.dflt;else {\n        let err = 'Unknown option type: ' + JSON.stringify(option);\n        this.raise.error(err);\n        throw new Error(err);\n      }\n    } else {\n      this.settings.options[i] = option;\n    }\n  } // Macros\n\n\n  this.macros = {}; // Context object to add to Part closure\n\n  const context = {\n    parts: this.parts,\n    config: this.config,\n    settings: this.settings,\n    store: this.store,\n    macros: this.macros,\n    events: this.events,\n    raise: this.raise\n  }; // Part closure\n\n  this.Part = function (name = false) {\n    let part = new Part();\n    part.context = context;\n\n    for (let macro in context.macros) {\n      part[macroName(macro)] = context.macros[macro];\n    }\n\n    if (name) part.name = name;\n    return part;\n  };\n} // Merges settings object with this.settings\n\nPattern.prototype.apply = function (settings) {\n  if (typeof settings !== 'object') {\n    this.raise.warning('Pattern initialized without any settings');\n    return this;\n  }\n\n  for (let key of Object.keys(settings)) {\n    if (Array.isArray(settings[key])) {\n      if (Array.isArray(this.settings[key])) {\n        for (let entry of settings[key]) this.settings[key].push(entry);\n      } else this.settings[key] = settings[key];\n    } else if (typeof settings[key] === 'object') {\n      this.settings[key] = { ...this.settings[key],\n        ...settings[key]\n      };\n    } else this.settings[key] = settings[key];\n  }\n\n  if (!this.settings.debug) this.debug = false;\n  return this;\n};\n\nPattern.prototype.runHooks = function (hookName, data = false) {\n  if (data === false) data = this;\n  let hooks = this.hooks[hookName];\n\n  if (hooks.length > 0) {\n    if (this.debug) this.raise.debug(`Running \\`${hookName}\\` hooks`);\n\n    for (let hook of hooks) {\n      hook.method(data, hook.data);\n    }\n  }\n};\n/**\n *  The default draft method with pre- and postDraft hooks\n */\n\n\nPattern.prototype.draft = function () {\n  if (this.is !== 'sample') {\n    this.is = 'draft';\n    if (this.debug) this.raise.debug(`Drafting pattern`);\n  }\n\n  this.runHooks('preDraft');\n\n  for (let partName of this.config.draftOrder) {\n    if (this.debug) this.raise.debug(`Creating part \\`${partName}\\``);\n    this.parts[partName] = new this.Part(partName);\n\n    if (typeof this.config.inject[partName] === 'string') {\n      if (this.debug) this.raise.debug(`Injecting part \\`${this.config.inject[partName]}\\` into part \\`${partName}\\``);\n\n      try {\n        this.parts[partName].inject(this.parts[this.config.inject[partName]]);\n      } catch (err) {\n        this.raise.error([`Could not inject part \\`${this.config.inject[partName]}\\` into part \\`${partName}\\``, err]);\n      }\n    }\n\n    if (this.needs(partName)) {\n      let method = 'draft' + capitalize(partName);\n\n      if (typeof this[method] !== 'function') {\n        this.raise.error(`Method \\`pattern.${method}\\` is callable`);\n        throw new Error('Method \"' + method + '\" on pattern object is not callable');\n      }\n\n      try {\n        this.parts[partName] = this[method](this.parts[partName]);\n      } catch (err) {\n        this.raise.error([`Unable to draft part \\`${partName}\\``, err]);\n      }\n\n      if (typeof this.parts[partName] === 'undefined') {\n        this.raise.error(`Result of \\`pattern.${method}\\` was \\`undefined\\`. Did you forget to return the \\`Part\\` object?`);\n      }\n\n      try {\n        this.parts[partName].render = this.parts[partName].render === false ? false : this.wants(partName);\n      } catch (err) {\n        this.raise.error([`Unable to set \\`render\\` property on part \\`${partName}\\``, err]);\n      }\n    } else {\n      if (this.debug) this.raise.debug(`Part \\`${partName}\\` is not needed. Skipping draft and setting render to \\`false\\``);\n      this.parts[partName].render = false;\n    }\n  }\n\n  this.runHooks('postDraft');\n  return this;\n};\n/**\n * Handles pattern sampling\n */\n\n\nPattern.prototype.sample = function () {\n  if (this.settings.sample.type === 'option') {\n    return this.sampleOption(this.settings.sample.option);\n  } else if (this.settings.sample.type === 'measurement') {\n    return this.sampleMeasurement(this.settings.sample.measurement);\n  } else if (this.settings.sample.type === 'models') {\n    return this.sampleModels(this.settings.sample.models, this.settings.sample.focus || false);\n  }\n};\n\nPattern.prototype.sampleParts = function () {\n  let parts = {};\n  this.settings.complete = false;\n  this.settings.paperless = false;\n  this.draft();\n\n  for (let i in this.parts) {\n    parts[i] = new this.Part();\n    parts[i].render = this.parts[i].render;\n  }\n\n  return parts;\n};\n\nPattern.prototype.sampleRun = function (parts, anchors, run, runs, extraClass = false) {\n  this.draft();\n\n  for (let i in this.parts) {\n    let dx = 0;\n    let dy = 0;\n\n    if (this.parts[i].points.anchor) {\n      if (typeof anchors[i] === 'undefined') anchors[i] = this.parts[i].points.anchor;else {\n        if (!anchors[i].sitsOn(this.parts[i].points.anchor)) {\n          dx = this.parts[i].points.anchor.dx(anchors[i]);\n          dy = this.parts[i].points.anchor.dy(anchors[i]);\n        }\n      }\n    }\n\n    for (let j in this.parts[i].paths) {\n      parts[i].paths[j + '_' + run] = this.parts[i].paths[j].clone().attr('style', extraClass === 'sample-focus' ? this.settings.sample ? this.settings.sample.focusStyle || sampleStyle(run, runs) : sampleStyle(run, runs) : sampleStyle(run, runs, this.settings.sample ? this.settings.sample.styles || false : false)).attr('data-sample-run', run).attr('data-sample-runs', runs);\n      if (this.parts[i].points.anchor) parts[i].paths[j + '_' + run] = parts[i].paths[j + '_' + run].translate(dx, dy);\n      if (extraClass !== false) parts[i].paths[j + '_' + run].attributes.add('class', extraClass);\n    }\n  }\n};\n/**\n * Handles option sampling\n */\n\n\nPattern.prototype.sampleOption = function (optionName) {\n  this.is = 'sample';\n  if (this.debug) this.raise.debug(`Sampling option \\`${optionName}\\``);\n  this.runHooks('preSample');\n  let step, val;\n  let factor = 1;\n  let anchors = {};\n  let parts = this.sampleParts();\n  let option = this.config.options[optionName];\n\n  if (typeof option.list === 'object') {\n    return this.sampleListOption(optionName);\n  }\n\n  if (typeof option.min === 'undefined' || typeof option.max === 'undefined') {\n    let min = option * 0.9;\n    let max = option * 1.1;\n    option = {\n      min,\n      max\n    };\n  }\n\n  if (typeof option.pct !== 'undefined') factor = 100;\n  val = option.min / factor;\n  step = (option.max / factor - val) / 9;\n\n  for (let run = 1; run < 11; run++) {\n    this.settings.options[optionName] = val;\n    this.sampleRun(parts, anchors, run, 10);\n    val += step;\n  }\n\n  this.parts = parts;\n  this.runHooks('postSample');\n  return this;\n};\n\nPattern.prototype.sampleListOption = function (optionName) {\n  let parts = this.sampleParts();\n  let option = this.config.options[optionName];\n  let anchors = {};\n  let run = 1;\n  let runs = option.list.length;\n\n  for (let val of option.list) {\n    this.settings.options[optionName] = val;\n    this.sampleRun(parts, anchors, run, runs);\n    run++;\n  }\n\n  this.parts = parts;\n  return this;\n};\n/**\n * Handles measurement sampling\n */\n\n\nPattern.prototype.sampleMeasurement = function (measurementName) {\n  this.is = 'sample';\n  if (this.debug) this.raise.debug(`Sampling measurement \\`${measurementName}\\``);\n  this.runHooks('preSample');\n  let anchors = {};\n  let parts = this.sampleParts();\n  let val = this.settings.measurements[measurementName];\n  if (val === undefined) this.raise.error(`Cannot sample measurement \\`${measurementName}\\` because it's \\`undefined\\``);\n  let step = val / 50;\n  val = val * 0.9;\n\n  for (let run = 1; run < 11; run++) {\n    this.settings.measurements[measurementName] = val;\n    this.sampleRun(parts, anchors, run, 10);\n    val += step;\n  }\n\n  this.parts = parts;\n  this.runHooks('postSample');\n  return this;\n};\n/**\n * Handles models sampling\n */\n\n\nPattern.prototype.sampleModels = function (models, focus = false) {\n  this.is = 'sample';\n  if (this.debug) this.raise.debug(`Sampling models`);\n  this.runHooks('preSample');\n  let anchors = {};\n  let parts = this.sampleParts(); // If there's a focus, do it first so it's at the bottom of the SVG\n\n  if (focus) {\n    this.settings.measurements = models[focus];\n    this.sampleRun(parts, anchors, -1, -1, 'sample-focus');\n    delete models[focus];\n  }\n\n  let run = -1;\n  let runs = Object.keys(models).length;\n\n  for (let l in models) {\n    run++;\n    this.settings.measurements = models[l];\n    this.sampleRun(parts, anchors, run, runs);\n  }\n\n  this.parts = parts;\n  this.runHooks('postSample');\n  return this;\n};\n\nPattern.prototype.render = function () {\n  this.svg = new Svg(this);\n  this.svg.hooks = this.hooks;\n  return this.pack().svg.render(this);\n};\n\nPattern.prototype.on = function (hook, method, data) {\n  this.hooks[hook].push({\n    method,\n    data\n  });\n};\n\nPattern.prototype.use = function (plugin, data) {\n  if (this.debug) this.raise.debug(`Loaded plugin \\`${plugin.name}:${plugin.version}\\``);\n  if (plugin.hooks) this.loadPluginHooks(plugin, data);\n  if (plugin.macros) this.loadPluginMacros(plugin);\n  return this;\n};\n\nPattern.prototype.useIf = function (plugin, settings) {\n  if (plugin.condition(settings)) {\n    if (this.debug) this.raise.debug(`Condition met: Loaded plugin \\`${plugin.plugin.name}:${plugin.plugin.version}\\``);\n    this.loadPluginHooks(plugin.plugin, plugin.data);\n  } else {\n    if (this.debug) this.raise.debug(`Condition not met: Skipped loading plugin \\`${plugin.plugin.name}:${plugin.plugin.version}\\``);\n  }\n\n  return this;\n};\n\nPattern.prototype.loadPluginHooks = function (plugin, data) {\n  for (let hook of Object.keys(this.hooks)) {\n    if (typeof plugin.hooks[hook] === 'function') {\n      this.on(hook, plugin.hooks[hook], data);\n    } else if (Array.isArray(plugin.hooks[hook])) {\n      for (let method of plugin.hooks[hook]) {\n        this.on(hook, method, data);\n      }\n    }\n  }\n};\n\nPattern.prototype.loadPluginMacros = function (plugin) {\n  for (let macro in plugin.macros) {\n    if (typeof plugin.macros[macro] === 'function') {\n      this.macro(macro, plugin.macros[macro]);\n    }\n  }\n};\n\nPattern.prototype.macro = function (key, method) {\n  this.macros[key] = method;\n};\n/** Packs parts in a 2D space and sets pattern size */\n\n\nPattern.prototype.pack = function () {\n  if (this.events.error.length > 0) {\n    this.raise.warning(`One or more errors occured. Not packing pattern parts`);\n    return this;\n  }\n\n  let bins = [];\n\n  for (let key in this.parts) {\n    let part = this.parts[key]; // Avoid multiple render calls to cause stacking of transforms\n\n    part.attributes.remove('transform');\n\n    if (part.render) {\n      part.stack();\n      let width = part.bottomRight.x - part.topLeft.x;\n      let height = part.bottomRight.y - part.topLeft.y;\n      if (this.settings.layout === true) bins.push({\n        id: key,\n        width,\n        height\n      });else {\n        if (this.width < width) this.width = width;\n        if (this.height < height) this.height = height;\n      }\n    }\n  }\n\n  if (this.settings.layout === true) {\n    let size = binPack(bins, {\n      inPlace: true\n    });\n\n    for (let bin of bins) {\n      let part = this.parts[bin.id];\n      if (bin.x !== 0 || bin.y !== 0) part.attr('transform', `translate(${bin.x}, ${bin.y})`);\n    }\n\n    this.width = size.width;\n    this.height = size.height;\n  } else if (typeof this.settings.layout === 'object') {\n    this.width = this.settings.layout.width;\n    this.height = this.settings.layout.height;\n\n    for (let partId of Object.keys(this.settings.layout.parts)) {\n      let transforms = this.settings.layout.parts[partId]; // Moving\n\n      if (typeof transforms.move === 'object') {\n        this.parts[partId].attributes.set('transform', 'translate(' + transforms.move.x + ', ' + transforms.move.y + ')');\n      } // Mirrorring\n\n\n      let center = this.parts[partId].topLeft.shiftFractionTowards(this.parts[partId].bottomRight, 0.5);\n      let anchor = {\n        x: 0,\n        y: 0\n      };\n\n      if (transforms.flipX) {\n        let dx = anchor.x - center.x;\n        let transform = `translate(${center.x * -1}, ${center.y * -1})`;\n        transform += ' scale(-1, 1)';\n        transform += ` translate(${center.x * -1 + 2 * dx}, ${center.y})`;\n        this.parts[partId].attributes.add('transform', transform);\n      }\n\n      if (transforms.flipY) {\n        let dy = anchor.y - center.y;\n        let transform = `translate(${center.x * -1}, ${center.y * -1})`;\n        transform += ' scale(1, -1)';\n        transform += ` translate(${center.x}, ${center.y * -1 + 2 * dy})`;\n        this.parts[partId].attributes.add('transform', transform);\n      }\n\n      if (transforms.rotate) {\n        let transform = `rotate(${transforms.rotate}, ${center.x - anchor.x}, ${center.y - anchor.y})`;\n        this.parts[partId].attributes.add('transform', transform);\n      }\n    }\n  }\n\n  return this;\n};\n/** Determines the order to draft parts in, based on dependencies */\n\n\nPattern.prototype.draftOrder = function (graph = this.resolveDependencies()) {\n  let sorted = [];\n  let visited = {};\n  Object.keys(graph).forEach(function visit(name, ancestors) {\n    if (!Array.isArray(ancestors)) ancestors = [];\n    ancestors.push(name);\n    visited[name] = true;\n\n    if (typeof graph[name] !== 'undefined') {\n      graph[name].forEach(function (dep) {\n        if (visited[dep]) return;\n        visit(dep, ancestors.slice(0));\n      });\n    }\n\n    if (sorted.indexOf(name) < 0) sorted.push(name);\n  });\n  return sorted;\n};\n/** Recursively solves part dependencies for a part */\n\n\nPattern.prototype.resolveDependency = function (seen, part, graph = this.config.dependencies, deps = []) {\n  if (typeof seen[part] === 'undefined') seen[part] = true;\n  if (typeof graph[part] === 'string') graph[part] = [graph[part]];\n\n  if (Array.isArray(graph[part])) {\n    if (graph[part].length === 0) return [];else {\n      if (deps.indexOf(graph[part]) === -1) deps.push(...graph[part]);\n\n      for (let apart of graph[part]) deps.concat(this.resolveDependency(seen, apart, graph, deps));\n    }\n  }\n\n  return deps;\n};\n/** Resolves part dependencies into a flat array */\n\n\nPattern.prototype.resolveDependencies = function (graph = this.config.dependencies) {\n  for (let i in this.config.inject) {\n    let dependency = this.config.inject[i];\n    if (typeof this.config.dependencies[i] === 'undefined') this.config.dependencies[i] = dependency;else if (this.config.dependencies[i] !== dependency) {\n      if (typeof this.config.dependencies[i] === 'string') this.config.dependencies[i] = [this.config.dependencies[i], dependency];else if (Array.isArray(this.config.dependencies[i])) {\n        if (this.config.dependencies[i].indexOf(dependency) === -1) this.config.dependencies[i].push(dependency);\n      } else {\n        this.raise.error('Part dependencies should be a string or an array of strings');\n        throw new Error('Part dependencies should be a string or an array of strings');\n      }\n    } // Parts both in the parts and dependencies array trip up the dependency resolver\n\n    if (Array.isArray(this.config.parts)) {\n      let pos = this.config.parts.indexOf(this.config.inject[i]);\n      if (pos !== -1) this.config.parts.splice(pos, 1);\n    }\n  } // Include parts outside the dependency graph\n\n\n  if (Array.isArray(this.config.parts)) {\n    for (let part of this.config.parts) {\n      if (typeof this.config.dependencies[part] === 'undefined') this.config.dependencies[part] = [];\n    }\n  }\n\n  let resolved = {};\n  let seen = {};\n\n  for (let part in graph) resolved[part] = this.resolveDependency(seen, part, graph);\n\n  for (let part in seen) if (typeof resolved[part] === 'undefined') resolved[part] = [];\n\n  return resolved;\n};\n/** Determines whether a part is needed\n * This depends on the 'only' setting and the\n * configured dependencies.\n */\n\n\nPattern.prototype.needs = function (partName) {\n  if (typeof this.settings.only === 'undefined' || this.settings.only === false) return true;else if (typeof this.settings.only === 'string') {\n    if (this.settings.only === partName) return true;\n\n    if (Array.isArray(this.config.resolvedDependencies[this.settings.only])) {\n      for (let dependency of this.config.resolvedDependencies[this.settings.only]) {\n        if (dependency === partName) return true;\n      }\n    }\n  } else if (Array.isArray(this.settings.only)) {\n    for (let part of this.settings.only) {\n      if (part === partName) return true;\n\n      for (let dependency of this.config.resolvedDependencies[part]) {\n        if (dependency === partName) return true;\n      }\n    }\n  }\n  return false;\n};\n/* Checks whether a part is hidden in the config */\n\n\nPattern.prototype.isHidden = function (partName) {\n  if (Array.isArray(this.config.hide)) {\n    if (this.config.hide.indexOf(partName) !== -1) return true;\n  }\n\n  return false;\n};\n/** Determines whether a part is wanted by the user\n * This depends on the 'only' setting\n */\n\n\nPattern.prototype.wants = function (partName) {\n  if (typeof this.settings.only === 'undefined' || this.settings.only === false) {\n    if (this.isHidden(partName)) return false;\n  } else if (typeof this.settings.only === 'string') {\n    if (this.settings.only === partName) return true;\n    return false;\n  } else if (Array.isArray(this.settings.only)) {\n    for (let part of this.settings.only) {\n      if (part === partName) return true;\n    }\n\n    return false;\n  }\n\n  return true;\n};\n/** Returns props required to render this pattern through\n *  an external renderer (eg. a React component)\n */\n\n\nPattern.prototype.getRenderProps = function () {\n  // Run pre-render hook\n  let svg = new Svg(this);\n  svg.hooks = this.hooks;\n  svg.runHooks('preRender');\n  this.pack();\n  let props = {\n    svg\n  };\n  props.width = this.width;\n  props.height = this.height;\n  props.settings = this.settings;\n  props.events = {\n    debug: this.events.debug,\n    info: this.events.info,\n    warning: this.events.warning,\n    error: this.events.error\n  };\n  props.parts = {};\n\n  for (let p in this.parts) {\n    if (this.parts[p].render) {\n      props.parts[p] = {\n        paths: this.parts[p].paths,\n        points: this.parts[p].points,\n        snippets: this.parts[p].snippets,\n        attributes: this.parts[p].attributes,\n        height: this.parts[p].height,\n        width: this.parts[p].width,\n        bottomRight: this.parts[p].bottomRight,\n        topLeft: this.parts[p].topLeft\n      };\n    }\n  }\n\n  return props;\n};\n\nfunction Design(config, plugins = false, conditionalPlugins = false) {\n  const pattern = function (settings) {\n    Pattern.call(this, config); // Load plugins\n\n    if (Array.isArray(plugins)) for (let plugin of plugins) this.use(plugin);else if (plugins) this.use(plugins); // Load conditional plugins\n\n    if (Array.isArray(conditionalPlugins)) for (let plugin of conditionalPlugins) this.useIf(plugin, settings);else if (conditionalPlugins.plugin && conditionalPlugins.condition) this.useIf(conditionalPlugins, settings);\n    this.apply(settings);\n    return this;\n  }; // Set up inheritance\n\n\n  pattern.prototype = Object.create(Pattern.prototype);\n  pattern.prototype.constructor = pattern; // Make config available without need to instantiate pattern\n\n  pattern.config = config;\n  return pattern;\n}\n\nvar index = {\n  version,\n  Design,\n  Pattern,\n  Point,\n  Path,\n  Snippet,\n  utils,\n  patterns: {},\n  plugins: {}\n};\n\nexport default index;\n//# sourceMappingURL=index.mjs.map\n","/**\n * @freesewing/plugin-bundle | v2.17.0\n * An umbrella package of 8 essential FreeSewing build-time plugins\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\n/**\n * @freesewing/plugin-buttons | v2.17.0\n * A FreeSewing plugin that provides button, buttonhole, and snap snippets\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar button = '<g id=\"button\"><circle cx=\"0\" cy=\"0\" r=\"3.4\" style=\"stroke:#000000;fill:none;stroke-width:1;\"/><circle cx=\"-1\" cy=\"-1\" r=\"0.5\" style=\"stroke:none;fill:#000000;\"/><circle cx=\"1\" cy=\"-1\" r=\"0.5\" style=\"stroke:none;fill:#000000;\" /><circle cx=\"1\" cy=\"1\" r=\"0.5\" style=\"stroke:none;fill:#000000;\" /><circle cx=\"-1\" cy=\"1\" r=\"0.5\" style=\"stroke:none;fill:#000000;\" /></g>';\n\nvar buttonhole = '<g id=\"buttonhole\"><path style=\"fill:none;stroke:#000000;\" d=\"M -1,-5 L 1,-5 L 1,5 L -1,5 z\" /></g><g id=\"buttonhole-start\"><path style=\"fill:none;stroke:#000000;\" d=\"M -1,-10 L 1,-10 L 1,0 L -1,0 z\" /></g><g id=\"buttonhole-end\"><path style=\"fill:none;stroke:#000000;\" d=\"M -1,0 L 1,0 L 1,10 L -1,10 z\" /></g>';\n\nvar snaps = '<radialGradient id=\"snap-stud-grad\" cx=\"50%\" cy=\"50%\" r=\"50%\" fx=\"50%\" fy=\"50%\"><stop offset=\"30%\" style=\"stop-color:rgb(235,235,235); stop-opacity:1\"/><stop offset=\"80%\" style=\"stop-color:rgb(100,100,100);stop-opacity:1\" /></radialGradient><g id=\"snap-stud\" ><circle id=\"snap-stud-circle-edge\" cx=\"0\" cy=\"0\" r=\"3.4\" style=\"stroke:#666;fill:#dddddd;stroke-width:0.3;\" /><circle id=\"snap-stud-circle-middle\" cx=\"0\" cy=\"0\" r=\"1.8\" style=\"stroke:none;fill:url(#snap-stud-grad);\"/><path style=\"fill:none;stroke:#666; stroke-width:0.2;\" d=\"M -2,0 L -3,0 M 2,0 L 3,0 M 0,2 L 0,3 M 0,-2 L 0,-3 M 1.5,1.5 L 2.1,2.1 M -1.5,1.5 L -2.1,2.1 M -1.5,-1.5 L -2.1,-2.1 M 1.5,-1.5 L 2.1,-2.1\" id=\"snap-stud-lines\"/></g><g id=\"snap-socket\"><circle id=\"snap-socket-circle-edge\" cx=\"0\" cy=\"0\" r=\"3.4\" style=\"stroke:#666;fill:#bbbbbb;stroke-width:0.3;\"/><circle id=\"snap-socket-circle-middle\" cx=\"0\" cy=\"0\" r=\"2\" style=\"stroke:#666;fill:#dddddd; stroke-width:0.4;\"/><path style=\"fill:none;stroke:#666; stroke-width:0.5;\" d=\"M -1.7,-1 L -1.7,1 M 1.7,-1 L 1.7,1\" id=\"snap-socket-lines\" /></g>';\n\nvar name$c = \"@freesewing/plugin-buttons\";\nvar version$c = \"2.17.0\";\n\nvar index$c = {\n  name: name$c,\n  version: version$c,\n  hooks: {\n    preRender: function (svg) {\n      if (svg.attributes.get('freesewing:plugin-buttons') === false)\n        svg.attributes.set('freesewing:plugin-buttons', version$c);\n      svg.defs += button + buttonhole + snaps;\n    },\n  },\n};\n\n/**\n * @freesewing/plugin-cutonfold | v2.17.0\n * A FreeSewing plugin to add cut-on-fold indicators on your patterns\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar markers$2 = `\n<marker orient=\"auto\" refY=\"0.0\" refX=\"0.0\" id=\"cutonfoldFrom\" style=\"overflow:visible;\" >\n\t<path class=\"note fill-note\" d=\"M 0,0 L 12,-4 C 10,-2 10,2  12, 4 z\" />\n</marker>\n<marker orient=\"auto\" refY=\"0.0\" refX=\"0.0\" id=\"cutonfoldTo\" style=\"overflow:visible;\" >\n\t<path class=\"note fill-note\" d=\"M 0,0 L -12,-4 C -10,-2 -10,2  -12, 4 z\" />\n</marker>\n`;\n\nvar name$b = \"@freesewing/plugin-cutonfold\";\nvar version$b = \"2.17.0\";\n\nvar index$b = {\n  name: name$b,\n  version: version$b,\n  hooks: {\n    preRender: function (svg) {\n      if (svg.attributes.get('freesewing:plugin-cutonfold') === false) {\n        svg.attributes.set('freesewing:plugin-cutonfold', version$b);\n        svg.defs += markers$2;\n      }\n    },\n  },\n  macros: {\n    cutonfold: function (so) {\n      if (so === false) {\n        delete this.points.cutonfoldFrom;\n        delete this.points.cutonfoldTo;\n        delete this.points.cutonfoldVia1;\n        delete this.points.cutonfoldVia2;\n        delete this.paths.cutonfold;\n        return true\n      }\n      let points = this.points;\n      so = {\n        offset: 15,\n        margin: 5,\n        prefix: '',\n        ...so,\n      };\n      points['cutonfoldFrom' + so.prefix] = so.from.shiftFractionTowards(so.to, so.margin / 100);\n      points['cutonfoldTo' + so.prefix] = so.to.shiftFractionTowards(so.from, so.margin / 100);\n      points['cutonfoldVia1' + so.prefix] = points['cutonfoldFrom' + so.prefix]\n        .shiftTowards(so.from, so.offset)\n        .rotate(-90, points['cutonfoldFrom' + so.prefix]);\n      points['cutonfoldVia2' + so.prefix] = points['cutonfoldTo' + so.prefix]\n        .shiftTowards(so.to, so.offset)\n        .rotate(90, points['cutonfoldTo' + so.prefix]);\n      let text = so.grainline ? 'cutOnFoldAndGrainline' : 'cutOnFold';\n      this.paths['cutonfold' + so.prefix] = new this.Path()\n        .move(points['cutonfoldFrom' + so.prefix])\n        .line(points['cutonfoldVia1' + so.prefix])\n        .line(points['cutonfoldVia2' + so.prefix])\n        .line(points['cutonfoldTo' + so.prefix])\n        .attr('class', 'note')\n        .attr('marker-start', 'url(#cutonfoldFrom)')\n        .attr('marker-end', 'url(#cutonfoldTo)')\n        .attr('data-text', text)\n        .attr('data-text-class', 'center fill-note');\n    },\n  },\n};\n\n/**\n * @freesewing/plugin-dimension | v2.17.0\n * A FreeSewing plugin to add dimensions to your (paperless) pattern\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar markers$1 = `\n<marker orient=\"auto\" refY=\"0.0\" refX=\"0.0\" id=\"dimensionFrom\" style=\"overflow:visible;\"><path class=\"mark fill-mark\" d=\"M 0,0 L 12,-4 C 10,-2 10,2  12, 4 z\" /></marker>\n<marker orient=\"auto\" refY=\"0.0\" refX=\"0.0\" id=\"dimensionTo\" style=\"overflow:visible;\" ><path class=\"mark fill-mark\" d=\"M 0,0 L -12,-4 C -10,-2 -10,2  -12, 4 z\" /></marker>\n`;\n\nvar name$a = \"@freesewing/plugin-dimension\";\nvar version$a = \"2.17.0\";\n\nconst prefix = '__paperless';\n\nfunction drawDimension(from, to, so, self) {\n  let dimension = new self.Path()\n    .move(from)\n    .line(to)\n    .attr('class', 'mark')\n    .attr('data-text', so.text || self.units(from.dist(to)))\n    .attr('data-text-class', 'fill-mark center');\n  if (!so.noStartMarker) dimension.attributes.set('marker-start', 'url(#dimensionFrom)');\n  if (!so.noEndMarker) dimension.attributes.set('marker-end', 'url(#dimensionTo)');\n\n  return dimension\n}\n\nfunction drawLeader(self, from, to, id) {\n  self.paths[id] = new self.Path().move(from).line(to).attr('class', 'mark dotted');\n}\n\nfunction hleader(so, type, self, id) {\n  let point;\n  if (typeof so.y === 'undefined' || so[type].y === so.y) {\n    point = so[type];\n  } else {\n    point = new self.Point(so[type].x, so.y);\n    drawLeader(self, so[type], point, id);\n  }\n\n  return point\n}\n\nfunction vleader(so, type, self, id) {\n  let point;\n  if (typeof so.x === 'undefined' || so[type].x === so.x) {\n    point = so[type];\n  } else {\n    point = new self.Point(so.x, so[type].y);\n    drawLeader(self, so[type], point, id);\n  }\n\n  return point\n}\n\nfunction lleader(so, type, self, id) {\n  let point, rot, other;\n  if (type === 'from') {\n    rot = 1;\n    other = 'to';\n  } else {\n    rot = -1;\n    other = 'from';\n  }\n  if (typeof so.d === 'undefined') {\n    point = so[type];\n  } else {\n    point = so[type].shiftTowards(so[other], so.d).rotate(90 * rot, so[type]);\n    drawLeader(self, so[type], point, id);\n  }\n\n  return point\n}\n\nvar index$a = {\n  name: name$a,\n  version: version$a,\n  hooks: {\n    preRender: function (svg) {\n      if (svg.attributes.get('freesewing:plugin-dimension') === false) {\n        svg.attributes.set('freesewing:plugin-dimension', version$a);\n        svg.defs += markers$1;\n      }\n    },\n  },\n  macros: {\n    // horizontal\n    hd: function (so) {\n      let id = so.id || this.getId(prefix);\n      let from = hleader(so, 'from', this, id + '_ls');\n      let to = hleader(so, 'to', this, id + '_le');\n      this.paths[id] = drawDimension(from, to, so, this);\n    },\n    // vertical\n    vd: function (so) {\n      let id = so.id || this.getId(prefix);\n      let from = vleader(so, 'from', this, id + '_ls');\n      let to = vleader(so, 'to', this, id + '_le');\n      this.paths[id] = drawDimension(from, to, so, this);\n    },\n    // linear\n    ld: function (so) {\n      let id = so.id || this.getId(prefix);\n      let from = lleader(so, 'from', this, id + '_ls');\n      let to = lleader(so, 'to', this, id + '_le');\n      this.paths[id] = drawDimension(from, to, so, this);\n    },\n    // path\n    pd: function (so) {\n      let dimension = so.path\n        .offset(so.d)\n        .attr('class', 'mark')\n        .attr('marker-start', 'url(#dimensionFrom)')\n        .attr('marker-end', 'url(#dimensionTo)')\n        .attr('data-text', so.text || this.units(so.path.length()))\n        .attr('data-text-class', 'fill-mark center');\n      let id = so.id || this.getId(prefix);\n      drawLeader(this, so.path.start(), dimension.start(), id + '_ls');\n      drawLeader(this, so.path.end(), dimension.end(), id + '_le');\n      this.paths[id] = dimension;\n    },\n    // Remove dimension\n    rmd: function (so) {\n      if (this.paths[so.id]) delete this.paths[so.id];\n      if (this.paths[`${so.id}_ls`]) delete this.paths[`${so.id}_ls`];\n      if (this.paths[`${so.id}_le`]) delete this.paths[`${so.id}_le`];\n      if (Array.isArray(so.ids)) {\n        for (const id of so.ids) {\n          if (this.paths[id]) delete this.paths[id];\n          if (this.paths[`${id}_ls`]) delete this.paths[`${id}_ls`];\n          if (this.paths[`${id}_le`]) delete this.paths[`${id}_le`];\n        }\n      }\n    },\n    // Remove all dimensions (with standard prefix)\n    rmad: function (so) {\n      for (let type of ['paths', 'points']) {\n        for (let id in this[type]) {\n          if (id.slice(0, prefix.length) === prefix) delete this[type][id];\n        }\n      }\n    },\n  },\n};\n\n/**\n * @freesewing/plugin-grainline | v2.17.0\n * A FreeSewing plugin to add grainline indicators on your patterns\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar markers = `\n<marker orient=\"auto\" refY=\"0.0\" refX=\"0.0\" id=\"grainlineFrom\" style=\"overflow:visible;\" >\n\t<path class=\"note fill-note\" d=\"M 0,0 L 12,-4 C 10,-2 10,2  12, 4 z\" />\n</marker>\n<marker orient=\"auto\" refY=\"0.0\" refX=\"0.0\" id=\"grainlineTo\" style=\"overflow:visible;\" >\n\t<path class=\"note fill-note\" d=\"M 0,0 L -12,-4 C -10,-2 -10,2  -12, 4 z\" />\n</marker>\n`;\n\nvar name$9 = \"@freesewing/plugin-grainline\";\nvar version$9 = \"2.17.0\";\n\nvar index$9 = {\n  name: name$9,\n  version: version$9,\n  hooks: {\n    preRender: function (svg) {\n      if (svg.attributes.get('freesewing:plugin-grainline') === false) {\n        svg.attributes.set('freesewing:plugin-grainline', version$9);\n        svg.defs += markers;\n      }\n    },\n  },\n  macros: {\n    grainline: function (so) {\n      if (so === false) {\n        delete this.points.grainlineFrom;\n        delete this.points.grainlineTo;\n        delete this.paths.grainline;\n        return true\n      }\n      let points = this.points;\n      points.grainlineFrom = so.from.shiftFractionTowards(so.to, 0.05);\n      points.grainlineTo = so.to.shiftFractionTowards(so.from, 0.05);\n      this.paths.grainline = new this.Path()\n        .move(points.grainlineFrom)\n        .line(points.grainlineTo)\n        .attr('class', 'note')\n        .attr('marker-start', 'url(#grainlineFrom)')\n        .attr('marker-end', 'url(#grainlineTo)')\n        .attr('data-text', 'grainline')\n        .attr('data-text-class', 'center fill-note');\n    },\n  },\n};\n\n/**\n * @freesewing/plugin-logo | v2.17.0\n * A FreeSewing plugin to add our logo to your patterns\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar logo = '<g id=\"logo\" transform=\"translate(-23 -36)\"><path class=\"logo\" stroke=\"none\" fill=\"currentColor\" d=\"M 35.222,0 C 34.233,0.703 34.284,0.613 33.485,0.874 31.653,1.473 29.896,1.144 27.811,0.97 27.184,0.9 26.562,0.859 25.955,0.855 22.89,0.834 20.287,1.733 19.794,4.243 18.885,4.794 18.049,5.461 17.221,6.129 15.453,7.524 14.122,9.229 13.214,11.284 11.974,14.319 13.094,17.576 13.649,20.652 13.781,21.372 13.919,22.058 13.993,22.323 14.098,22.696 14.283,23.052 14.484,23.372 14.531,23.38 14.779,22.998 14.838,22.829 14.924,22.583 14.915,22.188 14.821,21.848 14.613,21.083 14.415,20.462 14.398,20.15 14.368,19.564 14.482,19.023 14.696,18.755 14.772,18.66 14.946,19.15 14.901,19.332 14.848,19.551 14.808,19.926 14.825,20.099 14.872,20.685 14.958,21.312 15.065,21.86 15.202,22.567 15.261,23.021 15.236,23.197 15.218,23.325 15.158,23.454 14.928,23.85 14.728,24.197 14.624,24.478 14.608,24.726 14.591,24.968 14.664,25.573 14.732,25.721 14.831,25.952 15.129,26.195 15.389,26.255 15.638,26.35 15.763,26.547 15.891,26.768 16.202,27.361 16.442,28.083 16.68,29.171 16.796,29.692 16.893,30.157 16.924,30.401 15.004,30.403 12.545,30.404 10.305,30.404 9.551,30.416 8.189,30.062 6.94,29.98 6.759,28.026 5.901,25.756 4.433,25.624 3.431,25.533 2.6,25.914 1.897,27.497 L 1.917,27.582 C 2.332,27.235 2.77,26.174 4.348,26.247 5.56,26.302 5.964,28.596 6.084,29.976 5.346,30.03 4.718,30.257 4.39,30.824 L 4.383,30.824 C 4.383,30.825 4.383,30.827 4.386,30.829 4.383,30.831 4.383,30.833 4.383,30.835 L 4.39,30.835 C 4.728,31.416 5.379,31.641 6.144,31.686 6.655,46.136 20.238,48 23.95,48 37.798,48 42.646,38.59 43.375,34.863 43.716,36.451 42.642,38.474 42.385,39.967 45.306,36.59 44.778,33.343 44.244,30.077 44.688,30.605 45.289,30.932 46.104,30.751 45.523,30.363 44.735,30.635 44.263,28.998 44.057,28.291 43.879,27.761 43.702,27.316 43.32,25.883 42.778,24.514 42.112,23.18 41.55,21.733 41.921,20.795 41.865,19.553 42.876,22.887 43.508,23.774 44.688,24.123 41.72,20.547 42.736,15.01 41.059,10.068 41.818,10.514 42.684,10.648 43.606,10.103 42.714,9.849 41.824,10.52 40.544,8.639 39.463,6.536 37.897,4.983 35.997,3.613 34.979,2.949 33.849,2.503 32.713,2.089 33.87,1.799 35.162,0.769 35.222,0 z M 33.281,11.107 C 34.805,11.663 36.485,13.775 36.466,15.847 L 36.466,15.933 36.466,15.963 C 36.425,18.777 35.146,20.29 35.2,22.164 35.269,24.371 36.219,25.141 36.408,25.509 36.084,24.148 35.894,22.436 36.322,21.08 36.872,19.336 37.427,17.892 37.387,16.526 37.367,16.206 37.231,15.009 37.14,14.479 38.774,16.837 36.786,20.266 37.358,22.51 38.352,26.419 42.807,26.913 41.481,34.789 40.314,41.713 32.318,46.968 24.122,46.968 18.046,46.968 7.517,43.605 6.997,31.676 8.232,31.588 9.56,31.244 10.305,31.256 12.557,31.256 15.129,31.257 17.067,31.258 17.431,32.9 17.704,33.296 19.085,34.39 20.621,35.598 20.979,35.745 23.251,35.767 25.524,35.79 26.198,35.303 28.403,33.217 28.879,32.659 29.085,31.928 29.316,31.241 31.584,31.22 33.238,31.18 34.865,31.104 36.522,31.029 36.756,31.104 39.426,30.829 36.756,30.554 36.522,30.629 34.865,30.553 33.281,30.481 31.677,30.44 29.508,30.42 29.69,29.603 29.95,28.805 30.227,28.016 30.398,27.551 30.599,27.098 30.805,26.647 L 31.03,26.577 C 31.464,26.423 31.848,26.093 32.001,25.647 32.198,25.056 32.058,24.392 31.677,23.909 31.546,23.728 31.383,23.497 31.316,23.395 31.115,23.077 31.11,22.9 31.28,21.718 31.423,20.728 31.439,20.21 31.34,19.708 31.32,19.421 31.318,18.831 31.309,18.672 31.385,18.714 31.55,19.09 31.717,19.599 31.883,20.11 31.91,20.216 31.948,20.651 31.99,21.145 31.805,21.511 31.653,22.248 31.577,22.628 31.51,22.981 31.51,23.029 31.51,23.08 31.546,23.188 31.584,23.272 31.673,23.46 31.84,23.724 31.871,23.724 32.416,23.123 32.736,22.381 33.021,21.628 33.321,20.776 33.409,19.872 33.619,18.995 33.789,18.231 33.985,17.466 34.046,16.682 34.169,15.152 34.097,14.072 33.759,12.478 33.678,12.118 33.444,11.431 33.281,11.107 z M 27.921,18.644 C 28.506,18.637 29.085,18.708 29.636,18.867 30.385,19.154 30.49,19.823 30.628,20.574 30.705,21.054 30.702,21.399 30.615,21.963 30.554,22.781 30.229,23.414 29.519,23.859 28.448,24.057 27.303,24.248 26.395,23.539 25.633,22.489 25.174,21.162 25.349,19.868 25.46,19.337 25.707,19.061 26.215,18.896 26.762,18.739 27.341,18.653 27.921,18.644 z M 19.038,18.739 C 19.585,18.734 20.138,18.792 20.442,18.986 21.747,19.869 21.328,21.306 20.812,22.567 20.061,24.218 18.437,24.157 16.863,24.144 15.992,23.889 15.912,23.175 15.786,22.412 15.678,21.675 15.448,20.885 15.64,20.144 16.133,18.952 17.935,18.815 19.038,18.739 z M 38.941,18.945 C 38.948,22.118 39.49,23.677 40.578,25.924 39.937,24.701 39.021,24.005 38.68,22.543 38.028,19.72 38.731,19.878 38.941,18.945 z M 23.128,21.243 C 23.3,21.417 23.383,21.657 23.532,21.848 23.647,21.651 23.765,21.455 23.913,21.28 23.99,21.282 24.084,21.434 24.169,21.706 24.533,22.712 24.604,23.819 25.076,24.786 25.517,25.486 24.915,25.894 24.254,25.926 23.772,25.925 23.568,25.596 23.285,25.27 23.212,25.483 23.073,25.62 22.907,25.764 22.485,26.118 21.658,25.987 21.53,25.429 21.7,24.363 22.243,23.384 22.599,22.362 22.776,21.989 22.778,21.703 23.128,21.243 z M 16.936,26.628 C 17.149,26.628 17.734,27.025 17.853,27.249 17.935,27.398 18.122,27.978 18.135,28.119 18.156,28.287 18.105,28.685 18.053,28.793 18.015,28.87 17.986,28.881 17.942,28.831 17.905,28.789 17.415,27.849 17.102,27.227 16.856,26.729 16.83,26.628 16.936,26.628 z M 29.158,26.939 C 29.166,26.94 29.178,26.943 29.189,26.946 29.255,26.973 29.209,27.207 28.961,28.057 28.914,28.313 28.8,28.515 28.633,28.683 28.578,28.683 28.553,28.619 28.467,28.264 28.394,27.961 28.386,27.691 28.437,27.449 28.525,27.146 28.881,27.053 29.158,26.939 z M 27.675,28.792 C 27.696,28.788 27.716,28.799 27.742,28.82 27.832,28.883 27.845,29.049 27.785,29.374 27.712,29.792 27.696,29.838 27.588,29.881 27.541,29.902 27.457,29.917 27.401,29.917 27.3,29.899 27.274,29.817 27.298,29.693 27.298,29.433 27.374,29.207 27.546,28.94 27.611,28.84 27.644,28.797 27.675,28.792 z M 19.042,28.811 C 19.111,28.811 19.319,28.961 19.396,29.065 19.482,29.175 19.58,29.83 19.525,29.943 19.462,30.085 19.154,30.014 19.069,29.837 19.017,29.731 18.894,29.159 18.894,29.023 18.894,28.897 18.955,28.811 19.042,28.811 z M 26.933,28.984 C 27.017,29.104 27.039,29.258 27.021,29.596 L 27.004,29.904 26.916,29.992 C 26.863,30.041 26.773,30.101 26.719,30.126 26.6,30.182 26.509,30.187 26.492,30.142 26.472,30.082 26.506,29.7 26.543,29.571 26.586,29.438 26.779,29.041 26.843,28.957 26.872,28.88 26.906,28.976 26.933,28.984 z M 21.912,28.966 C 22.093,29.012 22.173,29.175 22.272,29.323 L 22.339,29.455 22.245,29.782 C 22.195,29.962 22.142,30.124 22.126,30.142 22.108,30.162 22.041,30.172 21.942,30.171 21.678,30.164 21.648,30.153 21.577,30.045 L 21.511,29.947 21.567,29.672 C 21.648,29.276 21.687,29.157 21.777,29.055 21.824,29 21.871,28.97 21.912,28.966 z M 20.241,29.249 20.39,29.398 20.415,29.735 C 20.428,29.919 20.434,30.09 20.424,30.111 20.415,30.14 20.361,30.148 20.194,30.148 L 19.977,30.148 C 19.861,30.021 19.825,29.866 19.776,29.706 19.662,29.225 19.662,29.006 19.78,28.977 19.973,28.989 20.1,29.129 20.241,29.249 z M 26.041,29.018 C 26.277,29.081 26.23,29.456 26.229,29.724 26.211,30.158 26.194,30.248 26.138,30.304 26.041,30.401 25.771,30.347 25.64,30.203 25.597,30.151 25.593,30.135 25.627,29.924 25.666,29.667 25.716,29.507 25.827,29.287 25.908,29.129 25.984,29.03 26.041,29.018 z M 20.715,29.038 C 20.728,29.037 20.749,29.038 20.769,29.04 20.919,29.052 21.059,29.15 21.183,29.33 L 21.283,29.477 C 21.292,29.718 21.283,29.972 21.24,30.196 21.214,30.209 21.106,30.229 21,30.239 20.816,30.256 20.799,30.252 20.735,30.196 20.646,30.12 20.621,29.979 20.599,29.511 20.586,29.129 20.595,29.044 20.715,29.038 z M 22.984,29.118 C 23.145,29.152 23.247,29.238 23.292,29.379 23.328,29.5 23.35,30.177 23.315,30.224 23.303,30.244 23.227,30.269 23.14,30.28 22.816,30.321 22.53,30.29 22.502,30.213 22.466,30.125 22.707,29.253 22.796,29.145 22.834,29.061 22.926,29.126 22.984,29.118 z M 25.082,29.124 C 25.153,29.117 25.229,29.185 25.303,29.33 25.363,29.451 25.372,29.493 25.372,29.764 25.372,29.98 25.359,30.073 25.336,30.093 25.316,30.109 25.235,30.138 25.149,30.16 24.999,30.199 24.966,30.203 24.919,30.187 L 24.694,30.146 24.711,30.012 C 24.727,29.837 24.842,29.449 24.923,29.281 24.971,29.181 25.026,29.131 25.082,29.124 z M 24.104,29.127 C 24.151,29.125 24.173,29.136 24.203,29.169 24.274,29.253 24.364,29.501 24.421,29.766 24.497,30.139 24.497,30.138 24.334,30.187 24.263,30.209 24.113,30.232 24.006,30.238 23.653,30.256 23.626,30.235 23.669,29.923 23.703,29.645 23.84,29.207 23.899,29.175 23.963,29.141 24.037,29.142 24.104,29.127 z M 6.111,30.536 C 6.114,30.535 6.118,30.536 6.118,30.536 6.127,30.731 6.127,30.928 6.131,31.124 5.636,31.086 5.272,30.968 5.272,30.829 5.272,30.692 5.623,30.575 6.111,30.536 z M 6.976,30.553 C 7.377,30.603 7.654,30.708 7.649,30.829 7.649,30.951 7.381,31.055 6.983,31.104 6.979,30.921 6.979,30.737 6.976,30.553 z M 25.702,31.086 C 25.736,31.083 25.751,31.08 25.803,31.085 26.011,31.106 26.041,31.119 26.041,31.189 26.041,31.281 25.883,31.558 25.776,31.654 25.726,31.702 25.657,31.742 25.633,31.742 25.513,31.742 25.443,31.489 25.499,31.256 25.533,31.13 25.595,31.091 25.702,31.086 z M 24.947,31.169 C 25.04,31.161 25.13,31.186 25.22,31.198 25.194,31.461 25.076,31.676 24.857,31.819 24.803,31.819 24.776,31.716 24.776,31.491 24.776,31.223 24.79,31.172 24.947,31.169 z M 24.119,31.266 C 24.312,31.266 24.482,31.275 24.49,31.286 24.526,31.32 24.422,31.578 24.269,31.84 24.138,32.073 24.119,32.09 24.038,32.096 23.72,32.06 23.729,31.687 23.68,31.431 23.68,31.279 23.714,31.266 24.119,31.266 z M 21.11,31.295 C 21.331,31.299 21.417,31.332 21.417,31.417 21.417,31.525 21.335,31.74 21.288,31.767 21.217,31.806 21.211,31.804 21.071,31.658 20.85,31.41 20.825,31.364 21.11,31.295 z M 22.174,31.306 C 22.178,31.312 22.221,31.39 22.264,31.478 22.358,31.661 22.365,31.741 22.298,31.802 22.14,31.892 22.107,31.841 21.964,31.75 21.798,31.593 21.667,31.382 21.71,31.338 21.858,31.285 22.021,31.305 22.174,31.306 z M 22.596,31.311 22.991,31.318 C 23.145,31.318 23.278,31.326 23.285,31.338 23.312,31.362 23.225,31.876 23.178,31.992 23.124,32.122 22.935,32.123 22.837,31.969 22.697,31.748 22.605,31.562 22.602,31.434 L 22.596,31.311 z\" /></g>';\n\nvar name$8 = \"@freesewing/plugin-logo\";\nvar version$8 = \"2.17.0\";\n\nvar index$8 = {\n  name: name$8,\n  version: version$8,\n  hooks: {\n    preRender: function (svg) {\n      if (svg.attributes.get('freesewing:plugin-logo') === false) {\n        svg.attributes.set('freesewing:plugin-logo', version$8);\n        svg.defs += logo;\n      }\n    },\n  },\n};\n\n/**\n * @freesewing/plugin-mirror | v2.17.0\n * A FreeSewing plugin to mirror points or paths\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar name$7 = \"@freesewing/plugin-mirror\";\nvar version$7 = \"2.17.0\";\n\nconst lineValues = (start, end) => {\n  const { x: x1, y: y1 } = start;\n  const { x: x2, y: y2 } = end;\n  const [A, B] = [-(y2 - y1), x2 - x1];\n  const C = -(A * x1 + B * y1);\n  return [A, B, C]\n};\n\nconst mirrorGen = (start, end) => {\n  const [A, B, C] = lineValues(start, end);\n  return (point) => {\n    const { x, y } = point;\n    const uNom = (B ** 2 - A ** 2) * x - 2 * A * B * y - 2 * A * C;\n    const vNom = (A ** 2 - B ** 2) * y - 2 * A * B * x - 2 * B * C;\n    const denom = A ** 2 + B ** 2;\n    return [uNom / denom, vNom / denom]\n  }\n};\n\nconst capFirst = (string) => string.charAt(0).toUpperCase() + string.slice(1);\n\nvar index$7 = {\n  name: name$7,\n  version: version$7,\n  hooks: {\n    preRender: function (svg) {\n      if (svg.attributes.get('freesewing:plugin-mirror') === false)\n        svg.attributes.set('freesewing:plugin-mirror', version$7);\n    },\n  },\n  macros: {\n    mirror: function ({\n      mirror,\n      clone = true,\n      points = null,\n      paths = null,\n      prefix = 'mirrored',\n      nameFormat = undefined,\n    }) {\n      const [start, end] = mirror;\n      const mirrorPoint = mirrorGen(start, end);\n      const ops = ['from', 'to', 'cp1', 'cp2'];\n\n      if (paths !== null) {\n        paths.forEach((path, i) => {\n          // Try to find point name from path by looking in list of all points\n          let foundId = null;\n          for (let id of Object.keys(this.paths)) {\n            if (this.paths[id] === path) {\n              foundId = id;\n              break\n            }\n          }\n          path = clone ? path.clone() : path;\n          if (clone) {\n            if (foundId === null && typeof nameFormat == 'function') {\n              this.paths[nameFormat(path)] = path;\n            } else {\n              this.paths[`${prefix}${capFirst(foundId)}`] = path;\n            }\n          }\n          for (let op in path.ops) {\n            for (let type of ops) {\n              // Iterate over all possible path op points and clone/move point\n              const pathOp = path.ops[op][type];\n              if (typeof pathOp !== 'undefined') {\n[pathOp.x, pathOp.y] = mirrorPoint(pathOp);\n                pathOp.attributes.set('mirrored', true);\n              }\n            }\n          }\n        });\n      }\n\n      if (points !== null) {\n        points.forEach((point) => {\n          let foundId = null;\n          for (let id of Object.keys(this.points)) {\n            if (this.points[id] === point) {\n              foundId = id;\n              break\n            }\n          }\n          if (clone) {\n            point = point.clone();\n            if (foundId === null && typeof nameFormat == 'function') {\n              this.points[nameFormat(point)] = point;\n            } else {\n              this.points[`${prefix}${capFirst(foundId)}`] = point;\n            }\n          }\n[point.x, point.y] = mirrorPoint(point);\n          point.attributes.set('mirrored', true);\n        });\n      }\n    },\n  },\n};\n\n/**\n * @freesewing/plugin-notches | v2.17.0\n * A FreeSewing plugin that provides front and back notch snippets\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar name$6 = \"@freesewing/plugin-notches\";\nvar version$6 = \"2.17.0\";\n\nconst notches =\n  '<g id=\"notch\"><circle cy=\"0\" cx=\"0\" r=\"1.4\" class=\"fill-note\" /><circle cy=\"0\" cx=\"0\" r=\"2.8\" class=\"note\" /></g><g id=\"bnotch\"><path d=\"M -1.1 -1.1 L 1.1 1.1 M 1.1 -1.1 L -1.1 1.1\" class=\"note stroke-xl\" /><circle cy=\"0\" cx=\"0\" r=\"2.8\" class=\"note\" /></g>';\n\nvar index$6 = {\n  name: name$6,\n  version: version$6,\n  hooks: {\n    preRender: function (svg) {\n      if (svg.attributes.get('freesewing:plugin-notches') === false) {\n        svg.defs += notches;\n        svg.attributes.add('freesewing:plugin-notches', version$6);\n      }\n    },\n  },\n};\n\n/**\n * @freesewing/plugin-title | v2.17.0\n * A FreeSewing plugin to add a title to your pattern parts\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar style = `text.title-nr{font-size:24pt;font-weight:700;text-anchor:middle;dominant-baseline:reset-size}text.title-name{font-size:7pt;font-weight:500;text-anchor:middle;dominant-baseline:reset-size}text.title-pattern{font-size:4pt;font-weight:500;dominant-baseline:reset-size;text-anchor:middle;font-style:italic}`;\n\nvar name$5 = \"@freesewing/plugin-title\";\nvar version$5 = \"2.17.0\";\n\nvar index$5 = {\n  name: name$5,\n  version: version$5,\n  hooks: {\n    preRender: function (svg) {\n      if (svg.attributes.get('freesewing:plugin-title') === false) {\n        svg.attributes.set('freesewing:plugin-title', version$5);\n        svg.style += style;\n      }\n    },\n  },\n  macros: {\n    title: function (so) {\n      const transform = function (anchor) {\n        let cx = anchor.x - so.scale * anchor.x;\n        let cy = anchor.y - so.scale * anchor.y;\n\n        return `matrix(${so.scale}, 0, 0, ${so.scale}, ${cx}, ${cy}) rotate(${so.rotation} ${anchor.x} ${anchor.y})`\n      };\n      let defaults = {\n        scale: 1,\n        rotation: 0,\n      };\n      so = { ...defaults, ...so };\n      let overwrite = true;\n      if (so.append) overwrite = false;\n      let prefix = '';\n      if (so.prefix) prefix = so.prefix;\n      this.points[`_${prefix}_titleNr`] = so.at\n        .clone()\n        .attr('data-text', so.nr, overwrite)\n        .attr('data-text-class', 'title-nr note fill-note')\n        .attr('data-text-transform', transform(so.at));\n      let shift = 10;\n      if (so.title) {\n        this.points[`_${prefix}_titleName`] = so.at\n          .shift(-90 - so.rotation, 13 * so.scale)\n          .attr('data-text', so.title)\n          .attr('data-text-class', 'title-name')\n          .attr('data-text-transform', transform(so.at.shift(-90 - so.rotation, 13 * so.scale)));\n        shift += 10;\n      }\n      this.points[`_${prefix}_titlePattern`] = so.at\n        .shift(-90 - so.rotation, shift * so.scale)\n        .attr('data-text', this.context.config.name)\n        .attr('data-text', 'v' + this.context.config.version)\n        .attr('data-text-class', 'title-pattern fill-note')\n        .attr('data-text-transform', transform(so.at.shift(-90 - so.rotation, shift * so.scale)));\n      if (this.context.settings.metadata && this.context.settings.metadata.for) {\n        shift += 8;\n        this.points[`_${prefix}_titleFor`] = so.at\n          .shift(-90 - so.rotation, shift * so.scale)\n          .attr('data-text', '( ' + this.context.settings.metadata.for + ' )')\n          .attr('data-text-class', 'title-pattern')\n          .attr('data-text-transform', transform(so.at.shift(-90 - so.rotation, shift * so.scale)));\n      }\n      if (this.context.config.cut && this.context.config.cut[this.name]) {\n        shift += 8;\n        let cid = `_${prefix}_titleCut`;\n        let cut = this.context.config.cut[this.name];\n        this.points[cid] = so.at\n          .shift(-90 - so.rotation, shift * so.scale)\n          .attr('data-text', 'cut')\n          .attr('data-text-class', 'title-pattern')\n          .attr('data-text-transform', transform(so.at.shift(-90 - so.rotation, shift * so.scale)));\n        if (typeof cut === 'number') this.points[cid].attr('data-text', ` ${cut}x`);\n        else if (Array.isArray(cut)) {\n          cut = Array.from(cut); // Don't change the original array\n          this.points[cid].attr('data-text', ` ${cut.shift()}x`);\n          for (const txt of cut) this.points[cid].attr('data-text', txt);\n        }\n      }\n    },\n  },\n};\n\n/**\n * @freesewing/plugin-scalebox | v2.17.0\n * A FreeSewing plugin to add a scalebox to your pattern\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar name$4 = \"@freesewing/plugin-scalebox\";\nvar version$4 = \"2.17.0\";\n\nfunction scalebox (so) {\n  // Passing `false` will remove the scalebox\n  if (so === false) {\n    for (let id of [\n      '__scaleboxMetricTopLeft',\n      '__scaleboxMetricTopRight',\n      '__scaleboxMetricBottomRight',\n      '__scaleboxMetricBottomLeft',\n      '__scaleboxImperialTopLeft',\n      '__scaleboxImperialTopRight',\n      '__scaleboxImperialBottomRight',\n      '__scaleboxImperialBottomLeft',\n      '__scaleboxLead',\n      '__scaleboxTitle',\n      '__scaleboxText',\n      '__scaleboxLink',\n      '__scaleboxMetric',\n      '__scaleboxImperial',\n    ])\n      delete this.points[id];\n    for (let id of ['__scaleboxMetric', '__scaleboxImperial']) delete this.paths[id];\n    return true\n  }\n  // Box points\n  this.points.__scaleboxMetricTopLeft = new this.Point(so.at.x - 50, so.at.y - 25);\n  this.points.__scaleboxMetricTopRight = new this.Point(so.at.x + 50, so.at.y - 25);\n  this.points.__scaleboxMetricBottomLeft = new this.Point(so.at.x - 50, so.at.y + 25);\n  this.points.__scaleboxMetricBottomRight = new this.Point(so.at.x + 50, so.at.y + 25);\n  this.points.__scaleboxImperialTopLeft = new this.Point(so.at.x - 50.8, so.at.y - 25.4);\n  this.points.__scaleboxImperialTopRight = new this.Point(so.at.x + 50.8, so.at.y - 25.4);\n  this.points.__scaleboxImperialBottomLeft = new this.Point(so.at.x - 50.8, so.at.y + 25.4);\n  this.points.__scaleboxImperialBottomRight = new this.Point(so.at.x + 50.8, so.at.y + 25.4);\n  // Text anchor points\n  this.points.__scaleboxLead = new this.Point(so.at.x - 45, so.at.y - 15);\n  this.points.__scaleboxTitle = this.points.__scaleboxLead.shift(-90, 10);\n  this.points.__scaleboxText = this.points.__scaleboxTitle.shift(-90, 12);\n  this.points.__scaleboxLink = this.points.__scaleboxText.shift(-90, 5);\n  this.points.__scaleboxMetric = new this.Point(so.at.x, so.at.y + 20);\n  this.points.__scaleboxImperial = new this.Point(so.at.x, so.at.y + 24);\n  // Rotation\n  if (so.rotate) {\n    let points = [\n      '__scaleboxMetricTopLeft',\n      '__scaleboxMetricTopRight',\n      '__scaleboxMetricBottomLeft',\n      '__scaleboxMetricBottomRight',\n      '__scaleboxImperialTopLeft',\n      '__scaleboxImperialTopRight',\n      '__scaleboxImperialBottomLeft',\n      '__scaleboxImperialBottomRight',\n      '__scaleboxLead',\n      '__scaleboxTitle',\n      '__scaleboxText',\n      '__scaleboxLink',\n      '__scaleboxMetric',\n      '__scaleboxImperial',\n    ];\n    for (let pid of points) this.points[pid] = this.points[pid].rotate(so.rotate, so.at);\n    for (let pid of points.slice(8)) {\n      this.points[pid].attributes.set(\n        'data-text-transform',\n        `rotate(${so.rotate * -1}, ${this.points[pid].x}, ${this.points[pid].y})`\n      );\n    }\n  }\n  // Paths\n  this.paths.__scaleboxImperial = new this.Path()\n    .attr('class', 'scalebox imperial')\n    .move(this.points.__scaleboxImperialTopLeft)\n    .line(this.points.__scaleboxImperialBottomLeft)\n    .line(this.points.__scaleboxImperialBottomRight)\n    .line(this.points.__scaleboxImperialTopRight)\n    .close();\n  this.paths.__scaleboxMetric = new this.Path()\n    .attr('class', 'scalebox metric')\n    .move(this.points.__scaleboxMetricTopLeft)\n    .line(this.points.__scaleboxMetricBottomLeft)\n    .line(this.points.__scaleboxMetricBottomRight)\n    .line(this.points.__scaleboxMetricTopRight)\n    .close();\n  // Lead\n  this.points.__scaleboxLead = this.points.__scaleboxLead\n    .attr('data-text', so.lead || 'FreeSewing')\n    .attr('data-text-class', 'text-sm');\n  // Title\n  if (so.title) this.points.__scaleboxTitle.attributes.set('data-text', so.title);\n  else {\n    this.points.__scaleboxTitle = this.points.__scaleboxTitle\n      .attr('data-text', this.context.config.name)\n      .attr('data-text', 'v' + this.context.config.version);\n  }\n  this.points.__scaleboxTitle.attributes.add('data-text-class', 'text-lg');\n  // Text\n  if (typeof so.text === 'string') {\n    this.points.__scaleboxText.attr('data-text', so.text);\n  } else {\n    this.points.__scaleboxText.attr('data-text', 'supportFreesewingBecomeAPatron');\n    this.points.__scaleboxLink = this.points.__scaleboxLink\n      .attr('data-text', 'freesewing.org/patrons/join')\n      .attr('data-text-class', 'text-xs fill-note');\n  }\n  this.points.__scaleboxText.attr('data-text-class', 'text-xs').attr('data-text-lineheight', 4);\n  // Instructions\n  this.points.__scaleboxMetric = this.points.__scaleboxMetric\n    .attr('data-text', 'theWhiteInsideOfThisBoxShouldMeasure')\n    .attr('data-text', '10cm')\n    .attr('data-text', 'x')\n    .attr('data-text', '5cm')\n    .attr('data-text-class', 'text-xs center');\n  this.points.__scaleboxImperial = this.points.__scaleboxImperial\n    .attr('data-text', 'theBlackOutsideOfThisBoxShouldMeasure')\n    .attr('data-text', '4\"')\n    .attr('data-text', 'x')\n    .attr('data-text', '2\"')\n    .attr('data-text-class', 'text-xs center ');\n}\n\nfunction miniscale (so) {\n  // Passing `false` will remove the miniscale\n  if (so === false) {\n    for (let id of [\n      '__miniscaleMetricTopLeft',\n      '__miniscaleMetricTopRight',\n      '__miniscaleMetricBottomRight',\n      '__miniscaleMetricBottomLeft',\n      '__miniscaleImperialTopLeft',\n      '__miniscaleImperialTopRight',\n      '__miniscaleImperialBottomRight',\n      '__miniscaleImperialBottomLeft',\n      '__miniscaleMetric',\n      '__miniscaleImperial',\n    ])\n      delete this.points[id];\n    for (let id of ['__miniscaleMetric', '__miniscaleImperial']) delete this.paths[id];\n    return true\n  }\n  const m = 12.5;\n  const i = 12.7;\n  // Box points\n  this.points.__miniscaleMetricTopLeft = new this.Point(so.at.x - m, so.at.y - m);\n  this.points.__miniscaleMetricTopRight = new this.Point(so.at.x + m, so.at.y - m);\n  this.points.__miniscaleMetricBottomLeft = new this.Point(so.at.x - m, so.at.y + m);\n  this.points.__miniscaleMetricBottomRight = new this.Point(so.at.x + m, so.at.y + m);\n  this.points.__miniscaleImperialTopLeft = new this.Point(so.at.x - i, so.at.y - i);\n  this.points.__miniscaleImperialTopRight = new this.Point(so.at.x + i, so.at.y - i);\n  this.points.__miniscaleImperialBottomLeft = new this.Point(so.at.x - i, so.at.y + i);\n  this.points.__miniscaleImperialBottomRight = new this.Point(so.at.x + i, so.at.y + i);\n  // Text anchor points\n  this.points.__miniscaleMetric = new this.Point(so.at.x, so.at.y - 2);\n  this.points.__miniscaleImperial = new this.Point(so.at.x, so.at.y + 8);\n  // Rotation\n  if (so.rotate) {\n    let points = [\n      '__miniscaleMetricTopLeft',\n      '__miniscaleMetricTopRight',\n      '__miniscaleMetricBottomLeft',\n      '__miniscaleMetricBottomRight',\n      '__miniscaleImperialTopLeft',\n      '__miniscaleImperialTopRight',\n      '__miniscaleImperialBottomLeft',\n      '__miniscaleImperialBottomRight',\n      '__miniscaleMetric',\n      '__miniscaleImperial',\n    ];\n    for (let pid of points) this.points[pid] = this.points[pid].rotate(so.rotate, so.at);\n    for (let pid of points.slice(8)) {\n      this.points[pid].attributes.set(\n        'data-text-transform',\n        `rotate(${so.rotate * -1}, ${this.points[pid].x}, ${this.points[pid].y})`\n      );\n    }\n  }\n  // Paths\n  this.paths.__miniscaleImperial = new this.Path()\n    .attr('class', 'scalebox imperial')\n    .move(this.points.__miniscaleImperialTopLeft)\n    .line(this.points.__miniscaleImperialBottomLeft)\n    .line(this.points.__miniscaleImperialBottomRight)\n    .line(this.points.__miniscaleImperialTopRight)\n    .close();\n  this.paths.__miniscaleMetric = new this.Path()\n    .attr('class', 'scalebox metric')\n    .move(this.points.__miniscaleMetricTopLeft)\n    .line(this.points.__miniscaleMetricBottomLeft)\n    .line(this.points.__miniscaleMetricBottomRight)\n    .line(this.points.__miniscaleMetricTopRight)\n    .close();\n  // Text\n  this.points.__miniscaleMetric = this.points.__miniscaleMetric\n    .attr('data-text', '2.5cm x 2.5cm')\n    .attr('data-text-class', 'text-xs center');\n  this.points.__miniscaleImperial = this.points.__miniscaleImperial\n    .attr('data-text', '1\" x 1\"')\n    .attr('data-text-class', 'text-xs center ');\n}\n\nvar index$4 = {\n  name: name$4,\n  version: version$4,\n  hooks: {\n    preRender: function (svg) {\n      svg.attributes.set('freesewing:plugin-scalebox', version$4);\n    },\n  },\n  macros: { scalebox, miniscale },\n};\n\n/**\n * @freesewing/plugin-round | v2.17.0\n * A FreeSewing plugin to round corners\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar name$3 = \"@freesewing/plugin-round\";\nvar version$3 = \"2.17.0\";\n\nvar index$3 = {\n  name: name$3,\n  version: version$3,\n  hooks: {\n    preRender: function (svg) {\n      if (svg.attributes.get('freesewing:plugin-round') === false)\n        svg.attributes.set('freesewing:plugin-round', version$3);\n    },\n  },\n  macros: {\n    round: function (so) {\n      const C = 0.55191502449;\n      // Find angle between points\n      let from = so.from;\n      let to = so.to;\n      let via = so.via;\n      let radius = so.radius;\n      let prefix = so.prefix;\n      let angle1 = from.angle(via);\n      let angle2 = via.angle(to);\n      if ((Math.round(angle1) - Math.round(angle2)) % 90 !== 0)\n        console.log('Warning: The round macro only handles 90 degree angles correctly.');\n      let fd = from.dist(via);\n      let td = to.dist(via);\n      if (radius > fd || radius > td || typeof radius === 'undefined') radius = fd > td ? td : fd;\n      this.points[prefix + 'Start'] = via.shiftTowards(from, radius);\n      this.points[prefix + 'Cp1'] = via.shiftTowards(from, radius * (1 - C));\n      this.points[prefix + 'Cp2'] = via.shiftTowards(to, radius * (1 - C));\n      this.points[prefix + 'End'] = via.shiftTowards(to, radius);\n      this.paths[prefix + 'Rounded'] = new this.Path()\n        .move(this.points[prefix + 'Start'])\n        .curve(\n          this.points[prefix + 'Cp1'],\n          this.points[prefix + 'Cp2'],\n          this.points[prefix + 'End']\n        )\n        .attr('class', so.class ? so.class : '');\n      if (typeof so.render !== 'undefined' && so.render)\n        this.paths[prefix + 'Rounded'].render = true;\n      else this.paths[prefix + 'Rounded'].render = false;\n    },\n  },\n};\n\n/**\n * @freesewing/plugin-sprinkle | v2.17.0\n * A FreeSewing plugin to bulk-add snippets to your pattern\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar name$2 = \"@freesewing/plugin-sprinkle\";\nvar version$2 = \"2.17.0\";\n\nvar index$2 = {\n  name: name$2,\n  version: version$2,\n  hooks: {\n    preRender: function (svg) {\n      if (svg.attributes.get('freesewing:plugin-sprinkle') === false)\n        svg.attributes.set('freesewing:plugin-sprinkle', version$2);\n    },\n  },\n  macros: {\n    sprinkle: function (so) {\n      for (let pid of so.on)\n        this.snippets[pid + '-' + so.snippet] = new this.Snippet(so.snippet, this.points[pid]);\n    },\n  },\n};\n\n/**\n * @freesewing/plugin-measurements | v2.17.0\n * A FreeSewing plugin that adds additional measurements that can be calculated from existing ones\n * (c) 2021 Joost De Cock <joost@joost.at> (https://github.com/joostdecock)\n * @license MIT\n */\nvar name$1 = \"@freesewing/plugin-measurements\";\nvar version$1 = \"2.17.0\";\n\nvar index$1 = {\n  name: name$1,\n  version: version$1,\n  hooks: {\n    preDraft: function ({ settings }) {\n      if (\n        typeof settings.measurements.seatBack !== 'undefined' &&\n        typeof settings.measurements.seat !== 'undefined'\n      ) {\n        settings.measurements.seatFront =\n          settings.measurements.seat - settings.measurements.seatBack;\n        settings.measurements.seatBackArc = settings.measurements.seatBack / 2;\n        settings.measurements.seatFrontArc = settings.measurements.seatFront / 2;\n      }\n      if (\n        typeof settings.measurements.waist !== 'undefined' &&\n        typeof settings.measurements.waistBack !== 'undefined'\n      ) {\n        settings.measurements.waistBackArc = settings.measurements.waistBack / 2;\n        settings.measurements.waistFrontArc =\n          (settings.measurements.waist - settings.measurements.waistBack) / 2;\n      }\n      if (\n        typeof settings.measurements.crossSeam !== 'undefined' &&\n        typeof settings.measurements.crossSeamFront !== 'undefined'\n      ) {\n        settings.measurements.crossSeamBack =\n          settings.measurements.crossSeam - settings.measurements.crossSeamFront;\n      }\n    },\n  },\n};\n\nvar name = \"@freesewing/plugin-bundle\";\nvar version = \"2.17.0\";\n\n/* eslint no-unused-expressions: \"warn\" */\n\nlet bundle = [\n  index$c,\n  index$b,\n  index$a,\n  index$9,\n  index$8,\n  index$7,\n  index$6,\n  index$5,\n  index$4,\n  index$3,\n  index$2,\n  index$1,\n];\n\nfunction bundleHooks() {\n  let hooks = {};\n  for (let plugin of bundle) {\n    for (let i in plugin.hooks) {\n      if (typeof hooks[i] === 'undefined') hooks[i] = [];\n      let hook = plugin.hooks[i];\n      if (typeof hook === 'function') hooks[i].push(hook);\n      else if (typeof hook === 'object') {\n        for (let method of hook) hooks[i].push(method);\n      }\n    }\n  }\n\n  return hooks\n}\n\nfunction bundleMacros() {\n  let macros = {};\n  for (let plugin of bundle) {\n    for (let i in plugin.macros) macros[i] = plugin.macros[i];\n  }\n\n  return macros\n}\n\nvar index = {\n  name: name,\n  version: version,\n  hooks: bundleHooks(),\n  macros: bundleMacros(),\n};\n\nexport default index;\n//# sourceMappingURL=index.mjs.map\n","import { version } from '../package.json'\n\n// ?? 🤔 ?? --> https://en.freesewing.dev/packages/core/config\n\nexport default {\n  name: '18shift',\n  version,\n  design: 'Zee',\n  code: 'Zee',\n  department: 'womenswear',\n  type: 'pattern',\n  difficulty: 3,\n  tags: [\n    'freesewing',\n    'design',\n    'diy',\n    'fashion',\n    'made to measure',\n    'parametric design',\n    'pattern',\n    'sewing',\n    'sewing pattern'\n  ],\n  optionGroups: {\n    fit: ['size']\n  },\n  measurements: [],\n  dependencies: {},\n  inject: {},\n  hide: [],\n  parts: ['box'],\n  options: {\n    size: { pct: 50, min: 10, max: 100 }\n  }\n}\n","import freesewing from '@freesewing/core'\nimport plugins from '@freesewing/plugin-bundle'\nimport config from '../config'\nimport draftBox from './box'\n\n// Create new design\nconst Pattern = new freesewing.Design(config, plugins)\n\n// Attach the draft methods to the prototype\nPattern.prototype.draftBox = draftBox\n\nexport default Pattern\n","export default function (part) {\n  const {\n    options,\n    Point,\n    Path,\n    points,\n    paths,\n    Snippet,\n    snippets,\n    complete,\n    sa,\n    paperless,\n    macro\n  } = part.shorthand()\n\n  const w = 500 * options.size\n  points.topLeft = new Point(0, 0)\n  points.topRight = new Point(w, 0)\n  points.bottomLeft = new Point(0, w / 2)\n  points.bottomRight = new Point(w, w / 2)\n\n  paths.seam = new Path()\n    .move(points.topLeft)\n    .line(points.bottomLeft)\n    .line(points.bottomRight)\n    .line(points.topRight)\n    .line(points.topLeft)\n    .close()\n    .attr('class', 'fabric')\n\n  // Complete?\n  if (complete) {\n    points.logo = points.topLeft.shiftFractionTowards(points.bottomRight, 0.5)\n    snippets.logo = new Snippet('logo', points.logo)\n    points.text = points.logo\n      .shift(-90, w / 8)\n      .attr('data-text', 'hello')\n      .attr('data-text-class', 'center')\n\n    if (sa) {\n      paths.sa = paths.seam.offset(sa).attr('class', 'fabric sa')\n    }\n  }\n\n  // Paperless?\n  if (paperless) {\n    macro('hd', {\n      from: points.bottomLeft,\n      to: points.bottomRight,\n      y: points.bottomLeft.y + sa + 15\n    })\n    macro('vd', {\n      from: points.bottomRight,\n      to: points.topRight,\n      x: points.topRight.x + sa + 15\n    })\n  }\n\n  return part\n}\n"],"names":["Attributes","this","list","Point","x","y","debug","attributes","Object","defineProperty","value","configurable","prototype","add","name","push","set","remove","get","join","getAsArray","render","svg","key","renderAsCss","css","renderIfPrefixIs","prefix","prefixLen","length","substr","asPropsIfPrefixIs","props","propKey","clone","JSON","parse","stringify","withRaise","raise","check","warning","rad2deg","radians","deg2rad","degrees","attr","overwrite","dist","that","dx","dy","Math","sqrt","pow","slope","angle","rad","atan2","PI","rotate","deg","radius","cos","sin","copy","flipX","flipY","shift","distance","p","shiftTowards","sitsOn","sitsRoughlyOn","round","shiftFractionTowards","fraction","shiftOutwards","translate","abs","abs$1","cos$1","sin$1","acos","acos$1","sqrt$1","crt","v","pi$1","tau","quart","nMax","Number","MAX_SAFE_INTEGER","nMin","MIN_SAFE_INTEGER","ZERO","z","utils$1","Tvalues","Cvalues","arcfn","t","derivativeFn","d","l","compute","points","_3d","order","mt","ret","a","b","c","mt2","t2","dCpts","i","splice","computeWithRatios","ratios","r","f1","f2","f3","f4","derive","dpoints","dpt","j","between","m","M","approximately","precision","len","sum","map","ds","de","ts","te","lerp","v1","v2","undefined","pointToString","s","pointsToString","obj","o","dx1","dy1","dx2","dy2","pos","indexOf","parseFloat","substring","p1","p2","closest","LUT","point","mpos","mdist","forEach","idx","abcratio","n","bottom","projectionratio","top","lli8","x1","y1","x2","y2","x3","y3","x4","y4","lli4","p3","p4","lli","makeline","Bezier","findbbox","sections","mx","my","MX","MY","bbox","min","max","mid","size","shapeintersections","s1","bbox1","s2","bbox2","curveIntersectionThreshold","bboxoverlap","intersections","a1","startcap","forward","back","endcap","a2","l1","virtual","l2","iss","intersects","c1","c2","makeshape","bpl","fpl","start","end","shape","getminmax","curve","concat","align","line","tx","ty","roots","aligned","reduce","m1","m2","filter","pa","pb","pc","q","q2","discriminant","u1","mp3","phi","t1","sd","droots","curvature","d1","d2","kOnly","num","dnm","adk","dk","k","dd","qdsum","pk","nk","inflections","slice","v3","trm","sq","b1","b2","dims","dim","expandbox","_bbox","pairiteration","c1b","c2b","threshold","_t1","_t2","cc1","split","cc2","pairs","left","right","pair","results","getccenter","dx1p","dy1p","dx2p","dy2p","mx1","my1","mx2","my2","mx1n","my1n","mx2n","my2n","arc","_","e","numberSort","PolyBezier","constructor","curves","valueOf","toString","addCurve","offset","pi","coords","args","Array","from","arguments","coordlen","newargs","higher","Error","step","dimlen","_linear","some","_lut","update","quadraticFromPoints","abc","getABC","A","cubicFromPoints","S","B","E","C","selen","lx","ly","bx1","by1","bx2","by2","e1","e2","nc1","nc2","getUtils","toSVG","last","setRatios","verify","print","coordDigest","_print","computedirection","clockwise","derivative","bind","u","um","getLUT","steps","on","error","lut","hits","project","ft","np","pim","dderivative","normal","__normal3","__normal2","r1","r2","q1","R","hull","_p","pt","result","span","extrema","mfn","sort","values","overlaps","lbbox","tbbox","nv","scale","simple","n1","n2","segment","pass1","pass2","distanceFn","ov","rc","outline","d3","d4","reduced","fcurves","bcurves","alen","tlen","graduated","linearDistanceFunction","slen","reverse","fs","fe","bs","be","ls","le","segments","outlineshapes","shapes","lineIntersects","curveintersects","selfintersects","arcs","errorThreshold","_iterate","_error","np1","ref","circles","safety","t_s","t_e","np2","np3","prev_arc","done","curr_good","prev_good","t_m","prev_e","interval","Path","topLeft","bottomRight","ops","offsetLine","to","move","asPath","bezier","joinPaths","paths","closed","current","joint","op","type","cp1","cp2","err","close","shiftAlongBezier","previous","next","thisLen","lineBoundingBox","curveBoundingBox","bb","addIntersectionsToArray","candidates","candidate","capitalize","string","charAt","toUpperCase","isCoord","macroName","beamsIntersect","slopeA","slopeB","iA","linesIntersect","lenA","lenB","lenC","lenD","pointOnBeam","cross","pointOnLine","pointOnCurve","units","lineIntersectsCurve","bz","isect","curvesIntersect","fromA","cp1A","cp2A","toA","fromB","cp1B","cp2B","toB","curveA","curveB","tvalues","intersection","unique","dupe","beamIntersectsCircle","det","i1","i2","curveEdge","edge","Infinity","sampleStyle","run","runs","styles","isArray","setRender","_curve","pop","curve_","noop","id","insop","noopId","path","newPath","asPathstring","shiftAlong","pathOffset","boundary","edges","side","stepsPerMm","shiftFractionAlong","bbs","boxes","minX","maxX","minY","maxY","box","bbbbox","rev","section","topOp","leftOp","bottomOp","rightOp","divide","intersectsX","intersectsAxis","intersectsY","val","mode","lineStart","lineEnd","pathA","pathB","divided","firstHalf","secondHalf","unshift","trim","chunks","firstCandidate","parseInt","lastCandidate","trimmedStart","trimmedEnd","glue","first","utils","freeze","__proto__","splitCurve","beamIntersectsX","beamIntersectsY","curveIntersectsX","curveIntersectsY","circlesIntersect","chorddistance","halfchordlength","chordmidpointx","chordmidpointy","lineIntersectsCircle","stretchToScale","stretch","Snippet","def","anchor","Hooks","preDraft","postDraft","preSample","postSample","preRender","postRender","insertText","Part","snippets","freeId","width","height","hooks","macroClosure","self","macro","runHooks","hookName","data","hook","method","getId","unitsClosure","context","settings","margin","paperless","stack","inject","orig","findBasePoint","toPoint","cp1Point","cp2Point","input","shorthand","complete","sa","store","events","apply","create","pointsProxy","Reflect","Proxy","pathsProxy","snippetsProxy","target","prop","receiver","measurementsProxy","measurements","optionsProxy","options","Svg","pattern","openGroups","layout","body","style","script","defs","locale","text","idPrefix","embed","head","renderHead","tail","renderTail","partId","parts","part","partSvg","renderPart","transform","openGroup","closeGroup","renderSvgTag","renderStyle","renderScript","renderDefs","nl","indent","outdent","renderPath","renderText","renderCircle","snippet","renderSnippet","renderPathText","escapeText","lineHeight","lines","replace","tab","space","tabs","GrowingPacker$1","fit","blocks","node","block","root","findNode","splitNode","growNode","used","down","canGrowDown","canGrowRight","shouldGrowRight","shouldGrowDown","growRight","growDown","GrowingPacker","Store","Map","Pattern","config","info","version","is","dependencies","hide","resolvedDependencies","resolveDependencies","draftOrder","option","pct","mm","count","bool","dflt","macros","setIfUnset","has","keys","entry","draft","partName","needs","wants","sample","sampleOption","sampleMeasurement","measurement","sampleModels","models","focus","sampleParts","sampleRun","anchors","extraClass","focusStyle","optionName","factor","sampleListOption","measurementName","pack","use","plugin","loadPluginHooks","loadPluginMacros","useIf","condition","bins","items","packer","inPlace","newItems","item","curr","binPack","bin","transforms","center","graph","sorted","visited","visit","ancestors","dep","resolveDependency","seen","deps","apart","dependency","resolved","only","isHidden","getRenderProps","index","Design","plugins","conditionalPlugins","call","patterns","drawDimension","so","dimension","noStartMarker","noEndMarker","drawLeader","hleader","vleader","lleader","rot","other","capFirst","bundle","button","cutonfold","cutonfoldFrom","cutonfoldTo","cutonfoldVia1","cutonfoldVia2","grainline","hd","vd","ld","pd","rmd","ids","rmad","grainlineFrom","grainlineTo","mirror","nameFormat","mirrorPoint","lineValues","denom","mirrorGen","foundId","pathOp","title","cx","cy","rotation","append","at","nr","metadata","for","cut","cid","txt","scalebox","__scaleboxMetricTopLeft","__scaleboxMetricTopRight","__scaleboxMetricBottomLeft","__scaleboxMetricBottomRight","__scaleboxImperialTopLeft","__scaleboxImperialTopRight","__scaleboxImperialBottomLeft","__scaleboxImperialBottomRight","__scaleboxLead","__scaleboxTitle","__scaleboxText","__scaleboxLink","__scaleboxMetric","__scaleboxImperial","pid","lead","miniscale","__miniscaleMetricTopLeft","__miniscaleMetricTopRight","__miniscaleMetricBottomLeft","__miniscaleMetricBottomRight","__miniscaleImperialTopLeft","__miniscaleImperialTopRight","__miniscaleImperialBottomLeft","__miniscaleImperialBottomRight","__miniscaleMetric","__miniscaleImperial","via","angle1","angle2","console","log","fd","td","class","sprinkle","seatBack","seat","seatFront","seatBackArc","seatFrontArc","waist","waistBack","waistBackArc","waistFrontArc","crossSeam","crossSeamFront","crossSeamBack","bundleHooks","bundleMacros","design","code","department","difficulty","tags","optionGroups","freesewing","draftBox","w","topRight","bottomLeft","seam","logo"],"mappings":"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"}